./mariadb/bin/mariadbd: One can only use the --user switch if running as root
2024-01-08 12:17:41 0 [Note] Starting MariaDB 10.11.2-MariaDB source revision cafba8761af55ae16cc69c9b53a341340a845b36 as process 66033
2024-01-08 12:17:41 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
2024-01-08 12:17:41 0 [Note] InnoDB: Number of transaction pools: 1
2024-01-08 12:17:41 0 [Note] InnoDB: Using crc32 + pclmulqdq instructions
2024-01-08 12:17:41 0 [Note] InnoDB: Using Linux native AIO
2024-01-08 12:17:41 0 [Note] InnoDB: Initializing buffer pool, total size = 128.000MiB, chunk size = 2.000MiB
2024-01-08 12:17:41 0 [Note] InnoDB: Completed initialization of buffer pool
2024-01-08 12:17:41 0 [Note] InnoDB: Buffered log writes (block size=512 bytes)
2024-01-08 12:17:41 0 [Note] InnoDB: 128 rollback segments are active.
2024-01-08 12:17:41 0 [Note] InnoDB: Removed temporary tablespace data file: "./ibtmp1"
2024-01-08 12:17:41 0 [Note] InnoDB: Setting file './ibtmp1' size to 12.000MiB. Physically writing the file full; Please wait ...
2024-01-08 12:17:42 0 [Note] InnoDB: File './ibtmp1' size is now 12.000MiB.
2024-01-08 12:17:42 0 [Note] InnoDB: log sequence number 1993413988; transaction id 1577
2024-01-08 12:17:42 0 [Note] Plugin 'FEEDBACK' is disabled.
2024-01-08 12:17:42 0 [Note] InnoDB: Loading buffer pool(s) from /scratch/s8todick/dbbert-slurm/data/ib_buffer_pool
2024-01-08 12:17:42 0 [Note] InnoDB: Buffer pool(s) load completed at 240108 12:17:42
2024-01-08 12:17:42 0 [Note] Server socket created on IP: '0.0.0.0'.
2024-01-08 12:17:42 0 [Warning] 'user' entry '@falkenfelser' ignored in --skip-name-resolve mode.
2024-01-08 12:17:42 0 [Warning] 'proxies_priv' entry '@% root@falkenfelser' ignored in --skip-name-resolve mode.
2024-01-08 12:17:42 0 [Note] ./mariadb/bin/mariadbd: ready for connections.
Version: '10.11.2-MariaDB'  socket: '/tmp/mysql.sock'  port: 3306  Source distribution
1
1
server started
/scratch/s8todick/dbbert-slurm/venv/lib/python3.9/site-packages/torch/cuda/__init__.py:138: UserWarning: CUDA initialization: The NVIDIA driver on your system is too old (found version 11040). Please update your GPU driver by downloading and installing a new version from the URL: http://www.nvidia.com/Download/index.aspx Alternatively, go to: https://pytorch.org to install a PyTorch version that has been compiled with your version of the CUDA driver. (Triggered internally at ../c10/cuda/CUDAFunctions.cpp:108.)
  return torch._C._cuda_getDeviceCount() > 0
Some weights of the model checkpoint at bert-base-cased were not used when initializing BertModel: ['cls.predictions.transform.dense.weight', 'cls.predictions.transform.dense.bias', 'cls.predictions.transform.LayerNorm.bias', 'cls.predictions.bias', 'cls.predictions.transform.LayerNorm.weight', 'cls.seq_relationship.bias', 'cls.seq_relationship.weight', 'cls.predictions.decoder.weight']
- This IS expected if you are initializing BertModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
/scratch/s8todick/dbbert-slurm/venv/lib/python3.9/site-packages/mariadb/connections.py:85: RuntimeWarning: MariaDB Connector/Python was build with MariaDB Connector/C version 3.3.4 but loaded Connector/C library has version 10.5.21
  super().__init__(*args, **kwargs)
Input arguments: Namespace(text_source_path='demo_docs/mariadb100', max_length=512, filter_params=1, use_implicit=1, hint_order=2, nr_frames=100000, timeout_s=1500, performance_scaling=0.1, assignment_scaling=1.0, nr_evaluations=2, nr_hints=20, min_batch_size=8, memory=10737418240, disk=50000000000, cores=4, dbms='md', db_name='tpch', db_user='kaltenec', db_pwd='PerformanceMeasurements', restart_cmd='bash /scratch/s8todick/dbbert-slurm/restart_server.sh', recover_cmd='echo "Reset database state!"; sleep 5', query_path='../client/TPC/TPC-H/dbgen/sql-queries/joined.sql', nr_runs=1, result_path_prefix='dbbert_results')
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Global variables: ['analyze_sample_percentage', 'aria_block_size', 'aria_checkpoint_interval', 'aria_checkpoint_log_activity', 'aria_force_start_after_recovery_failures', 'aria_group_commit_interval', 'aria_log_file_size', 'aria_max_sort_file_size', 'aria_pagecache_age_threshold', 'aria_pagecache_buffer_size', 'aria_pagecache_division_limit', 'aria_pagecache_file_hash_size', 'aria_repair_threads', 'aria_sort_buffer_size', 'auto_increment_increment', 'auto_increment_offset', 'back_log', 'binlog_cache_size', 'binlog_commit_wait_count', 'binlog_commit_wait_usec', 'binlog_expire_logs_seconds', 'binlog_file_cache_size', 'binlog_stmt_cache_size', 'bulk_insert_buffer_size', 'column_compression_threshold', 'column_compression_zlib_level', 'connect_timeout', 'deadlock_search_depth_long', 'deadlock_search_depth_short', 'deadlock_timeout_long', 'deadlock_timeout_short', 'default_password_lifetime', 'default_week_format', 'delayed_insert_limit', 'delayed_insert_timeout', 'delayed_queue_size', 'div_precision_increment', 'eq_range_index_dive_limit', 'expensive_subquery_limit', 'expire_logs_days', 'extra_max_connections', 'extra_port', 'flush_time', 'ft_max_word_len', 'ft_min_word_len', 'ft_query_expansion_limit', 'group_concat_max_len', 'gtid_cleanup_batch_size', 'gtid_domain_id', 'histogram_size', 'host_cache_size', 'idle_readonly_transaction_timeout', 'idle_transaction_timeout', 'idle_write_transaction_timeout', 'in_predicate_conversion_threshold', 'innodb_adaptive_flushing_lwm', 'innodb_adaptive_hash_index_parts', 'innodb_autoextend_increment', 'innodb_autoinc_lock_mode', 'innodb_buf_dump_status_frequency', 'innodb_buffer_pool_chunk_size', 'innodb_buffer_pool_dump_pct', 'innodb_buffer_pool_size', 'innodb_change_buffer_max_size', 'innodb_compression_failure_threshold_pct', 'innodb_compression_level', 'innodb_compression_pad_pct_max', 'innodb_default_encryption_key_id', 'innodb_defragment_fill_factor', 'innodb_defragment_fill_factor_n_recs', 'innodb_defragment_frequency', 'innodb_defragment_n_pages', 'innodb_defragment_stats_accuracy', 'innodb_encryption_rotate_key_age', 'innodb_encryption_rotation_iops', 'innodb_encryption_threads', 'innodb_fast_shutdown', 'innodb_fatal_semaphore_wait_threshold', 'innodb_fill_factor', 'innodb_flush_log_at_timeout', 'innodb_flush_log_at_trx_commit', 'innodb_flush_neighbors', 'innodb_flushing_avg_loops', 'innodb_force_recovery', 'innodb_ft_cache_size', 'innodb_ft_max_token_size', 'innodb_ft_min_token_size', 'innodb_ft_num_word_optimize', 'innodb_ft_result_cache_limit', 'innodb_ft_sort_pll_degree', 'innodb_ft_total_cache_size', 'innodb_io_capacity', 'innodb_io_capacity_max', 'innodb_lock_wait_timeout', 'innodb_log_buffer_size', 'innodb_log_file_size', 'innodb_lru_flush_size', 'innodb_lru_scan_depth', 'innodb_max_dirty_pages_pct', 'innodb_max_dirty_pages_pct_lwm', 'innodb_max_purge_lag', 'innodb_max_purge_lag_delay', 'innodb_max_purge_lag_wait', 'innodb_max_undo_log_size', 'innodb_old_blocks_pct', 'innodb_old_blocks_time', 'innodb_online_alter_log_max_size', 'innodb_open_files', 'innodb_page_size', 'innodb_purge_batch_size', 'innodb_purge_rseg_truncate_frequency', 'innodb_purge_threads', 'innodb_read_ahead_threshold', 'innodb_read_io_threads', 'innodb_sort_buffer_size', 'innodb_spin_wait_delay', 'innodb_stats_modified_counter', 'innodb_stats_persistent_sample_pages', 'innodb_stats_transient_sample_pages', 'innodb_sync_spin_loops', 'innodb_undo_tablespaces', 'innodb_write_io_threads', 'interactive_timeout', 'join_buffer_size', 'join_buffer_space_limit', 'join_cache_level', 'key_buffer_size', 'key_cache_age_threshold', 'key_cache_block_size', 'key_cache_division_limit', 'key_cache_file_hash_size', 'key_cache_segments', 'large_page_size', 'lock_wait_timeout', 'log_bin_compress_min_len', 'log_slow_min_examined_row_limit', 'log_slow_query_time', 'log_slow_rate_limit', 'log_tc_size', 'log_warnings', 'long_query_time', 'lower_case_table_names', 'max_allowed_packet', 'max_binlog_cache_size', 'max_binlog_size', 'max_binlog_stmt_cache_size', 'max_connect_errors', 'max_connections', 'max_delayed_threads', 'max_digest_length', 'max_error_count', 'max_heap_table_size', 'max_insert_delayed_threads', 'max_join_size', 'max_length_for_sort_data', 'max_password_errors', 'max_prepared_stmt_count', 'max_recursive_iterations', 'max_relay_log_size', 'max_rowid_filter_size', 'max_seeks_for_key', 'max_session_mem_used', 'max_sort_length', 'max_sp_recursion_depth', 'max_statement_time', 'max_tmp_tables', 'max_user_connections', 'max_write_lock_count', 'metadata_locks_cache_size', 'metadata_locks_hash_instances', 'min_examined_row_limit', 'mrr_buffer_size', 'myisam_block_size', 'myisam_data_pointer_size', 'myisam_max_sort_file_size', 'myisam_mmap_size', 'myisam_repair_threads', 'myisam_sort_buffer_size', 'net_buffer_length', 'net_read_timeout', 'net_retry_count', 'net_write_timeout', 'open_files_limit', 'optimizer_extra_pruning_depth', 'optimizer_max_sel_arg_weight', 'optimizer_prune_level', 'optimizer_search_depth', 'optimizer_selectivity_sampling_limit', 'optimizer_trace_max_mem_size', 'optimizer_use_condition_selectivity', 'performance_schema_max_cond_classes', 'performance_schema_max_digest_length', 'performance_schema_max_file_classes', 'performance_schema_max_file_handles', 'performance_schema_max_memory_classes', 'performance_schema_max_mutex_classes', 'performance_schema_max_rwlock_classes', 'performance_schema_max_socket_classes', 'performance_schema_max_sql_text_length', 'performance_schema_max_stage_classes', 'performance_schema_max_statement_classes', 'performance_schema_max_statement_stack', 'performance_schema_max_thread_classes', 'port', 'preload_buffer_size', 'profiling_history_size', 'progress_report_time', 'protocol_version', 'query_alloc_block_size', 'query_cache_limit', 'query_cache_min_res_unit', 'query_cache_size', 'query_prealloc_size', 'range_alloc_block_size', 'read_binlog_speed_limit', 'read_buffer_size', 'read_rnd_buffer_size', 'relay_log_space_limit', 'report_port', 'rowid_merge_buff_size', 'rpl_semi_sync_master_timeout', 'rpl_semi_sync_master_trace_level', 'rpl_semi_sync_slave_kill_conn_timeout', 'rpl_semi_sync_slave_trace_level', 'server_id', 'slave_domain_parallel_threads', 'slave_max_allowed_packet', 'slave_max_statement_time', 'slave_net_timeout', 'slave_parallel_max_queued', 'slave_parallel_threads', 'slave_parallel_workers', 'slave_transaction_retries', 'slave_transaction_retry_interval', 'slow_launch_time', 'sort_buffer_size', 'sql_select_limit', 'sql_slave_skip_counter', 'stored_program_cache', 'sync_binlog', 'sync_master_info', 'sync_relay_log', 'sync_relay_log_info', 'table_definition_cache', 'table_open_cache', 'table_open_cache_instances', 'tcp_keepalive_interval', 'tcp_keepalive_probes', 'tcp_keepalive_time', 'thread_cache_size', 'thread_pool_idle_timeout', 'thread_pool_max_threads', 'thread_pool_oversubscribe', 'thread_pool_prio_kickup_timer', 'thread_pool_size', 'thread_pool_stall_limit', 'thread_stack', 'tmp_disk_table_size', 'tmp_memory_table_size', 'tmp_table_size', 'transaction_alloc_block_size', 'transaction_prealloc_size', 'wait_timeout', 'wsrep_gtid_domain_id', 'wsrep_ignore_apply_errors', 'wsrep_max_ws_rows', 'wsrep_max_ws_size', 'wsrep_mysql_replication_bundle', 'wsrep_retry_autocommit', 'wsrep_slave_threads', 'wsrep_sync_wait', 'wsrep_trx_fragment_size']
All parameters: ['analyze_sample_percentage', 'aria_block_size', 'aria_checkpoint_interval', 'aria_checkpoint_log_activity', 'aria_force_start_after_recovery_failures', 'aria_group_commit_interval', 'aria_log_file_size', 'aria_max_sort_file_size', 'aria_pagecache_age_threshold', 'aria_pagecache_buffer_size', 'aria_pagecache_division_limit', 'aria_pagecache_file_hash_size', 'aria_repair_threads', 'aria_sort_buffer_size', 'auto_increment_increment', 'auto_increment_offset', 'back_log', 'binlog_cache_size', 'binlog_commit_wait_count', 'binlog_commit_wait_usec', 'binlog_expire_logs_seconds', 'binlog_file_cache_size', 'binlog_stmt_cache_size', 'bulk_insert_buffer_size', 'column_compression_threshold', 'column_compression_zlib_level', 'connect_timeout', 'deadlock_search_depth_long', 'deadlock_search_depth_short', 'deadlock_timeout_long', 'deadlock_timeout_short', 'default_password_lifetime', 'default_week_format', 'delayed_insert_limit', 'delayed_insert_timeout', 'delayed_queue_size', 'div_precision_increment', 'eq_range_index_dive_limit', 'expensive_subquery_limit', 'expire_logs_days', 'extra_max_connections', 'extra_port', 'flush_time', 'ft_max_word_len', 'ft_min_word_len', 'ft_query_expansion_limit', 'group_concat_max_len', 'gtid_cleanup_batch_size', 'gtid_domain_id', 'histogram_size', 'host_cache_size', 'idle_readonly_transaction_timeout', 'idle_transaction_timeout', 'idle_write_transaction_timeout', 'in_predicate_conversion_threshold', 'innodb_adaptive_flushing_lwm', 'innodb_adaptive_hash_index_parts', 'innodb_autoextend_increment', 'innodb_autoinc_lock_mode', 'innodb_buf_dump_status_frequency', 'innodb_buffer_pool_chunk_size', 'innodb_buffer_pool_dump_pct', 'innodb_buffer_pool_size', 'innodb_change_buffer_max_size', 'innodb_compression_failure_threshold_pct', 'innodb_compression_level', 'innodb_compression_pad_pct_max', 'innodb_default_encryption_key_id', 'innodb_defragment_fill_factor', 'innodb_defragment_fill_factor_n_recs', 'innodb_defragment_frequency', 'innodb_defragment_n_pages', 'innodb_defragment_stats_accuracy', 'innodb_encryption_rotate_key_age', 'innodb_encryption_rotation_iops', 'innodb_encryption_threads', 'innodb_fast_shutdown', 'innodb_fatal_semaphore_wait_threshold', 'innodb_fill_factor', 'innodb_flush_log_at_timeout', 'innodb_flush_log_at_trx_commit', 'innodb_flush_neighbors', 'innodb_flushing_avg_loops', 'innodb_force_recovery', 'innodb_ft_cache_size', 'innodb_ft_max_token_size', 'innodb_ft_min_token_size', 'innodb_ft_num_word_optimize', 'innodb_ft_result_cache_limit', 'innodb_ft_sort_pll_degree', 'innodb_ft_total_cache_size', 'innodb_io_capacity', 'innodb_io_capacity_max', 'innodb_lock_wait_timeout', 'innodb_log_buffer_size', 'innodb_log_file_size', 'innodb_lru_flush_size', 'innodb_lru_scan_depth', 'innodb_max_dirty_pages_pct', 'innodb_max_dirty_pages_pct_lwm', 'innodb_max_purge_lag', 'innodb_max_purge_lag_delay', 'innodb_max_purge_lag_wait', 'innodb_max_undo_log_size', 'innodb_old_blocks_pct', 'innodb_old_blocks_time', 'innodb_online_alter_log_max_size', 'innodb_open_files', 'innodb_page_size', 'innodb_purge_batch_size', 'innodb_purge_rseg_truncate_frequency', 'innodb_purge_threads', 'innodb_read_ahead_threshold', 'innodb_read_io_threads', 'innodb_sort_buffer_size', 'innodb_spin_wait_delay', 'innodb_stats_modified_counter', 'innodb_stats_persistent_sample_pages', 'innodb_stats_transient_sample_pages', 'innodb_sync_spin_loops', 'innodb_undo_tablespaces', 'innodb_write_io_threads', 'interactive_timeout', 'join_buffer_size', 'join_buffer_space_limit', 'join_cache_level', 'key_buffer_size', 'key_cache_age_threshold', 'key_cache_block_size', 'key_cache_division_limit', 'key_cache_file_hash_size', 'key_cache_segments', 'large_page_size', 'lock_wait_timeout', 'log_bin_compress_min_len', 'log_slow_min_examined_row_limit', 'log_slow_query_time', 'log_slow_rate_limit', 'log_tc_size', 'log_warnings', 'long_query_time', 'lower_case_table_names', 'max_allowed_packet', 'max_binlog_cache_size', 'max_binlog_size', 'max_binlog_stmt_cache_size', 'max_connect_errors', 'max_connections', 'max_delayed_threads', 'max_digest_length', 'max_error_count', 'max_heap_table_size', 'max_insert_delayed_threads', 'max_join_size', 'max_length_for_sort_data', 'max_password_errors', 'max_prepared_stmt_count', 'max_recursive_iterations', 'max_relay_log_size', 'max_rowid_filter_size', 'max_seeks_for_key', 'max_session_mem_used', 'max_sort_length', 'max_sp_recursion_depth', 'max_statement_time', 'max_tmp_tables', 'max_user_connections', 'max_write_lock_count', 'metadata_locks_cache_size', 'metadata_locks_hash_instances', 'min_examined_row_limit', 'mrr_buffer_size', 'myisam_block_size', 'myisam_data_pointer_size', 'myisam_max_sort_file_size', 'myisam_mmap_size', 'myisam_repair_threads', 'myisam_sort_buffer_size', 'net_buffer_length', 'net_read_timeout', 'net_retry_count', 'net_write_timeout', 'open_files_limit', 'optimizer_extra_pruning_depth', 'optimizer_max_sel_arg_weight', 'optimizer_prune_level', 'optimizer_search_depth', 'optimizer_selectivity_sampling_limit', 'optimizer_trace_max_mem_size', 'optimizer_use_condition_selectivity', 'performance_schema_max_cond_classes', 'performance_schema_max_digest_length', 'performance_schema_max_file_classes', 'performance_schema_max_file_handles', 'performance_schema_max_memory_classes', 'performance_schema_max_mutex_classes', 'performance_schema_max_rwlock_classes', 'performance_schema_max_socket_classes', 'performance_schema_max_sql_text_length', 'performance_schema_max_stage_classes', 'performance_schema_max_statement_classes', 'performance_schema_max_statement_stack', 'performance_schema_max_thread_classes', 'port', 'preload_buffer_size', 'profiling_history_size', 'progress_report_time', 'protocol_version', 'query_alloc_block_size', 'query_cache_limit', 'query_cache_min_res_unit', 'query_cache_size', 'query_prealloc_size', 'range_alloc_block_size', 'read_binlog_speed_limit', 'read_buffer_size', 'read_rnd_buffer_size', 'relay_log_space_limit', 'report_port', 'rowid_merge_buff_size', 'rpl_semi_sync_master_timeout', 'rpl_semi_sync_master_trace_level', 'rpl_semi_sync_slave_kill_conn_timeout', 'rpl_semi_sync_slave_trace_level', 'server_id', 'slave_domain_parallel_threads', 'slave_max_allowed_packet', 'slave_max_statement_time', 'slave_net_timeout', 'slave_parallel_max_queued', 'slave_parallel_threads', 'slave_parallel_workers', 'slave_transaction_retries', 'slave_transaction_retry_interval', 'slow_launch_time', 'sort_buffer_size', 'sql_select_limit', 'sql_slave_skip_counter', 'stored_program_cache', 'sync_binlog', 'sync_master_info', 'sync_relay_log', 'sync_relay_log_info', 'table_definition_cache', 'table_open_cache', 'table_open_cache_instances', 'tcp_keepalive_interval', 'tcp_keepalive_probes', 'tcp_keepalive_time', 'thread_cache_size', 'thread_pool_idle_timeout', 'thread_pool_max_threads', 'thread_pool_oversubscribe', 'thread_pool_prio_kickup_timer', 'thread_pool_size', 'thread_pool_stall_limit', 'thread_stack', 'tmp_disk_table_size', 'tmp_memory_table_size', 'tmp_table_size', 'transaction_alloc_block_size', 'transaction_prealloc_size', 'wait_timeout', 'wsrep_gtid_domain_id', 'wsrep_ignore_apply_errors', 'w2024-01-08 12:18:42 0 [Note] ./mariadb/bin/mariadbd (initiated by: kaltenec[kaltenec] @  [127.0.0.1]): Normal shutdown
srep_max_ws_rows', 'wsrep_max_ws_size', 'wsrep_mysql_replication_bundle', 'wsrep_retry_autocommit', 'wsrep_slave_threads', 'wsrep_sync_wait', 'wsrep_trx_fragment_size'][Restart] MariaDB server shut down!
2024-01-08 12:18:42 0 [Note] InnoDB: FTS optimize thread exiting.
2024-01-08 12:18:42 0 [Note] InnoDB: Starting shutdown...
2024-01-08 12:18:42 0 [Note] InnoDB: Dumping buffer pool(s) to /scratch/s8todick/dbbert-slurm/data/ib_buffer_pool
2024-01-08 12:18:42 0 [Note] InnoDB: Restricted to 2016 pages due to innodb_buf_pool_dump_pct=25
2024-01-08 12:18:42 0 [Note] InnoDB: Buffer pool(s) dump completed at 240108 12:18:42
2024-01-08 12:18:42 0 [Note] InnoDB: Removed temporary tablespace data file: "./ibtmp1"
2024-01-08 12:18:42 0 [Note] InnoDB: Shutdown completed; log sequence number 1993413988; transaction id 1578
2024-01-08 12:18:42 0 [Note] ./mariadb/bin/mariadbd: Shutdown complete

[Restart] MariaDB server restarted!

Disconnecting ...
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Trying update update mariadb.server_cost set cost_value = NULL
Exception during update: Table 'mariadb.server_cost' doesn't exist
Trying update update mariadb.engine_cost set cost_value = NULL
Exception during update: Table 'mariadb.engine_cost' doesn't exist
Discard text passages without at least one explicit parameter reference: True (1)
Try to infer implicit parameter references: True (1)
Creating hints for document 0
Creating hints for document 1
Adding hint TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(9, 11), match='70'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=70.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.24300822615623474
Adding hint TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(12, 15), match='80%'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=0.8, val_unit='', hint_type=<HintType.RAM_RATIO: 1>) with confidence 0.24300822615623474
Excluding recommendation "at least 70-80% of the available memory" for parameter "optimizer_extra_pruning_depth" due to low confidence (0.0001694382372079417)
Excluding recommendation "A larger log file size" for parameter "innodb_log_file_size" due to low confidence (0.02260212041437626)
Creating hints for document 2
Creating hints for document 3
Creating hints for document 4
Creating hints for document 5
Creating hints for document 6
Creating hints for document 7
Excluding recommendation "orders.customer_id and ..." for parameter "max_error_count" due to low confidence (4.548957804217935e-06)
Adding hint TuningHint(doc_id=7, param=<re.Match object; span=(658, 674), match='join_cache_level'>, value=<re.Match object; span=(0, 1), match='3'>, recommendation='3 or a bigger', passage='customer.id = orders.customer_id and ...\nSuppose, table orders has an index IDX on orders.customer_id.\nIf the query plan is using this index to fetch orders for each customer, the optimizer will use index statistics from IDX to estimate the number of rows in the customer-joined-with-orders.\nOn the other hand, if the optimizer considers a query plan that\njoins customer with orders without use of indexes, it will ignore the customer.id = orders.customer_id equality completely and will compute the\noutput cardinality as if customer was cross-joined with orders.\nHash Join\nMariaDB supports Block Hash Join. It is not enabled by default, one needs to set it join_cache_level to 3 or a bigger value to enable it.\nBefore MDEV-30812, Query optimization for Block Hash Join would work as described in the above example: It would assume that the join operation is a cross join.\nMDEV-30812 introduces a new optimizer_switch flag, hash_join_cardinality. In MariaDB versions before 11.0, it is off by default. max_error_count ', float_val=3.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.33536747097969055
Creating hints for document 8
Creating hints for document 9
Creating hints for document 10
Creating hints for document 11
Excluding recommendation "256" for parameter "table_open_cache" due to low confidence (0.0010591890895739198)
Excluding recommendation "36M" for parameter "query_cache_size" due to low confidence (0.03721773624420166)
Adding hint TuningHint(doc_id=11, param=<re.Match object; span=(343, 367), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 2), match='2K'>, recommendation='2K', passage='If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.\nEnable the query cache with\nquery_cache_type = 1.\nFor most Moodle installs, set the following:\nquery_cache_size = 36M\nquery_cache_min_res_unit = 2K.\nThe query cache will improve performance if you are doing few updates on the database.\nSet the table cache correctly. For Moodle 1.6 set\ntable_cache = 256 #(table_open_cache in MySQL > 5.1.2)\n(min), and for Moodle 1.7 set\ntable_cache = 512 #(table_open_cache in MySQL > 5.1.2)\n(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size ', float_val=2.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.6846972703933716
Adding hint TuningHint(doc_id=11, param=<re.Match object; span=(551, 566), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='32M'>, recommendation='32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.578589916229248
Adding hint TuningHint(doc_id=11, param=<re.Match object; span=(1172, 1189), match='thread_cache_size'>, value=<re.Match object; span=(18, 21), match='32M'>, recommendation='key_buffer_size = 32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.127128005027771
Creating hints for document 12
Creating hints for document 13
Creating hints for document 14
Creating hints for document 15
Excluding recommendation "64-bit OS and MariaDB¶" for parameter "key_buffer_size" due to low confidence (0.001210172544233501)
Adding hint TuningHint(doc_id=15, param=<re.Match object; span=(2034, 2050), match='table_open_cache'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage="There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.\nContinuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:\nAdjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).\nAdjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).\nAdjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size ", float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.24789950251579285
Excluding recommendation "512" for parameter "tmp_memory_table_size" due to low confidence (0.00039924896555021405)
Excluding recommendation "64MB" for parameter "tmp_table_size" due to low confidence (0.009867928922176361)
Excluding recommendation "64M" for parameter "query_cache_size" due to low confidence (0.00786546804010868)
Adding hint TuningHint(doc_id=15, param=<re.Match object; span=(568, 585), match='thread_cache_size'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16 or so', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.08769349753856659
Adding hint TuningHint(doc_id=15, param=<re.Match object; span=(497, 521), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.05271206051111221
Excluding recommendation "16MB" for parameter "innodb_change_buffer_max_size" due to low confidence (0.00029742735205218196)
Adding hint TuningHint(doc_id=15, param=<re.Match object; span=(16, 35), match='max_heap_table_size'>, value=<re.Match object; span=(0, 4), match='64MB'>, recommendation='64MB', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=64.0, val_unit='MB', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.2846395671367645
Adding hint TuningHint(doc_id=15, param=<re.Match object; span=(246, 276), match='innodb_flush_log_at_trx_commit'>, value=<re.Match object; span=(0, 1), match='0'>, recommendation='0', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=0.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.10296217352151871
Adding hint TuningHint(doc_id=15, param=<re.Match object; span=(975, 994), match='log_slow_query_time'>, value=<re.Match object; span=(0, 1), match='1'>, recommendation='1', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=1.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.5197045207023621
Creating hints for document 16
Creating hints for document 17
Creating hints for document 18
Creating hints for document 19
Creating hints for document 20
Excluding recommendation "sort_buffer_size" for parameter "read_buffer_size" due to low confidence (0.0010838661110028625)
Excluding recommendation "sort_buffer_size" for parameter "join_buffer_size" due to low confidence (0.01701359823346138)
Excluding recommendation "when the server reads rows in a sorted order following a sort operation" for parameter "read_rnd_buffer_size" due to low confidence (0.0007504512905143201)
Excluding recommendation "InnoDB settings" for parameter "innodb_buffer_pool_size" due to low confidence (0.0021922937594354153)
Excluding recommendation "size of the buffer used for sorting" for parameter "sort_buffer_size" due to low confidence (0.027788078412413597)
Excluding recommendation "thread_cache_size" for parameter "key_buffer_size" due to low confidence (0.00946387741714716)
Excluding recommendation "thread_cache_size" for parameter "query_cache_size" due to low confidence (3.0126924684736878e-05)
Excluding recommendation "number of threads" for parameter "thread_cache_size" due to low confidence (0.004752524197101593)
Excluding recommendation "log retention" for parameter "expire_logs_days" due to low confidence (0.001300456584431231)
Excluding recommendation "DNS server speed" for parameter "innodb_log_file_size" due to low confidence (2.1557807485805824e-06)
Creating hints for document 21
Creating hints for document 22
Creating hints for document 23
Creating hints for document 24
Creating hints for document 25
Excluding recommendation "{DBInstanceClassMemory*(3/4)*(1/4" for parameter "innodb_log_file_size" due to low confidence (0.006781978998333216)
Creating hints for document 26
Creating hints for document 27
Creating hints for document 28
Creating hints for document 29
Excluding recommendation "innodb_buffer_pool_size" for parameter "max_connections" due to low confidence (0.003260090248659253)
Excluding recommendation "innodb_buffer_pool_size, and max_connections" for parameter "sync_relay_log_info" due to low confidence (0.008057521656155586)
Creating hints for document 30
Creating hints for document 31
Adding hint TuningHint(doc_id=31, param=<re.Match object; span=(757, 775), match='max_relay_log_size'>, value=<re.Match object; span=(0, 4), match='100M'>, recommendation='100M', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=100.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.07827524095773697
Adding hint TuningHint(doc_id=31, param=<re.Match object; span=(205, 220), match='max_binlog_size'>, value=<re.Match object; span=(0, 4), match='100M'>, recommendation='100M', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=100.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.5002124309539795
Adding hint TuningHint(doc_id=31, param=<re.Match object; span=(183, 199), match='expire_logs_days'>, value=<re.Match object; span=(0, 2), match='10'>, recommendation='10', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=10.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.446961909532547
Creating hints for document 32
Creating hints for document 33
Creating hints for document 34
Creating hints for document 35
Creating hints for document 36
Creating hints for document 37
Creating hints for document 38
Creating hints for document 39
Creating hints for document 40
Excluding recommendation "innodb_write_io_threads and
" for parameter "innodb_read_io_threads" due to low confidence (4.741660814033821e-05)
Excluding recommendation "innodb_undo_tablespaces" for parameter "innodb_log_file_size" due to low confidence (0.001146291266195476)
Excluding recommendation "innodb_buffer_pool_chunk_size" for parameter "table_open_cache_instances" due to low confidence (0.0005210028029978275)
Excluding recommendation "innodb_log_file_size
●" for parameter "innodb_undo_tablespaces" due to low confidence (0.0009373219800181687)
Excluding recommendation "
innodb_read_io_threads" for parameter "innodb_write_io_threads" due to low confidence (9.097830479731783e-05)
Excluding recommendation "
dynamically table_open_cache_instances" for parameter "innodb_buffer_pool_chunk_size" due to low confidence (0.00015504633483942598)
Creating hints for document 41
Excluding recommendation "query_cache_limit to be larger than Options Autoload Size" for parameter "max_relay_log_size" due to low confidence (0.002580805914476514)
Creating hints for document 42
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(388, 403), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='64M'>, recommendation='64M', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=64.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.24454762041568756
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(436, 451), match='max_connections'>, value=<re.Match object; span=(0, 4), match='1250'>, recommendation='1250', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=1250.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.33707401156425476
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(459, 476), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.21884512901306152
Excluding recommendation "64M" for parameter "max_allowed_packet" due to low confidence (0.01643957942724228)
Excluding recommendation "
innodb-log-file-size = 128M" for parameter "wsrep_mysql_replication_bundle" due to low confidence (0.0003452197997830808)
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(273, 291), match='innodb_io_capacity'>, value=<re.Match object; span=(0, 4), match='4000'>, recommendation='4000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=4000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.41497689485549927
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(362, 374), match='wait_timeout'>, value=<re.Match object; span=(0, 5), match='30000'>, recommendation='30000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=30000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.6936937570571899
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(216, 238), match='innodb_read_io_threads'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.056578051298856735
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(340, 355), match='connect_timeout'>, value=<re.Match object; span=(0, 3), match='300'>, recommendation='300', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=300.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.5907857418060303
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(299, 321), match='innodb_io_capacity_max'>, value=<re.Match object; span=(0, 4), match='6000'>, recommendation='6000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=6000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.23729869723320007
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(403, 419), match='table_open_cache'>, value=<re.Match object; span=(0, 5), match='32012'>, recommendation='32012', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32012.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.3530392050743103
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(186, 209), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='23G'>, recommendation='23G', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=23.0, val_unit='G', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.08578332513570786
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(485, 503), match='max_connect_errors'>, value=<re.Match object; span=(0, 7), match='1000000'>, recommendation='1000000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=1000000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.6272909045219421
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(403, 429), match='table_open_cache_instances'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.18874166905879974
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(59, 81), match='innodb_old_blocks_time'>, value=<re.Match object; span=(0, 4), match='1000'>, recommendation='1000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=1000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.8211447596549988
Excluding recommendation "32" for parameter "innodb_write_io_threads" due to low confidence (0.01814434491097927)
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(460, 476), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65535'>, recommendation='65535', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=65535.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.38212937116622925
Adding hint TuningHint(doc_id=42, param=<re.Match object; span=(179, 194), match='max_connections'>, value=<re.Match object; span=(65, 68), match='150'>, recommendation='larger than the total number of all Zabbix server processes plus 150', passage='socket=/data/mysql/mysql.sock\nLater, we will go through every configuration parameter with our ChatGPT friend, but first, there are two things to remember!Configuration parameter\xa0max_connections\xa0must be larger than the total number of all Zabbix server processes plus 150. You can use the command below to automatically check the number of Zabbix processes and add 150 to that number:egrep "^Start.+=[0-9]" /etc/zabbix/zabbix_server.conf | awk -F "=" \'{s+=$2} END {print s+150}\' max_password_errors ', float_val=150.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.3228009343147278
Excluding recommendation "'{s+=$2} END {print s+150}'" for parameter "max_password_errors" due to low confidence (0.000502286828123033)
Creating hints for document 43
Creating hints for document 44
Creating hints for document 45
Creating hints for document 46
Creating hints for document 47
Creating hints for document 48
Creating hints for document 49
Creating hints for document 50
Creating hints for document 51
Creating hints for document 52
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(212, 228), match='read_buffer_size'>, value=<re.Match object; span=(0, 3), match='256'>, recommendation='256', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=256.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.1520182341337204
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(63, 78), match='key_buffer_size'>, value=<re.Match object; span=(0, 4), match='1200'>, recommendation='1200', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=1200.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.1103617399930954
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(108, 122), match='tmp_table_size'>, value=<re.Match object; span=(0, 3), match='128'>, recommendation='128', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=128.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.17810560762882233
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(262, 278), match='join_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.15373332798480988
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(235, 255), match='read_rnd_buffer_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.25549736618995667
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(351, 367), match='table_open_cache'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.09937648475170135
Excluding recommendation "4096" for parameter "innodb_buffer_pool_size" due to low confidence (0.03916162624955177)
Excluding recommendation "200" for parameter "max_connections" due to low confidence (0.04076274856925011)
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(188, 204), match='sort_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.09867341071367264
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(286, 298), match='thread_stack'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.45106759667396545
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(86, 102), match='query_cache_size'>, value=<re.Match object; span=(0, 2), match='50'>, recommendation='50', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=50.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.2695794999599457
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(305, 322), match='binlog_cache_size'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.179239884018898
Excluding recommendation "50" for parameter "thread_cache_size" due to low confidence (0.0022005222272127867)
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(160, 182), match='innodb_log_buffer_size'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.08826754242181778
Excluding recommendation "16" for parameter "key_buffer_size" due to low confidence (0.02699085883796215)
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(785, 801), match='query_cache_size'>, value=<re.Match object; span=(0, 1), match='0'>, recommendation='0', passage="or we should make it smaller? like.... 5000 or others?\ni confuse about this setting....\naaP_loonysnow\nDhanamerdeka\nConducted tests with VPS 1 CPU core and 1GB RAM.\nApache 2.4.56 + PHP 8.0 (OPcache + APCU + imagemagick) + MySQL 5.7.40.\nMariaDB for some reason stopped being installed even on better hardware, and MySQL 8 requires at least 6GB of RAM.\nA real WordPress-based website was taken as a basis (full of plugins, heavy theme, WP Super Cache, Autoptimize).\nResults:\nWithout caching, the server response averages 800-900ms.\nWith caching of about 100-150ms.\nThe whole problem is the number of cores. I advise you to install at least 2 CPU cores.\nGiven the limitations of iron, the result is very good. For personal projects or a blog, that's the thing.\nMySQL:\nkey_buffer_size = 16\nquery_cache_size = 0 wsrep_mysql_replication_bundle ", float_val=0.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.06662449985742569
Excluding recommendation "
query_cache_size = 0" for parameter "wsrep_mysql_replication_bundle" due to low confidence (0.0023216356057673693)
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(101, 117), match='read_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.3443717062473297
Excluding recommendation "
innodb_buffer_pool_size = 512" for parameter "tmp_table_size" due to low confidence (0.0013305023312568665)
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(153, 169), match='join_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.2933977246284485
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(125, 145), match='read_rnd_buffer_size'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.2966748774051666
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(241, 257), match='table_open_cache'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.06636326760053635
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(20, 43), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.058585651218891144
Excluding recommendation "20" for parameter "max_connections" due to low confidence (0.007428279146552086)
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(77, 93), match='sort_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.35743069648742676
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(177, 189), match='thread_stack'>, value=<re.Match object; span=(0, 3), match='192'>, recommendation='192', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.4940197765827179
Excluding recommendation "32" for parameter "binlog_cache_size" due to low confidence (0.003249913454055786)
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(219, 236), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.05449700355529785
Excluding recommendation "50" for parameter "binlog_stmt_cache_size" due to low confidence (0.0006161073106341064)
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(50, 72), match='innodb_log_buffer_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.2901383936405182
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(487, 503), match='read_buffer_size'>, value=<re.Match object; span=(0, 4), match='8192'>, recommendation='8192 minimum value', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=8192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.05625314265489578
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(464, 480), match='sort_buffer_size'>, value=<re.Match object; span=(0, 3), match='10M'>, recommendation='10M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=10.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.3192761540412903
Adding hint TuningHint(doc_id=52, param=<re.Match object; span=(224, 247), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 4), match='180M'>, recommendation='180M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=180.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.16589012742042542
Excluding recommendation "
innodb_buffer_pool_size = 180M" for parameter "max_binlog_stmt_cache_size" due to low confidence (2.7418657282396453e-06)
Creating hints for document 53
Creating hints for document 54
Excluding recommendation "wmf-config/db-eqiad.php" for parameter "wsrep_mysql_replication_bundle" due to low confidence (1.2138456440879963e-05)
Excluding recommendation "standard schema" for parameter "server_id" due to low confidence (0.0003343243442941457)
Creating hints for document 55
Creating hints for document 56
Creating hints for document 57
Creating hints for document 58
Creating hints for document 59
Creating hints for document 60
Creating hints for document 61
Creating hints for document 62
Creating hints for document 63
Adding hint TuningHint(doc_id=63, param=<re.Match object; span=(658, 678), match='max_user_connections'>, value=<re.Match object; span=(0, 3), match='500'>, recommendation='500\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=500.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.06677736341953278
Excluding recommendation "500" for parameter "max_connections" due to low confidence (0.04545459523797035)
Adding hint TuningHint(doc_id=63, param=<re.Match object; span=(464, 476), match='thread_stack'>, value=<re.Match object; span=(0, 4), match='128K'>, recommendation='128K', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=128.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.46517136693000793
Adding hint TuningHint(doc_id=63, param=<re.Match object; span=(485, 502), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.39301180839538574
Excluding recommendation "open_files_limit
= 65000" for parameter "max_password_errors" due to low confidence (0.003835478564724326)
Adding hint TuningHint(doc_id=63, param=<re.Match object; span=(439, 457), match='max_allowed_packet'>, value=<re.Match object; span=(0, 3), match='16M'>, recommendation='16M', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=16.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.09479514509439468
Adding hint TuningHint(doc_id=63, param=<re.Match object; span=(748, 764), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65000'>, recommendation='65000 max_password_errors', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=65000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.3895725607872009
Excluding recommendation "6
" for parameter "innodb_force_recovery" due to low confidence (0.04696384072303772)
Adding hint TuningHint(doc_id=63, param=<re.Match object; span=(56, 73), match='query_cache_limit'>, value=<re.Match object; span=(0, 3), match='50M'>, recommendation='50M', passage='#innodb_force_recovery =6\n# * Query Cache Configuration\nquery_cache_limit\n= 50M\nquery_cache_size\n= 300M\n# * Logging and Replication\n# * InnoDB\n# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\n# Read the manual for more InnoDB related options. There are many!\n# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.\n#skip-innodb\ninnodb_buffer_pool_size=16777216\ninnodb_file_per_table\nApache configuration\nAdd that to your configuration file.\n<IfModule mod_gzip.c>\nmod_gzip_on yes\nmod_gzip_dechunk yes\nmod_gzip_keep_workfiles No\nmod_gzip_can_negotiate yes\nmod_gzip_update_static No innodb_ft_result_cache_limit ', float_val=50.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.3850814998149872
Excluding recommendation "16777216" for parameter "innodb_buffer_pool_size" due to low confidence (0.0007716347463428974)
Excluding recommendation "
mod_gzip_update_static No" for parameter "innodb_ft_result_cache_limit" due to low confidence (2.546782707213424e-05)
Adding hint TuningHint(doc_id=63, param=<re.Match object; span=(80, 96), match='query_cache_size'>, value=<re.Match object; span=(0, 4), match='300M'>, recommendation='300M', passage='#innodb_force_recovery =6\n# * Query Cache Configuration\nquery_cache_limit\n= 50M\nquery_cache_size\n= 300M\n# * Logging and Replication\n# * InnoDB\n# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\n# Read the manual for more InnoDB related options. There are many!\n# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.\n#skip-innodb\ninnodb_buffer_pool_size=16777216\ninnodb_file_per_table\nApache configuration\nAdd that to your configuration file.\n<IfModule mod_gzip.c>\nmod_gzip_on yes\nmod_gzip_dechunk yes\nmod_gzip_keep_workfiles No\nmod_gzip_can_negotiate yes\nmod_gzip_update_static No innodb_ft_result_cache_limit ', float_val=300.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>) with confidence 0.35126423835754395
Creating hints for document 64
Creating hints for document 65
Creating hints for document 66
Creating hints for document 67
Creating hints for document 68
Creating hints for document 69
Creating hints for document 70
Excluding recommendation "max_heap_table_size" for parameter "tmp_table_size" due to low confidence (0.007560277823358774)
Excluding recommendation "max_connections parameter" for parameter "tmp_disk_table_size" due to low confidence (0.0019977702759206295)
Excluding recommendation "past upper number" for parameter "max_connections" due to low confidence (0.0005200998275540769)
Excluding recommendation "maximum number of tables that can be kept open in the cache" for parameter "thread_stack" due to low confidence (9.908570063998923e-06)
Excluding recommendation "tmp_table_size" for parameter "max_heap_table_size" due to low confidence (0.0009895964758470654)
Creating hints for document 71
Creating hints for document 72
Creating hints for document 73
Creating hints for document 74
Creating hints for document 75
Creating hints for document 76
Creating hints for document 77
Creating hints for document 78
Creating hints for document 79
[Restart] MariaDB server shut down!
[Restart] MariaDB server restarted!
/scratch/s8todick/dbbert-slurm/venv/lib/python3.9/site-packages/mariadb/connections.py:85: RuntimeWarning: MariaDB Connector/Python was build with MariaDB Connector/C version 3.3.4 but loaded Connector/C library has version 10.5.21
  super().__init__(*args, **kwargs)
Creating hints for document 80
Creating hints for document 81
Creating hints for document 82
Creating hints for document 83
Creating hints for document 84
Creating hints for document 85
Creating hints for document 86
Creating hints for document 87
Creating hints for document 88
Creating hints for document 89
Creating hints for document 90
Creating hints for document 91
Creating hints for document 92
Creating hints for document 93
Creating hints for document 94
Creating hints for document 95
Creating hints for document 96
Creating hints for document 97
Creating hints for document 98
Initializing documents from file demo_docs/mariadb100 ...
Sample of tuning hints:
      filenr                                           sentence
8435      88  disable mitigations. To do so, add mitigations...
Nr. documents read: 99
Nr. passages by doc: [0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 3, 0, 0, 0, 0, 3, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Nr. mentions per assignment: [(('thread_cache_size', '8'), 3), (('innodb_buffer_pool_size', '80%'), 1), (('innodb_buffer_pool_size', '70'), 1), (('join_cache_level', '3'), 1), (('query_cache_min_res_unit', '2K'), 1), (('thread_cache_size', '32M'), 1), (('key_buffer_size', '32M'), 1), (('innodb_flush_log_at_trx_commit', '0'), 1), (('log_slow_query_time', '1'), 1), (('max_heap_table_size', '64MB'), 1), (('thread_cache_size', '16'), 1), (('query_cache_min_res_unit', '4096'), 1), (('table_open_cache', '512'), 1), (('max_binlog_size', '100M'), 1), (('max_relay_log_size', '100M'), 1), (('expire_logs_days', '10'), 1), (('innodb_read_io_threads', '32'), 1), (('open_files_limit', '65535'), 1), (('innodb_io_capacity_max', '6000'), 1), (('table_open_cache_instances', '16'), 1), (('connect_timeout', '300'), 1), (('wait_timeout', '30000'), 1), (('max_connect_errors', '1000000'), 1), (('innodb_io_capacity', '4000'), 1), (('innodb_old_blocks_time', '1000'), 1), (('innodb_buffer_pool_size', '23G'), 1), (('max_connections', '150'), 1), (('max_connections', '1250'), 1), (('key_buffer_size', '64M'), 1), (('table_open_cache', '32012'), 1), (('query_cache_size', '50'), 1), (('tmp_table_size', '128'), 1), (('sort_buffer_size', '2048'), 1), (('sort_buffer_size', '10M'), 1), (('read_rnd_buffer_size', '4096'), 1), (('read_buffer_size', '1024'), 1), (('thread_stack', '512'), 1), (('join_buffer_size', '1024'), 1), (('innodb_buffer_pool_size', '180M'), 1), (('table_open_cache', '64'), 1), (('read_buffer_size', '256'), 1), (('join_buffer_size', '2048'), 1), (('query_cache_size', '0'), 1), (('innodb_log_buffer_size', '32'), 1), (('thread_stack', '192'), 1), (('key_buffer_size', '1200'), 1), (('read_buffer_size', '8192'), 1), (('read_rnd_buffer_size', '512'), 1), (('innodb_log_buffer_size', '8'), 1), (('innodb_buffer_pool_size', '512'), 1), (('binlog_cache_size', '64'), 1), (('table_open_cache', '2048'), 1), (('sort_buffer_size', '1024'), 1), (('query_cache_limit', '50M'), 1), (('query_cache_size', '300M'), 1), (('thread_stack', '128K'), 1), (('max_allowed_packet', '16M'), 1), (('open_files_limit', '65000'), 1), (('max_user_connections', '500'), 1)]
Nr. documents per parameter: [('thread_cache_size', 5), ('innodb_buffer_pool_size', 3), ('key_buffer_size', 3), ('table_open_cache', 3), ('query_cache_min_res_unit', 2), ('open_files_limit', 2), ('thread_stack', 2), ('query_cache_size', 2), ('join_cache_level', 1), ('innodb_flush_log_at_trx_commit', 1), ('max_heap_table_size', 1), ('log_slow_query_time', 1), ('max_binlog_size', 1), ('max_relay_log_size', 1), ('expire_logs_days', 1), ('innodb_io_capacity', 1), ('wait_timeout', 1), ('innodb_read_io_threads', 1), ('connect_timeout', 1), ('innodb_io_capacity_max', 1), ('max_connections', 1), ('max_connect_errors', 1), ('table_open_cache_instances', 1), ('innodb_old_blocks_time', 1), ('read_buffer_size', 1), ('tmp_table_size', 1), ('join_buffer_size', 1), ('read_rnd_buffer_size', 1), ('sort_buffer_size', 1), ('binlog_cache_size', 1), ('innodb_log_buffer_size', 1), ('max_user_connections', 1), ('query_cache_limit', 1), ('max_allowed_packet', 1)]
Disconnecting ...
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Trying update update mariadb.server_cost set cost_value = NULL
Exception during update: Table 'mariadb.server_cost' doesn't exist
Trying update update mariadb.engine_cost set cost_value = NULL
Exception during update: Table 'mariadb.engine_cost' doesn't exist
--- Tuning Updates ---
Minimal time (ms): inf
Achieved with configuration: {}
Maximal time (ms): 0
Achieved with configuration: {}
All hints considered for multi-doc tuning:
Hint 0: thread_cache_size -> 32M
Hint 1: thread_cache_size -> 16
Hint 2: thread_cache_size -> 8
Hint 3: thread_cache_size -> 8
Hint 4: thread_cache_size -> 8
Hint 5: innodb_buffer_pool_size -> 70
Hint 6: innodb_buffer_pool_size -> 80%
Hint 7: innodb_buffer_pool_size -> 23G
Hint 8: innodb_buffer_pool_size -> 512
Hint 9: innodb_buffer_pool_size -> 180M
Hint 10: key_buffer_size -> 32M
Hint 11: key_buffer_size -> 64M
Hint 12: key_buffer_size -> 1200
Hint 13: table_open_cache -> 512
Hint 14: table_open_cache -> 32012
Hint 15: table_open_cache -> 2048
Hint 16: table_open_cache -> 64
Hint 17: query_cache_min_res_unit -> 2K
Hint 18: query_cache_min_res_unit -> 4096
Hint 19: open_files_limit -> 65535
Hint 20: open_files_limit -> 65000
Hint 21: thread_stack -> 512
Hint 22: thread_stack -> 192
Hint 23: thread_stack -> 128K
Hint 24: query_cache_size -> 50
Hint 25: query_cache_size -> 0
Hint 26: query_cache_size -> 300M
Hint 27: join_cache_level -> 3
Hint 28: innodb_flush_log_at_trx_commit -> 0
Hint 29: max_heap_table_size -> 64MB
Hint 30: log_slow_query_time -> 1
Hint 31: max_binlog_size -> 100M
Hint 32: max_relay_log_size -> 100M
Hint 33: expire_logs_days -> 10
Hint 34: innodb_io_capacity -> 4000
Hint 35: wait_timeout -> 30000
Hint 36: innodb_read_io_threads -> 32
Hint 37: connect_timeout -> 300
Hint 38: innodb_io_capacity_max -> 6000
Hint 39: max_connections -> 1250
Hint 40: max_connections -> 150
Hint 41: max_connect_errors -> 1000000
Hint 42: table_open_cache_instances -> 16
Hint 43: innodb_old_blocks_time -> 1000
Hint 44: read_buffer_size -> 256
Hint 45: read_buffer_size -> 1024
Hint 46: read_buffer_size -> 8192
Hint 47: tmp_table_size -> 128
Hint 48: join_buffer_size -> 2048
Hint 49: join_buffer_size -> 1024
Hint 50: read_rnd_buffer_size -> 512
Hint 51: read_rnd_buffer_size -> 4096
Hint 52: sort_buffer_size -> 2048
Hint 53: sort_buffer_size -> 1024
Hint 54: sort_buffer_size -> 10M
Hint 55: binlog_cache_size -> 64
Hint 56: innodb_log_buffer_size -> 32
Hint 57: innodb_log_buffer_size -> 8
Hint 58: max_user_connections -> 500
Hint 59: query_cache_limit -> 50M
Hint 60: max_allowed_packet -> 16M
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
No warmup - hint counter: 0
{'sequence': 'key_buffer_size = 32M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Increase recommendation', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.32319846749305725, 0.22931212186813354, 0.2051987200975418, 0.13674546778202057, 0.10554523020982742]}
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(1172, 1189), match='thread_cache_size'>, value=<re.Match object; span=(18, 21), match='32M'>, recommendation='key_buffer_size = 32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.13674546778202057, 0.10554523020982742, 0.32319846749305725, 0.2051987200975418, 0.22931212186813354]
Using cpu device
Wrapping the env with a `Monitor` wrapper
Wrapping the env in a DummyVecEnv.
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(1172, 1189), match='thread_cache_size'>, value=<re.Match object; span=(18, 21), match='32M'>, recommendation='key_buffer_size = 32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.13674546778202057, 0.10554523020982742, 0.32319846749305725, 0.2051987200975418, 0.22931212186813354]
Choice: 1
Done flag: False
No warmup - hint counter: 0
{'sequence': 'key_buffer_size = 32M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.5137114524841309, 0.20350034534931183, 0.15223704278469086, 0.11483711004257202, 0.015714144334197044]}
Decision: Deciding weight of TuningHint(doc_id=11, param=<re.Match object; span=(1172, 1189), match='thread_cache_size'>, value=<re.Match object; span=(18, 21), match='32M'>, recommendation='key_buffer_size = 32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.015714144334197044, 0.5137114524841309, 0.20350034534931183, 0.15223704278469086, 0.11483711004257202]
Choice: 3
Trying update set global thread_cache_size=16777216
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 16M
Adding assignment ('thread_cache_size', '16M') with weight 8
Assignment ('thread_cache_size', '16M') extracted from "mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema='yourmoodledbname';
Set the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:
thread cache utilization (%) = (threads_created / connections) * 100
The key buffer can improve the access speed to Moodle's SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:
key_read / key_read_requests < 0.01
key_write / key_write_requests <= 1.0
Set the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size "
Hint counter: 1
Episode hint counter before: 0
Episode hint counter: 1
Hints per episode: 20
Done flag: False
No warmup - hint counter: 1
{'sequence': '16 or so', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation'], 'scores': [0.28911828994750977, 0.18617865443229675, 0.1852453649044037, 0.18521332740783691, 0.15424436330795288]}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(568, 585), match='thread_cache_size'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16 or so', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18521332740783691, 0.1852453649044037, 0.28911828994750977, 0.15424436330795288, 0.18617865443229675]
Choice: 0
Done flag: False
No warmup - hint counter: 1
{'sequence': '16 or so', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.50733482837677, 0.1963784247636795, 0.14746752381324768, 0.12025613337755203, 0.028563059866428375]}
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(568, 585), match='thread_cache_size'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16 or so', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.028563059866428375, 0.50733482837677, 0.1963784247636795, 0.14746752381324768, 0.12025613337755203]
Choice: 0
Trying update set global thread_cache_size=4
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 4
Adding assignment ('thread_cache_size', '4') with weight 1
Assignment ('thread_cache_size', '4') extracted from "Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).
Adjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.
Adjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.
Other Adjustments from the Inter-webs:
I adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size "
Hint counter: 2
Episode hint counter before: 1
Episode hint counter: 2
Hints per episode: 20
Done flag: False
No warmup - hint counter: 2
{'sequence': '8', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.266186386346817, 0.2173980474472046, 0.1844906359910965, 0.17978301644325256, 0.15214183926582336]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(459, 476), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1844906359910965, 0.15214183926582336, 0.266186386346817, 0.17978301644325256, 0.2173980474472046]
Choice: 4
Done flag: False
No warmup - hint counter: 2
{'sequence': '8', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758, 0.026791756972670555]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(459, 476), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026791756972670555, 0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(459, 476), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1844906359910965, 0.15214183926582336, 0.266186386346817, 0.17978301644325256, 0.2173980474472046]
Choice: 2
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(459, 476), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026791756972670555, 0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758]
Choice: 1
Trying update set global thread_cache_size=8
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 8
Adding assignment ('thread_cache_size', '8') with weight 2
Assignment ('thread_cache_size', '8') extracted from "# MySQL Server Configuration
# Directories and File Paths
datadir=/data/mysql
socket=/data/mysql/mysql.sock
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
# Logging and Replication
skip-log-bin=true
# Performance and Optimization
skip_name_resolve
skip-performance-schema
optimizer_switch = 'index_condition_pushdown=off'
tmp-table-size = 96M
max-heap-table-size = 96M
key_buffer_size = 64M
# Connections and Threads
max_connections = 1250
thread_cache_size = 8
max_allowed_packet = 64M
# InnoDB Configuration
innodb-log-file-size = 128M
innodb-log-buffer-size = 128M wsrep_mysql_replication_bundle "
Hint counter: 3
Episode hint counter before: 2
Episode hint counter: 3
Hints per episode: 20
Done flag: False
No warmup - hint counter: 3
{'sequence': '8', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.266186386346817, 0.2173980474472046, 0.1844906359910965, 0.17978301644325256, 0.15214183926582336]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(219, 236), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1844906359910965, 0.15214183926582336, 0.266186386346817, 0.17978301644325256, 0.2173980474472046]
Choice: 4
Done flag: False
No warmup - hint counter: 3
{'sequence': '8', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758, 0.026791756972670555]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(219, 236), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026791756972670555, 0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758]
Choice: 1
Trying update set global thread_cache_size=32
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 32
Adding assignment ('thread_cache_size', '32') with weight 2
Assignment ('thread_cache_size', '32') extracted from "tmp_table_size = 32
innodb_buffer_pool_size = 512
innodb_log_buffer_size = 8
sort_buffer_size = 1024
read_buffer_size = 1024
read_rnd_buffer_size = 4096
join_buffer_size = 1024
thread_stack = 192
binlog_cache_size = 32
thread_cache_size = 8
table_open_cache = 64
max_connections = 20
PHP:
max_children = 10
start_servers = 2
min_spare_servers = 1
max_spare_servers = 3
Apache:
Timeout = 30
KeepAlive = On
KeepAliveTimeout = 5
MaxKeepAliveRequests = 100
StartServers = 2
MaxSpareThreads = 25
MinSpareThreads = 10
ThreadsPerChild = 25
MaxRequestWorkers = 50 binlog_stmt_cache_size "
Hint counter: 4
Episode hint counter before: 3
Episode hint counter: 4
Hints per episode: 20
Done flag: False
No warmup - hint counter: 4
{'sequence': '8\n', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation', 'Increase recommendation strongly'], 'scores': [0.28335413336753845, 0.22041219472885132, 0.18013985455036163, 0.17767491936683655, 0.13841883838176727]}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(485, 502), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18013985455036163, 0.22041219472885132, 0.28335413336753845, 0.17767491936683655, 0.13841883838176727]
Choice: 2
Done flag: False
No warmup - hint counter: 4
{'sequence': '8\n', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.46155181527137756, 0.19460640847682953, 0.1654755026102066, 0.15352493524551392, 0.02484126389026642]}
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(485, 502), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02484126389026642, 0.46155181527137756, 0.19460640847682953, 0.1654755026102066, 0.15352493524551392]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(485, 502), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18013985455036163, 0.22041219472885132, 0.28335413336753845, 0.17767491936683655, 0.13841883838176727]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(485, 502), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02484126389026642, 0.46155181527137756, 0.19460640847682953, 0.1654755026102066, 0.15352493524551392]
Choice: 0
Trying update set global thread_cache_size=2
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 2
Adding assignment ('thread_cache_size', '2') with weight 1
Assignment ('thread_cache_size', '2') extracted from "# It has been reported that passwords should be enclosed with ticks/quotes
# escpecially if they contain "#" chars...
# Remember to edit /etc/mysql/debian.cnf when changing the socket location.
# Here is entries for some specific programs
# The following values assume you have at least 32M ram
# This was formally known as [safe_mysqld]. Both versions are currently parsed.
[mysqld]
# * Basic Settings
# * Fine Tuning
key_buffer		= 2000M
max_allowed_packet	= 16M
thread_stack		= 128K
thread_cache_size	= 8
# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam-recover		= BACKUP
max_connections
= 500
max_user_connections
= 500
#table_cache
= 64
thread_concurrency
= 300
table_cache
= 30000
open_files_limit
= 65000 max_password_errors "
Hint counter: 5
Episode hint counter before: 4
Episode hint counter: 5
Hints per episode: 20
Done flag: False
No warmup - hint counter: 5
{'sequence': 'at least 70-80% of the available memory', 'labels': ['Use recommendation', 'Increase recommendation', 'Increase recommendation strongly', 'Decrease recommendation', 'Decrease recommendation strongly'], 'scores': [0.3303515911102295, 0.27067556977272034, 0.21266934275627136, 0.09777051955461502, 0.08853290230035782]}
Decision: Deciding adaption of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(9, 11), match='70'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=70.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.08853290230035782, 0.09777051955461502, 0.3303515911102295, 0.27067556977272034, 0.21266934275627136]
Choice: 4
Done flag: False
No warmup - hint counter: 5
{'sequence': 'at least 70-80% of the available memory', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.511786937713623, 0.18739773333072662, 0.157210573554039, 0.1253214031457901, 0.018283352255821228]}
Decision: Deciding weight of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(9, 11), match='70'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=70.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.018283352255821228, 0.511786937713623, 0.18739773333072662, 0.157210573554039, 0.1253214031457901]
Choice: 1
Trying update set global innodb_buffer_pool_size=280
Exception during update: Variable 'innodb_buffer_pool_size' can't be set to the value of '280'
Trying update set global innodb_buffer_pool_size=134217728
Trying assigning innodb_buffer_pool_size to 280
Assignment ('innodb_buffer_pool_size', '280') was rejected
Hint counter: 6
Episode hint counter before: 5
Episode hint counter: 6
Hints per episode: 20
Done flag: False
No warmup - hint counter: 6
{'sequence': 'at least 70-80% of the available memory', 'labels': ['Use recommendation', 'Increase recommendation', 'Increase recommendation strongly', 'Decrease recommendation', 'Decrease recommendation strongly'], 'scores': [0.3303515911102295, 0.27067556977272034, 0.21266934275627136, 0.09777051955461502, 0.08853290230035782]}
Decision: Deciding adaption of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(12, 15), match='80%'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=0.8, val_unit='', hint_type=<HintType.RAM_RATIO: 1>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.08853290230035782, 0.09777051955461502, 0.3303515911102295, 0.27067556977272034, 0.21266934275627136]
Choice: 4
Done flag: False
No warmup - hint counter: 6
{'sequence': 'at least 70-80% of the available memory', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.511786937713623, 0.18739773333072662, 0.157210573554039, 0.1253214031457901, 0.018283352255821228]}
Decision: Deciding weight of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(12, 15), match='80%'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=0.8, val_unit='', hint_type=<HintType.RAM_RATIO: 1>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.018283352255821228, 0.511786937713623, 0.18739773333072662, 0.157210573554039, 0.1253214031457901]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(12, 15), match='80%'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=0.8, val_unit='', hint_type=<HintType.RAM_RATIO: 1>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.08853290230035782, 0.09777051955461502, 0.3303515911102295, 0.27067556977272034, 0.21266934275627136]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(12, 15), match='80%'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=0.8, val_unit='', hint_type=<HintType.RAM_RATIO: 1>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.018283352255821228, 0.511786937713623, 0.18739773333072662, 0.157210573554039, 0.1253214031457901]
Choice: 3
Trying update set global innodb_buffer_pool_size=17179869184
Trying update set global innodb_buffer_pool_size=134217728
Exception during update: Another buffer pool resize is already in progress.
Trying assigning innodb_buffer_pool_size to 17179869184
Adding assignment ('innodb_buffer_pool_size', '17179869184') with weight 8
Assignment ('innodb_buffer_pool_size', '17179869184') extracted from "Update MariaDB to the latest version
MariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.
Server-specific Performance Tips
Configuring InnoDB Variables
InnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:
innodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.
innodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.
Tweak Query Cache Variables
MariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth "
Hint counter: 7
Episode hint counter before: 6
Episode hint counter: 7
Hints per episode: 20
Done flag: False
No warmup - hint counter: 7
{'sequence': '23G', 'labels': ['Use recommendation', 'Increase recommendation', 'Decrease recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly'], 'scores': [0.23072713613510132, 0.20386049151420593, 0.19943229854106903, 0.18499886989593506, 0.18098114430904388]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(186, 209), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='23G'>, recommendation='23G', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=23.0, val_unit='G', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18098114430904388, 0.19943229854106903, 0.23072713613510132, 0.20386049151420593, 0.18499886989593506]
Choice: 3
Done flag: False
No warmup - hint counter: 7
{'sequence': '23G', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4707958996295929, 0.1976868361234665, 0.166013702750206, 0.1462538093328476, 0.01924968883395195]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(186, 209), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='23G'>, recommendation='23G', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=23.0, val_unit='G', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01924968883395195, 0.4707958996295929, 0.1976868361234665, 0.166013702750206, 0.1462538093328476]
Choice: 1
Trying update set global innodb_buffer_pool_size=49392123904
Trying update set global innodb_buffer_pool_size=17179869184
Exception during update: Another buffer pool resize is already in progress.
Trying assigning innodb_buffer_pool_size to 46G
Adding assignment ('innodb_buffer_pool_size', '46G') with weight 2
Assignment ('innodb_buffer_pool_size', '46G') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 8
Episode hint counter before: 7
Episode hint counter: 8
Hints per episode: 20
Done flag: False
No warmup - hint counter: 8
{'sequence': '512', 'labels': ['Use recommendation', 'Increase recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Decrease recommendation'], 'scores': [0.2637619078159332, 0.19082817435264587, 0.18853892385959625, 0.18315310776233673, 0.17371782660484314]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(20, 43), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 2
Done flag: False
No warmup - hint counter: 8
{'sequence': '512', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316, 0.022273913025856018]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(20, 43), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(20, 43), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(20, 43), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
Choice: 2
Trying update set global innodb_buffer_pool_size=256
Exception during update: Variable 'innodb_buffer_pool_size' can't be set to the value of '256'
Trying update set global innodb_buffer_pool_size=49392123904
Trying assigning innodb_buffer_pool_size to 256
Assignment ('innodb_buffer_pool_size', '256') was rejected
Hint counter: 9
Episode hint counter before: 8
Episode hint counter: 9
Hints per episode: 20
Done flag: False
No warmup - hint counter: 9
{'sequence': '180M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation'], 'scores': [0.2364121675491333, 0.20964983105659485, 0.20210203528404236, 0.19127501547336578, 0.1605609506368637]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(224, 247), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 4), match='180M'>, recommendation='180M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=180.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20210203528404236, 0.19127501547336578, 0.2364121675491333, 0.1605609506368637, 0.20964983105659485]
Choice: 3
Done flag: False
No warmup - hint counter: 9
{'sequence': '180M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.43662428855895996, 0.20483645796775818, 0.17478047311306, 0.1636047512292862, 0.020154068246483803]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(224, 247), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 4), match='180M'>, recommendation='180M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=180.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.020154068246483803, 0.43662428855895996, 0.20483645796775818, 0.17478047311306, 0.1636047512292862]
Choice: 0
Trying update set global innodb_buffer_pool_size=377487360
Trying update set global innodb_buffer_pool_size=49392123904
Exception during update: Another buffer pool resize is already in progress.
Trying assigning innodb_buffer_pool_size to 360M
Adding assignment ('innodb_buffer_pool_size', '360M') with weight 1
Assignment ('innodb_buffer_pool_size', '360M') extracted from "You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.
Mysql need's by default 512MB of RAM.
innodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless
Mysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.
sort_buffer_size = 10M
read_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)
The best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size "
Hint counter: 10
Episode hint counter before: 9
Episode hint counter: 10
Hints per episode: 20
Done flag: False
No warmup - hint counter: 10
{'sequence': '32M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation'], 'scores': [0.30023810267448425, 0.19544251263141632, 0.18291717767715454, 0.17137980461120605, 0.15002238750457764]}
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(551, 566), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='32M'>, recommendation='32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18291717767715454, 0.17137980461120605, 0.30023810267448425, 0.15002238750457764, 0.19544251263141632]
Choice: 0
Done flag: False
No warmup - hint counter: 10
{'sequence': '32M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4591565728187561, 0.2058204859495163, 0.16968268156051636, 0.14287708699703217, 0.02246321365237236]}
Decision: Deciding weight of TuningHint(doc_id=11, param=<re.Match object; span=(551, 566), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='32M'>, recommendation='32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02246321365237236, 0.4591565728187561, 0.2058204859495163, 0.16968268156051636, 0.14287708699703217]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(551, 566), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='32M'>, recommendation='32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18291717767715454, 0.17137980461120605, 0.30023810267448425, 0.15002238750457764, 0.19544251263141632]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=11, param=<re.Match object; span=(551, 566), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='32M'>, recommendation='32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02246321365237236, 0.4591565728187561, 0.2058204859495163, 0.16968268156051636, 0.14287708699703217]
Choice: 3
Trying update set global key_buffer_size=67108864
Trying update set global key_buffer_size=134217728
Trying assigning key_buffer_size to 64M
Adding assignment ('key_buffer_size', '64M') with weight 8
Assignment ('key_buffer_size', '64M') extracted from "mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema='yourmoodledbname';
Set the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:
thread cache utilization (%) = (threads_created / connections) * 100
The key buffer can improve the access speed to Moodle's SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:
key_read / key_read_requests < 0.01
key_write / key_write_requests <= 1.0
Set the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size "
Hint counter: 11
Episode hint counter before: 10
Episode hint counter: 11
Hints per episode: 20
Done flag: False
No warmup - hint counter: 11
{'sequence': '64M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation'], 'scores': [0.2871057093143463, 0.21063925325870514, 0.19450999796390533, 0.15914979577064514, 0.14859525859355927]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(388, 403), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='64M'>, recommendation='64M', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=64.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19450999796390533, 0.15914979577064514, 0.2871057093143463, 0.14859525859355927, 0.21063925325870514]
Choice: 1
Done flag: False
No warmup - hint counter: 11
{'sequence': '64M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.44100087881088257, 0.21198078989982605, 0.1755017787218094, 0.14777542650699615, 0.023741085082292557]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(388, 403), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='64M'>, recommendation='64M', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=64.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.023741085082292557, 0.44100087881088257, 0.21198078989982605, 0.1755017787218094, 0.14777542650699615]
Choice: 4
Trying update set global key_buffer_size=33554432
Trying update set global key_buffer_size=134217728
Trying assigning key_buffer_size to 32M
Adding assignment ('key_buffer_size', '32M') with weight 16
Assignment ('key_buffer_size', '32M') extracted from "# MySQL Server Configuration
# Directories and File Paths
datadir=/data/mysql
socket=/data/mysql/mysql.sock
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
# Logging and Replication
skip-log-bin=true
# Performance and Optimization
skip_name_resolve
skip-performance-schema
optimizer_switch = 'index_condition_pushdown=off'
tmp-table-size = 96M
max-heap-table-size = 96M
key_buffer_size = 64M
# Connections and Threads
max_connections = 1250
thread_cache_size = 8
max_allowed_packet = 64M
# InnoDB Configuration
innodb-log-file-size = 128M
innodb-log-buffer-size = 128M wsrep_mysql_replication_bundle "
Hint counter: 12
Episode hint counter before: 11
Episode hint counter: 12
Hints per episode: 20
Done flag: False
No warmup - hint counter: 12
{'sequence': '1200', 'labels': ['Use recommendation', 'Decrease recommendation', 'Increase recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly'], 'scores': [0.25001347064971924, 0.19854989647865295, 0.1852368712425232, 0.18510159850120544, 0.18109816312789917]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(63, 78), match='key_buffer_size'>, value=<re.Match object; span=(0, 4), match='1200'>, recommendation='1200', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=1200.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18510159850120544, 0.19854989647865295, 0.25001347064971924, 0.1852368712425232, 0.18109816312789917]
Choice: 3
Done flag: False
No warmup - hint counter: 12
{'sequence': '1200', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4516242742538452, 0.19539159536361694, 0.16862988471984863, 0.168478325009346, 0.01587599329650402]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(63, 78), match='key_buffer_size'>, value=<re.Match object; span=(0, 4), match='1200'>, recommendation='1200', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=1200.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01587599329650402, 0.4516242742538452, 0.19539159536361694, 0.16862988471984863, 0.168478325009346]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(63, 78), match='key_buffer_size'>, value=<re.Match object; span=(0, 4), match='1200'>, recommendation='1200', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=1200.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18510159850120544, 0.19854989647865295, 0.25001347064971924, 0.1852368712425232, 0.18109816312789917]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(63, 78), match='key_buffer_size'>, value=<re.Match object; span=(0, 4), match='1200'>, recommendation='1200', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=1200.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01587599329650402, 0.4516242742538452, 0.19539159536361694, 0.16862988471984863, 0.168478325009346]
Choice: 3
Trying update set global key_buffer_size=300
Exception during update: Cannot drop default keycache
Trying update set global key_buffer_size=134217728
Trying assigning key_buffer_size to 300
Assignment ('key_buffer_size', '300') was rejected
Hint counter: 13
Episode hint counter before: 12
Episode hint counter: 13
Hints per episode: 20
Done flag: False
No warmup - hint counter: 13
{'sequence': '512', 'labels': ['Use recommendation', 'Increase recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Decrease recommendation'], 'scores': [0.2637619078159332, 0.19082817435264587, 0.18853892385959625, 0.18315310776233673, 0.17371782660484314]}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(2034, 2050), match='table_open_cache'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage="There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.\nContinuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:\nAdjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).\nAdjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).\nAdjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size ", float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 2
Done flag: False
No warmup - hint counter: 13
{'sequence': '512', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316, 0.022273913025856018]}
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(2034, 2050), match='table_open_cache'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage="There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.\nContinuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:\nAdjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).\nAdjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).\nAdjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size ", float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
Choice: 4
Trying update set global table_open_cache=512
Trying update set global table_open_cache=2000
Trying assigning table_open_cache to 512
Adding assignment ('table_open_cache', '512') with weight 16
Assignment ('table_open_cache', '512') extracted from "There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.
Continuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:
Adjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).
Adjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).
Adjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size "
Hint counter: 14
Episode hint counter before: 13
Episode hint counter: 14
Hints per episode: 20
Done flag: False
No warmup - hint counter: 14
{'sequence': '32012', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.29070794582366943, 0.2113429605960846, 0.17296606302261353, 0.16750556230545044, 0.1574774533510208]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(403, 419), match='table_open_cache'>, value=<re.Match object; span=(0, 5), match='32012'>, recommendation='32012', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32012.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17296606302261353, 0.1574774533510208, 0.29070794582366943, 0.16750556230545044, 0.2113429605960846]
Choice: 1
Done flag: False
No warmup - hint counter: 14
{'sequence': '32012', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4338657259941101, 0.20712286233901978, 0.18083569407463074, 0.14799179136753082, 0.03018392063677311]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(403, 419), match='table_open_cache'>, value=<re.Match object; span=(0, 5), match='32012'>, recommendation='32012', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32012.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.03018392063677311, 0.4338657259941101, 0.20712286233901978, 0.18083569407463074, 0.14799179136753082]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(403, 419), match='table_open_cache'>, value=<re.Match object; span=(0, 5), match='32012'>, recommendation='32012', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32012.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17296606302261353, 0.1574774533510208, 0.29070794582366943, 0.16750556230545044, 0.2113429605960846]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(403, 419), match='table_open_cache'>, value=<re.Match object; span=(0, 5), match='32012'>, recommendation='32012', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32012.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.03018392063677311, 0.4338657259941101, 0.20712286233901978, 0.18083569407463074, 0.14799179136753082]
Choice: 0
Trying update set global table_open_cache=8003
Trying update set global table_open_cache=2000
Trying assigning table_open_cache to 8003
Adding assignment ('table_open_cache', '8003') with weight 1
Assignment ('table_open_cache', '8003') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 15
Episode hint counter before: 14
Episode hint counter: 15
Hints per episode: 20
Done flag: False
No warmup - hint counter: 15
{'sequence': '2048', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation', 'Increase recommendation strongly'], 'scores': [0.2764931619167328, 0.20450188219547272, 0.17999409139156342, 0.1695912778377533, 0.1694195717573166]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(351, 367), match='table_open_cache'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17999409139156342, 0.20450188219547272, 0.2764931619167328, 0.1695912778377533, 0.1694195717573166]
Choice: 1
Done flag: False
No warmup - hint counter: 15
{'sequence': '2048', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465, 0.025632193312048912]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(351, 367), match='table_open_cache'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025632193312048912, 0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465]
Choice: 4
Trying update set global table_open_cache=1024
Trying update set global table_open_cache=2000
Trying assigning table_open_cache to 1024
Adding assignment ('table_open_cache', '1024') with weight 16
Assignment ('table_open_cache', '1024') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 16
Episode hint counter before: 15
Episode hint counter: 16
Hints per episode: 20
Done flag: False
No warmup - hint counter: 16
{'sequence': '64', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation'], 'scores': [0.2561816871166229, 0.20899151265621185, 0.20224447548389435, 0.18172581493854523, 0.15085653960704803]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(241, 257), match='table_open_cache'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20224447548389435, 0.18172581493854523, 0.2561816871166229, 0.15085653960704803, 0.20899151265621185]
Choice: 3
Done flag: False
No warmup - hint counter: 16
{'sequence': '64', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.460867315530777, 0.20801353454589844, 0.16750642657279968, 0.13584065437316895, 0.027772024273872375]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(241, 257), match='table_open_cache'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.027772024273872375, 0.460867315530777, 0.20801353454589844, 0.16750642657279968, 0.13584065437316895]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(241, 257), match='table_open_cache'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20224447548389435, 0.18172581493854523, 0.2561816871166229, 0.15085653960704803, 0.20899151265621185]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(241, 257), match='table_open_cache'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.027772024273872375, 0.460867315530777, 0.20801353454589844, 0.16750642657279968, 0.13584065437316895]
Choice: 2
Trying update set global table_open_cache=128
Trying update set global table_open_cache=2000
Trying assigning table_open_cache to 128
Adding assignment ('table_open_cache', '128') with weight 4
Assignment ('table_open_cache', '128') extracted from "tmp_table_size = 32
innodb_buffer_pool_size = 512
innodb_log_buffer_size = 8
sort_buffer_size = 1024
read_buffer_size = 1024
read_rnd_buffer_size = 4096
join_buffer_size = 1024
thread_stack = 192
binlog_cache_size = 32
thread_cache_size = 8
table_open_cache = 64
max_connections = 20
PHP:
max_children = 10
start_servers = 2
min_spare_servers = 1
max_spare_servers = 3
Apache:
Timeout = 30
KeepAlive = On
KeepAliveTimeout = 5
MaxKeepAliveRequests = 100
StartServers = 2
MaxSpareThreads = 25
MinSpareThreads = 10
ThreadsPerChild = 25
MaxRequestWorkers = 50 binlog_stmt_cache_size "
Hint counter: 17
Episode hint counter before: 16
Episode hint counter: 17
Hints per episode: 20
Done flag: False
No warmup - hint counter: 17
{'sequence': '2K', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Increase recommendation', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.2752767503261566, 0.2105720192193985, 0.19001543521881104, 0.1822049915790558, 0.14193075895309448]}
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(343, 367), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 2), match='2K'>, recommendation='2K', passage='If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.\nEnable the query cache with\nquery_cache_type = 1.\nFor most Moodle installs, set the following:\nquery_cache_size = 36M\nquery_cache_min_res_unit = 2K.\nThe query cache will improve performance if you are doing few updates on the database.\nSet the table cache correctly. For Moodle 1.6 set\ntable_cache = 256 #(table_open_cache in MySQL > 5.1.2)\n(min), and for Moodle 1.7 set\ntable_cache = 512 #(table_open_cache in MySQL > 5.1.2)\n(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size ', float_val=2.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1822049915790558, 0.14193075895309448, 0.2752767503261566, 0.19001543521881104, 0.2105720192193985]
Choice: 2
Done flag: False
No warmup - hint counter: 17
{'sequence': '2K', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4523022472858429, 0.20967313647270203, 0.17037560045719147, 0.14514879882335663, 0.022500183433294296]}
Decision: Deciding weight of TuningHint(doc_id=11, param=<re.Match object; span=(343, 367), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 2), match='2K'>, recommendation='2K', passage='If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.\nEnable the query cache with\nquery_cache_type = 1.\nFor most Moodle installs, set the following:\nquery_cache_size = 36M\nquery_cache_min_res_unit = 2K.\nThe query cache will improve performance if you are doing few updates on the database.\nSet the table cache correctly. For Moodle 1.6 set\ntable_cache = 256 #(table_open_cache in MySQL > 5.1.2)\n(min), and for Moodle 1.7 set\ntable_cache = 512 #(table_open_cache in MySQL > 5.1.2)\n(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size ', float_val=2.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022500183433294296, 0.4523022472858429, 0.20967313647270203, 0.17037560045719147, 0.14514879882335663]
Choice: 4
Trying update set global query_cache_min_res_unit=2048
Trying update set global query_cache_min_res_unit=4096
Trying assigning query_cache_min_res_unit to 2K
Adding assignment ('query_cache_min_res_unit', '2K') with weight 16
Assignment ('query_cache_min_res_unit', '2K') extracted from "If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.
Enable the query cache with
query_cache_type = 1.
For most Moodle installs, set the following:
query_cache_size = 36M
query_cache_min_res_unit = 2K.
The query cache will improve performance if you are doing few updates on the database.
Set the table cache correctly. For Moodle 1.6 set
table_cache = 256 #(table_open_cache in MySQL > 5.1.2)
(min), and for Moodle 1.7 set
table_cache = 512 #(table_open_cache in MySQL > 5.1.2)
(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size "
Hint counter: 18
Episode hint counter before: 17
Episode hint counter: 18
Hints per episode: 20
Done flag: False
No warmup - hint counter: 18
{'sequence': '4096', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.27467942237854004, 0.20756587386131287, 0.1929043084383011, 0.16955099999904633, 0.1552993506193161]}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(497, 521), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1929043084383011, 0.20756587386131287, 0.27467942237854004, 0.1552993506193161, 0.16955099999904633]
Choice: 3
Done flag: False
No warmup - hint counter: 18
{'sequence': '4096', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4537006616592407, 0.2012118697166443, 0.17119792103767395, 0.14479291439056396, 0.029096694663167]}
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(497, 521), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.029096694663167, 0.4537006616592407, 0.2012118697166443, 0.17119792103767395, 0.14479291439056396]
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(497, 521), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1929043084383011, 0.20756587386131287, 0.27467942237854004, 0.1552993506193161, 0.16955099999904633]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(497, 521), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)[Restart] MariaDB server shut down!
[Restart] MariaDB server restarted!
/scratch/s8todick/dbbert-slurm/venv/lib/python3.9/site-packages/mariadb/connections.py:85: RuntimeWarning: MariaDB Connector/Python was build with MariaDB Connector/C version 3.3.4 but loaded Connector/C library has version 10.5.21
  super().__init__(*args, **kwargs)
[Restart] MariaDB server shut down!
[Restart] MariaDB server restarted!

Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.029096694663167, 0.4537006616592407, 0.2012118697166443, 0.17119792103767395, 0.14479291439056396]
Choice: 1
Trying update set global query_cache_min_res_unit=16384
Trying update set global query_cache_min_res_unit=4096
Trying assigning query_cache_min_res_unit to 16384
Adding assignment ('query_cache_min_res_unit', '16384') with weight 2
Assignment ('query_cache_min_res_unit', '16384') extracted from "Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).
Adjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.
Adjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.
Other Adjustments from the Inter-webs:
I adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size "
Hint counter: 19
Episode hint counter before: 18
Episode hint counter: 19
Hints per episode: 20
Done flag: False
No warmup - hint counter: 19
{'sequence': '65535', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.24921073019504547, 0.2215997278690338, 0.1854260116815567, 0.18248112499713898, 0.16128242015838623]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(460, 476), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65535'>, recommendation='65535', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=65535.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1854260116815567, 0.2215997278690338, 0.24921073019504547, 0.16128242015838623, 0.18248112499713898]
Choice: 0
Done flag: False
No warmup - hint counter: 19
{'sequence': '65535', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4570375382900238, 0.19957877695560455, 0.1675446480512619, 0.13887451589107513, 0.03696446865797043]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(460, 476), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65535'>, recommendation='65535', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=65535.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.03696446865797043, 0.4570375382900238, 0.19957877695560455, 0.1675446480512619, 0.13887451589107513]
Choice: 2
Trying update set global open_files_limit=16383
Exception during update: Variable 'open_files_limit' is a read only variable
Trying update set global open_files_limit=32135
Exception during update: Variable 'open_files_limit' is a read only variable
Trying assigning open_files_limit to 16383
Assignment ('open_files_limit', '16383') was rejected
Hint counter: 20
Episode hint counter before: 19
Episode hint counter: 20
Hints per episode: 20
Episode finished!
Done flag: True
Finalizing episode!
Weighted hints: defaultdict(<function NlpTuningEnv.__init__.<locals>.<lambda> at 0x7f4564157700>, {('thread_cache_size', '16M'): 8, ('thread_cache_size', '4'): 1, ('thread_cache_size', '8'): 2, ('thread_cache_size', '32'): 2, ('thread_cache_size', '2'): 1, ('innodb_buffer_pool_size', '17179869184'): 8, ('innodb_buffer_pool_size', '46G'): 2, ('innodb_buffer_pool_size', '360M'): 1, ('key_buffer_size', '64M'): 8, ('key_buffer_size', '32M'): 16, ('table_open_cache', '512'): 16, ('table_open_cache', '8003'): 1, ('table_open_cache', '1024'): 16, ('table_open_cache', '128'): 4, ('query_cache_min_res_unit', '2K'): 16, ('query_cache_min_res_unit', '16384'): 2})
Selected configurations: [{'thread_cache_size': '16M', 'innodb_buffer_pool_size': '17179869184', 'key_buffer_size': '32M', 'table_open_cache': '512', 'query_cache_min_res_unit': '2K'}, {'thread_cache_size': '8', 'innodb_buffer_pool_size': '46G', 'key_buffer_size': '64M', 'table_open_cache': '1024', 'query_cache_min_res_unit': '16384'}]
Disconnecting ...
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Trying update update mariadb.server_cost set cost_value = NULL
Exception during update: Table 'mariadb.server_cost' doesn't exist
Trying update update mariadb.engine_cost set cost_value = NULL
Exception during update: Table 'mariadb.engine_cost' doesn't exist
Trying configuration: {'thread_cache_size': '16M', 'innodb_buffer_pool_size': '17179869184', 'key_buffer_size': '32M', 'table_open_cache': '512', 'query_cache_min_res_unit': '2K'}
Trying update set global thread_cache_size=16777216
Trying update set global innodb_buffer_pool_size=17179869184
Trying update set global key_buffer_size=33554432
Trying update set global table_open_cache=512
Trying update set global query_cache_min_res_unit=2048
--- Tuning Updates ---
Minimal time (ms): 57451.920654296875
Achieved with configuration: {}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Reward 43568.369873046875 with {'thread_cache_size': '16M', 'innodb_buffer_pool_size': '17179869184', 'key_buffer_size': '32M', 'table_open_cache': '512', 'query_cache_min_res_unit': '2K'}
Disconnecting ...
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Trying update update mariadb.server_cost set cost_value = NULL
Exception during update: Table 'mariadb.server_cost' doesn't exist
Trying update update mariadb.engine_cost set cost_value = NULL
Exception during update: Table 'mariadb.engine_cost' doesn't exist
Trying configuration: {'thread_cache_size': '8', 'innodb_buffer_pool_size': '46G', 'key_buffer_size': '64M', 'table_open_cache': '1024', 'query_cache_min_res_unit': '16384'}
Trying update set global thread_cache_size=8
Trying update set global innodb_buffer_pool_size=49392123904
Trying update set global key_buffer_size=67108864
Trying update set global table_open_cache=1024
Trying update set global query_cache_min_res_unit=16384
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Reward 42835.949951171875 with {'thread_cache_size': '8', 'innodb_buffer_pool_size': '46G', 'key_buffer_size': '64M', 'table_open_cache': '1024', 'query_cache_min_res_unit': '16384'}
Obtained 43568.369873046875 by configuration {'thread_cache_size': '16M', 'innodb_buffer_pool_size': '17179869184', 'key_buffer_size': '32M', 'table_open_cache': '512', 'query_cache_min_res_unit': '2K'}
Achieved unscaled reward of 43568.369873046875 using {'thread_cache_size': '16M', 'innodb_buffer_pool_size': '17179869184', 'key_buffer_size': '32M', 'table_open_cache': '512', 'query_cache_min_res_unit': '2K'}.
No warmup - hint counter: 20
{'sequence': '65000 max_password_errors', 'labels': ['Decrease recommendation strongly', 'Increase recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation'], 'scores': [0.3056502342224121, 0.25461527705192566, 0.23366673290729523, 0.11778020858764648, 0.08828753978013992]}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(748, 764), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65000'>, recommendation='65000 max_password_errors', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=65000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.3056502342224121, 0.23366673290729523, 0.11778020858764648, 0.08828753978013992, 0.25461527705192566]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(748, 764), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65000'>, recommendation='65000 max_password_errors', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=65000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.3056502342224121, 0.23366673290729523, 0.11778020858764648, 0.08828753978013992, 0.25461527705192566]
Choice: 0
Done flag: False
No warmup - hint counter: 20
{'sequence': '65000 max_password_errors', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.5513314604759216, 0.18864524364471436, 0.13477171957492828, 0.10610231757164001, 0.01914924755692482]}
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(748, 764), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65000'>, recommendation='65000 max_password_errors', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=65000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01914924755692482, 0.5513314604759216, 0.18864524364471436, 0.13477171957492828, 0.10610231757164001]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(748, 764), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65000'>, recommendation='65000 max_password_errors', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=65000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.3056502342224121, 0.23366673290729523, 0.11778020858764648, 0.08828753978013992, 0.25461527705192566]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(748, 764), match='open_files_limit'>, value=<re.Match object; span=(0, 5), match='65000'>, recommendation='65000 max_password_errors', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=65000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01914924755692482, 0.5513314604759216, 0.18864524364471436, 0.13477171957492828, 0.10610231757164001]
Choice: 0
Trying update set global open_files_limit=260000
Exception during update: Variable 'open_files_limit' is a read only variable
Trying update set global open_files_limit=32135
Exception during update: Variable 'open_files_limit' is a read only variable
Trying assigning open_files_limit to 260000
Assignment ('open_files_limit', '260000') was rejected
Hint counter: 21
Episode hint counter before: 0
Episode hint counter: 1
Hints per episode: 20
Done flag: False
No warmup - hint counter: 21
{'sequence': '512', 'labels': ['Use recommendation', 'Increase recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Decrease recommendation'], 'scores': [0.2637619078159332, 0.19082817435264587, 0.18853892385959625, 0.18315310776233673, 0.17371782660484314]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(286, 298), match='thread_stack'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 2
Done flag: False
No warmup - hint counter: 21
{'sequence': '512', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316, 0.022273913025856018]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(286, 298), match='thread_stack'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
Choice: 2
Trying update set global thread_stack=512
Exception during update: Variable 'thread_stack' is a read only variable
Trying update set global thread_stack=299008
Exception during update: Variable 'thread_stack' is a read only variable
Trying assigning thread_stack to 512
Assignment ('thread_stack', '512') was rejected
Hint counter: 22
Episode hint counter before: 1
Episode hint counter: 2
Hints per episode: 20
Done flag: False
No warmup - hint counter: 22
{'sequence': '192', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.25859376788139343, 0.21243582665920258, 0.18821486830711365, 0.17812727391719818, 0.16262833774089813]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(177, 189), match='thread_stack'>, value=<re.Match object; span=(0, 3), match='192'>, recommendation='192', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18821486830711365, 0.16262833774089813, 0.25859376788139343, 0.17812727391719818, 0.21243582665920258]
Choice: 3
Done flag: False
No warmup - hint counter: 22
{'sequence': '192', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4440685212612152, 0.20842856168746948, 0.17406624555587769, 0.1505981981754303, 0.022838477045297623]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(177, 189), match='thread_stack'>, value=<re.Match object; span=(0, 3), match='192'>, recommendation='192', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022838477045297623, 0.4440685212612152, 0.20842856168746948, 0.17406624555587769, 0.1505981981754303]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(177, 189), match='thread_stack'>, value=<re.Match object; span=(0, 3), match='192'>, recommendation='192', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18821486830711365, 0.16262833774089813, 0.25859376788139343, 0.17812727391719818, 0.21243582665920258]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(177, 189), match='thread_stack'>, value=<re.Match object; span=(0, 3), match='192'>, recommendation='192', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022838477045297623, 0.4440685212612152, 0.20842856168746948, 0.17406624555587769, 0.1505981981754303]
Choice: 1
Trying update set global thread_stack=96
Exception during update: Variable 'thread_stack' is a read only variable
Trying update set global thread_stack=299008
Exception during update: Variable 'thread_stack' is a read only variable
Trying assigning thread_stack to 96
Assignment ('thread_stack', '96') was rejected
Hint counter: 23
Episode hint counter before: 2
Episode hint counter: 3
Hints per episode: 20
Done flag: False
No warmup - hint counter: 23
{'sequence': '128K', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.2818615138530731, 0.2129811942577362, 0.18397192656993866, 0.16471435129642487, 0.15647098422050476]}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(464, 476), match='thread_stack'>, value=<re.Match object; span=(0, 4), match='128K'>, recommendation='128K', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=128.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18397192656993866, 0.15647098422050476, 0.2818615138530731, 0.16471435129642487, 0.2129811942577362]
Choice: 0
Done flag: False
No warmup - hint counter: 23
{'sequence': '128K', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4361570477485657, 0.21562883257865906, 0.17626062035560608, 0.1473391205072403, 0.02461441420018673]}
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(464, 476), match='thread_stack'>, value=<re.Match object; span=(0, 4), match='128K'>, recommendation='128K', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=128.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02461441420018673, 0.4361570477485657, 0.21562883257865906, 0.17626062035560608, 0.1473391205072403]
Choice: 0
Trying update set global thread_stack=32768
Exception during update: Variable 'thread_stack' is a read only variable
Trying update set global thread_stack=299008
Exception during update: Variable 'thread_stack' is a read only variable
Trying assigning thread_stack to 32K
Assignment ('thread_stack', '32K') was rejected
Hint counter: 24
Episode hint counter before: 3
Episode hint counter: 4
Hints per episode: 20
Done flag: False
No warmup - hint counter: 24
{'sequence': '50', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation', 'Increase recommendation strongly'], 'scores': [0.2630220055580139, 0.21986037492752075, 0.19981148838996887, 0.16092373430728912, 0.15638239681720734]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(86, 102), match='query_cache_size'>, value=<re.Match object; span=(0, 2), match='50'>, recommendation='50', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=50.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19981148838996887, 0.21986037492752075, 0.2630220055580139, 0.16092373430728912, 0.15638239681720734]
Choice: 0
Done flag: False
No warmup - hint counter: 24
{'sequence': '50', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4847303330898285, 0.1944613754749298, 0.1586245894432068, 0.1296287328004837, 0.03255493938922882]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(86, 102), match='query_cache_size'>, value=<re.Match object; span=(0, 2), match='50'>, recommendation='50', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=50.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.03255493938922882, 0.4847303330898285, 0.1944613754749298, 0.1586245894432068, 0.1296287328004837]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(86, 102), match='query_cache_size'>, value=<re.Match object; span=(0, 2), match='50'>, recommendation='50', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=50.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19981148838996887, 0.21986037492752075, 0.2630220055580139, 0.16092373430728912, 0.15638239681720734]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(86, 102), match='query_cache_size'>, value=<re.Match object; span=(0, 2), match='50'>, recommendation='50', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=50.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.03255493938922882, 0.4847303330898285, 0.1944613754749298, 0.1586245894432068, 0.1296287328004837]
Choice: 2
Trying update set global query_cache_size=100
Trying update set global query_cache_size=1048576
Trying assigning query_cache_size to 100
Adding assignment ('query_cache_size', '100') with weight 4
Assignment ('query_cache_size', '100') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 25
Episode hint counter before: 4
Episode hint counter: 5
Hints per episode: 20
Done flag: False
No warmup - hint counter: 25
{'sequence': '0', 'labels': ['Use recommendation', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation', 'Increase recommendation strongly'], 'scores': [0.27009207010269165, 0.20856523513793945, 0.2019384503364563, 0.17301714420318604, 0.14638707041740417]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(785, 801), match='query_cache_size'>, value=<re.Match object; span=(0, 1), match='0'>, recommendation='0', passage="or we should make it smaller? like.... 5000 or others?\ni confuse about this setting....\naaP_loonysnow\nDhanamerdeka\nConducted tests with VPS 1 CPU core and 1GB RAM.\nApache 2.4.56 + PHP 8.0 (OPcache + APCU + imagemagick) + MySQL 5.7.40.\nMariaDB for some reason stopped being installed even on better hardware, and MySQL 8 requires at least 6GB of RAM.\nA real WordPress-based website was taken as a basis (full of plugins, heavy theme, WP Super Cache, Autoptimize).\nResults:\nWithout caching, the server response averages 800-900ms.\nWith caching of about 100-150ms.\nThe whole problem is the number of cores. I advise you to install at least 2 CPU cores.\nGiven the limitations of iron, the result is very good. For personal projects or a blog, that's the thing.\nMySQL:\nkey_buffer_size = 16\nquery_cache_size = 0 wsrep_mysql_replication_bundle ", float_val=0.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20856523513793945, 0.2019384503364563, 0.27009207010269165, 0.17301714420318604, 0.14638707041740417]
Choice: 4
Done flag: False
No warmup - hint counter: 25
{'sequence': '0', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.44440340995788574, 0.20087464153766632, 0.16065354645252228, 0.14993849396705627, 0.04412984102964401]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(785, 801), match='query_cache_size'>, value=<re.Match object; span=(0, 1), match='0'>, recommendation='0', passage="or we should make it smaller? like.... 5000 or others?\ni confuse about this setting....\naaP_loonysnow\nDhanamerdeka\nConducted tests with VPS 1 CPU core and 1GB RAM.\nApache 2.4.56 + PHP 8.0 (OPcache + APCU + imagemagick) + MySQL 5.7.40.\nMariaDB for some reason stopped being installed even on better hardware, and MySQL 8 requires at least 6GB of RAM.\nA real WordPress-based website was taken as a basis (full of plugins, heavy theme, WP Super Cache, Autoptimize).\nResults:\nWithout caching, the server response averages 800-900ms.\nWith caching of about 100-150ms.\nThe whole problem is the number of cores. I advise you to install at least 2 CPU cores.\nGiven the limitations of iron, the result is very good. For personal projects or a blog, that's the thing.\nMySQL:\nkey_buffer_size = 16\nquery_cache_size = 0 wsrep_mysql_replication_bundle ", float_val=0.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.04412984102964401, 0.44440340995788574, 0.20087464153766632, 0.16065354645252228, 0.14993849396705627]
Choice: 3
Trying update set global query_cache_size=0
Trying update set global query_cache_size=1048576
Trying assigning query_cache_size to 0
Adding assignment ('query_cache_size', '0') with weight 8
Assignment ('query_cache_size', '0') extracted from "or we should make it smaller? like.... 5000 or others?
i confuse about this setting....
aaP_loonysnow
Dhanamerdeka
Conducted tests with VPS 1 CPU core and 1GB RAM.
Apache 2.4.56 + PHP 8.0 (OPcache + APCU + imagemagick) + MySQL 5.7.40.
MariaDB for some reason stopped being installed even on better hardware, and MySQL 8 requires at least 6GB of RAM.
A real WordPress-based website was taken as a basis (full of plugins, heavy theme, WP Super Cache, Autoptimize).
Results:
Without caching, the server response averages 800-900ms.
With caching of about 100-150ms.
The whole problem is the number of cores. I advise you to install at least 2 CPU cores.
Given the limitations of iron, the result is very good. For personal projects or a blog, that's the thing.
MySQL:
key_buffer_size = 16
query_cache_size = 0 wsrep_mysql_replication_bundle "
Hint counter: 26
Episode hint counter before: 5
Episode hint counter: 6
Hints per episode: 20
Done flag: False
No warmup - hint counter: 26
{'sequence': '300M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Increase recommendation', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.28496333956718445, 0.2031497359275818, 0.17855490744113922, 0.16972294449806213, 0.1636090725660324]}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(80, 96), match='query_cache_size'>, value=<re.Match object; span=(0, 4), match='300M'>, recommendation='300M', passage='#innodb_force_recovery =6\n# * Query Cache Configuration\nquery_cache_limit\n= 50M\nquery_cache_size\n= 300M\n# * Logging and Replication\n# * InnoDB\n# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\n# Read the manual for more InnoDB related options. There are many!\n# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.\n#skip-innodb\ninnodb_buffer_pool_size=16777216\ninnodb_file_per_table\nApache configuration\nAdd that to your configuration file.\n<IfModule mod_gzip.c>\nmod_gzip_on yes\nmod_gzip_dechunk yes\nmod_gzip_keep_workfiles No\nmod_gzip_can_negotiate yes\nmod_gzip_update_static No innodb_ft_result_cache_limit ', float_val=300.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.16972294449806213, 0.1636090725660324, 0.28496333956718445, 0.17855490744113922, 0.2031497359275818]
Choice: 0
Done flag: False
No warmup - hint counter: 26
{'sequence': '300M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.43009284138679504, 0.20850959420204163, 0.18484938144683838, 0.15883034467697144, 0.01771782524883747]}
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(80, 96), match='query_cache_size'>, value=<re.Match object; span=(0, 4), match='300M'>, recommendation='300M', passage='#innodb_force_recovery =6\n# * Query Cache Configuration\nquery_cache_limit\n= 50M\nquery_cache_size\n= 300M\n# * Logging and Replication\n# * InnoDB\n# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\n# Read the manual for more InnoDB related options. There are many!\n# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.\n#skip-innodb\ninnodb_buffer_pool_size=16777216\ninnodb_file_per_table\nApache configuration\nAdd that to your configuration file.\n<IfModule mod_gzip.c>\nmod_gzip_on yes\nmod_gzip_dechunk yes\nmod_gzip_keep_workfiles No\nmod_gzip_can_negotiate yes\nmod_gzip_update_static No innodb_ft_result_cache_limit ', float_val=300.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01771782524883747, 0.43009284138679504, 0.20850959420204163, 0.18484938144683838, 0.15883034467697144]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(80, 96), match='query_cache_size'>, value=<re.Match object; span=(0, 4), match='300M'>, recommendation='300M', passage='#innodb_force_recovery =6\n# * Query Cache Configuration\nquery_cache_limit\n= 50M\nquery_cache_size\n= 300M\n# * Logging and Replication\n# * InnoDB\n# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\n# Read the manual for more InnoDB related options. There are many!\n# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.\n#skip-innodb\ninnodb_buffer_pool_size=16777216\ninnodb_file_per_table\nApache configuration\nAdd that to your configuration file.\n<IfModule mod_gzip.c>\nmod_gzip_on yes\nmod_gzip_dechunk yes\nmod_gzip_keep_workfiles No\nmod_gzip_can_negotiate yes\nmod_gzip_update_static No innodb_ft_result_cache_limit ', float_val=300.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.16972294449806213, 0.1636090725660324, 0.28496333956718445, 0.17855490744113922, 0.2031497359275818]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(80, 96), match='query_cache_size'>, value=<re.Match object; span=(0, 4), match='300M'>, recommendation='300M', passage='#innodb_force_recovery =6\n# * Query Cache Configuration\nquery_cache_limit\n= 50M\nquery_cache_size\n= 300M\n# * Logging and Replication\n# * InnoDB\n# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\n# Read the manual for more InnoDB related options. There are many!\n# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.\n#skip-innodb\ninnodb_buffer_pool_size=16777216\ninnodb_file_per_table\nApache configuration\nAdd that to your configuration file.\n<IfModule mod_gzip.c>\nmod_gzip_on yes\nmod_gzip_dechunk yes\nmod_gzip_keep_workfiles No\nmod_gzip_can_negotiate yes\nmod_gzip_update_static No innodb_ft_result_cache_limit ', float_val=300.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01771782524883747, 0.43009284138679504, 0.20850959420204163, 0.18484938144683838, 0.15883034467697144]
Choice: 3
Trying update set global query_cache_size=157286400
Trying update set global query_cache_size=1048576
Trying assigning query_cache_size to 150M
Adding assignment ('query_cache_size', '150M') with weight 8
Assignment ('query_cache_size', '150M') extracted from "#innodb_force_recovery =6
# * Query Cache Configuration
query_cache_limit
= 50M
query_cache_size
= 300M
# * Logging and Replication
# * InnoDB
# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.
# Read the manual for more InnoDB related options. There are many!
# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.
#skip-innodb
innodb_buffer_pool_size=16777216
innodb_file_per_table
Apache configuration
Add that to your configuration file.
<IfModule mod_gzip.c>
mod_gzip_on yes
mod_gzip_dechunk yes
mod_gzip_keep_workfiles No
mod_gzip_can_negotiate yes
mod_gzip_update_static No innodb_ft_result_cache_limit "
Hint counter: 27
Episode hint counter before: 6
Episode hint counter: 7
Hints per episode: 20
Done flag: False
No warmup - hint counter: 27
{'sequence': '3 or a bigger', 'labels': ['Increase recommendation', 'Increase recommendation strongly', 'Use recommendation', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.46727150678634644, 0.273189902305603, 0.17399927973747253, 0.04928116500377655, 0.036258190870285034]}
Decision: Deciding adaption of TuningHint(doc_id=7, param=<re.Match object; span=(658, 674), match='join_cache_level'>, value=<re.Match object; span=(0, 1), match='3'>, recommendation='3 or a bigger', passage='customer.id = orders.customer_id and ...\nSuppose, table orders has an index IDX on orders.customer_id.\nIf the query plan is using this index to fetch orders for each customer, the optimizer will use index statistics from IDX to estimate the number of rows in the customer-joined-with-orders.\nOn the other hand, if the optimizer considers a query plan that\njoins customer with orders without use of indexes, it will ignore the customer.id = orders.customer_id equality completely and will compute the\noutput cardinality as if customer was cross-joined with orders.\nHash Join\nMariaDB supports Block Hash Join. It is not enabled by default, one needs to set it join_cache_level to 3 or a bigger value to enable it.\nBefore MDEV-30812, Query optimization for Block Hash Join would work as described in the above example: It would assume that the join operation is a cross join.\nMDEV-30812 introduces a new optimizer_switch flag, hash_join_cardinality. In MariaDB versions before 11.0, it is off by default. max_error_count ', float_val=3.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.04928116500377655, 0.036258190870285034, 0.17399927973747253, 0.46727150678634644, 0.273189902305603]
Choice: 3
Done flag: False
No warmup - hint counter: 27
{'sequence': '3 or a bigger', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.47814804315567017, 0.2144041806459427, 0.16039974987506866, 0.12909729778766632, 0.017950722947716713]}
Decision: Deciding weight of TuningHint(doc_id=7, param=<re.Match object; span=(658, 674), match='join_cache_level'>, value=<re.Match object; span=(0, 1), match='3'>, recommendation='3 or a bigger', passage='customer.id = orders.customer_id and ...\nSuppose, table orders has an index IDX on orders.customer_id.\nIf the query plan is using this index to fetch orders for each customer, the optimizer will use index statistics from IDX to estimate the number of rows in the customer-joined-with-orders.\nOn the other hand, if the optimizer considers a query plan that\njoins customer with orders without use of indexes, it will ignore the customer.id = orders.customer_id equality completely and will compute the\noutput cardinality as if customer was cross-joined with orders.\nHash Join\nMariaDB supports Block Hash Join. It is not enabled by default, one needs to set it join_cache_level to 3 or a bigger value to enable it.\nBefore MDEV-30812, Query optimization for Block Hash Join would work as described in the above example: It would assume that the join operation is a cross join.\nMDEV-30812 introduces a new optimizer_switch flag, hash_join_cardinality. In MariaDB versions before 11.0, it is off by default. max_error_count ', float_val=3.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.017950722947716713, 0.47814804315567017, 0.2144041806459427, 0.16039974987506866, 0.12909729778766632]
Choice: 3
Trying update set global join_cache_level=6
Trying update set global join_cache_level=2
Trying assigning join_cache_level to 6
Adding assignment ('join_cache_level', '6') with weight 8
Assignment ('join_cache_level', '6') extracted from "customer.id = orders.customer_id and ...
Suppose, table orders has an index IDX on orders.customer_id.
If the query plan is using this index to fetch orders for each customer, the optimizer will use index statistics from IDX to estimate the number of rows in the customer-joined-with-orders.
On the other hand, if the optimizer considers a query plan that
joins customer with orders without use of indexes, it will ignore the customer.id = orders.customer_id equality completely and will compute the
output cardinality as if customer was cross-joined with orders.
Hash Join
MariaDB supports Block Hash Join. It is not enabled by default, one needs to set it join_cache_level to 3 or a bigger value to enable it.
Before MDEV-30812, Query optimization for Block Hash Join would work as described in the above example: It would assume that the join operation is a cross join.
MDEV-30812 introduces a new optimizer_switch flag, hash_join_cardinality. In MariaDB versions before 11.0, it is off by default. max_error_count "
Hint counter: 28
Episode hint counter before: 7
Episode hint counter: 8
Hints per episode: 20
Done flag: False
No warmup - hint counter: 28
{'sequence': '0', 'labels': ['Use recommendation', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation', 'Increase recommendation strongly'], 'scores': [0.27009207010269165, 0.20856523513793945, 0.2019384503364563, 0.17301714420318604, 0.14638707041740417]}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(246, 276), match='innodb_flush_log_at_trx_commit'>, value=<re.Match object; span=(0, 1), match='0'>, recommendation='0', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=0.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20856523513793945, 0.2019384503364563, 0.27009207010269165, 0.17301714420318604, 0.14638707041740417]
Choice: 3
Done flag: False
No warmup - hint counter: 28
{'sequence': '0', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.44440340995788574, 0.20087464153766632, 0.16065354645252228, 0.14993849396705627, 0.04412984102964401]}
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(246, 276), match='innodb_flush_log_at_trx_commit'>, value=<re.Match object; span=(0, 1), match='0'>, recommendation='0', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=0.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.04412984102964401, 0.44440340995788574, 0.20087464153766632, 0.16065354645252228, 0.14993849396705627]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(246, 276), match='innodb_flush_log_at_trx_commit'>, value=<re.Match object; span=(0, 1), match='0'>, recommendation='0', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=0.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20856523513793945, 0.2019384503364563, 0.27009207010269165, 0.17301714420318604, 0.14638707041740417]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(246, 276), match='innodb_flush_log_at_trx_commit'>, value=<re.Match object; span=(0, 1), match='0'>, recommendation='0', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=0.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.04412984102964401, 0.44440340995788574, 0.20087464153766632, 0.16065354645252228, 0.14993849396705627]
Choice: 4
Trying update set global innodb_flush_log_at_trx_commit=0
Trying update set global innodb_flush_log_at_trx_commit=1
Trying assigning innodb_flush_log_at_trx_commit to 0
Adding assignment ('innodb_flush_log_at_trx_commit', '0') with weight 16
Assignment ('innodb_flush_log_at_trx_commit', '0') extracted from "I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.
Following the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).
I also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size "
Hint counter: 29
Episode hint counter before: 8
Episode hint counter: 9
Hints per episode: 20
Done flag: False
No warmup - hint counter: 29
{'sequence': '64MB', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.30582311749458313, 0.22592315077781677, 0.18528391420841217, 0.15321524441242218, 0.12975457310676575]}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(16, 35), match='max_heap_table_size'>, value=<re.Match object; span=(0, 4), match='64MB'>, recommendation='64MB', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=64.0, val_unit='MB', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18528391420841217, 0.12975457310676575, 0.30582311749458313, 0.15321524441242218, 0.22592315077781677]
Choice: 3
Done flag: False
No warmup - hint counter: 29
{'sequence': '64MB', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4747910797595978, 0.20364288985729218, 0.15496112406253815, 0.13760244846343994, 0.0290024746209383]}
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(16, 35), match='max_heap_table_size'>, value=<re.Match object; span=(0, 4), match='64MB'>, recommendation='64MB', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=64.0, val_unit='MB', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.0290024746209383, 0.4747910797595978, 0.20364288985729218, 0.15496112406253815, 0.13760244846343994]
Choice: 4
Trying update set global max_heap_table_size=134217728
Trying update set global max_heap_table_size=16777216
Trying assigning max_heap_table_size to 128MB
Adding assignment ('max_heap_table_size', '128MB') with weight 16
Assignment ('max_heap_table_size', '128MB') extracted from "I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.
Following the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).
I also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size "
Hint counter: 30
Episode hint counter before: 9
Episode hint counter: 10
Hints per episode: 20
Done flag: False
No warmup - hint counter: 30
{'sequence': '1', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Increase recommendation', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.26459458470344543, 0.25241753458976746, 0.18136560916900635, 0.16976413130760193, 0.1318582147359848]}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(975, 994), match='log_slow_query_time'>, value=<re.Match object; span=(0, 1), match='1'>, recommendation='1', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=1.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.16976413130760193, 0.1318582147359848, 0.26459458470344543, 0.18136560916900635, 0.25241753458976746]
Choice: 4
Done flag: False
No warmup - hint counter: 30
{'sequence': '1', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4530342221260071, 0.20463363826274872, 0.16576839983463287, 0.14695607125759125, 0.029607674106955528]}
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(975, 994), match='log_slow_query_time'>, value=<re.Match object; span=(0, 1), match='1'>, recommendation='1', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=1.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.029607674106955528, 0.4530342221260071, 0.20463363826274872, 0.16576839983463287, 0.14695607125759125]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(975, 994), match='log_slow_query_time'>, value=<re.Match object; span=(0, 1), match='1'>, recommendation='1', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=1.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.16976413130760193, 0.1318582147359848, 0.26459458470344543, 0.18136560916900635, 0.25241753458976746]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(975, 994), match='log_slow_query_time'>, value=<re.Match object; span=(0, 1), match='1'>, recommendation='1', passage="I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.\nFollowing the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).\nI also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size ", float_val=1.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.029607674106955528, 0.4530342221260071, 0.20463363826274872, 0.16576839983463287, 0.14695607125759125]
Choice: 0
Trying update set global log_slow_query_time=0
Trying update set global log_slow_query_time=10.0
Trying assigning log_slow_query_time to 0
Adding assignment ('log_slow_query_time', '0') with weight 1
Assignment ('log_slow_query_time', '0') extracted from "I also adjusted max_heap_table_size to 64MB again, on the recommendation of the internet. Looking at the information as to what it does, I figured it couldn't hurt - default is again 16MB.
Following the GitHub suggestion linked above, I also set innodb_flush_log_at_trx_commit to 0 - this means the database will no longer flush the to disk every time a transaction is performed, meaning it no longer conforms with ACID Principles, but however giving you a noticeable performance boost. This does mean if you lose power, you will lose the last second of transactions, but I'd prefer to have a UPS installed with Auto-Shutdown configured instead, or if in a datacenter some sort of failover and redundancy there. If you are turning this off though, make sure you have some sort of alternative to have those transactions written to disk in place - the last thing you want is to corrupt your Moodle Installation! (Hence why you have a Site backup of course).
I also changed the log_slow_query_time to 1, meaning that anything taking longer than 1 second to process is considered a slow query. Seems quick to the naked eye, but bear in mind usually MariaDB/MySQL connections last milliseconds. innodb_change_buffer_max_size "
Hint counter: 31
Episode hint counter before: 10
Episode hint counter: 11
Hints per episode: 20
Done flag: False
No warmup - hint counter: 31
{'sequence': '100M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation'], 'scores': [0.2783204913139343, 0.2013481855392456, 0.1745326966047287, 0.17402055859565735, 0.17177808284759521]}
Decision: Deciding adaption of TuningHint(doc_id=31, param=<re.Match object; span=(205, 220), match='max_binlog_size'>, value=<re.Match object; span=(0, 4), match='100M'>, recommendation='100M', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=100.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17402055859565735, 0.1745326966047287, 0.2783204913139343, 0.17177808284759521, 0.2013481855392456]
Choice: 3
Done flag: False
No warmup - hint counter: 31
{'sequence': '100M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4141623079776764, 0.20936425030231476, 0.18773645162582397, 0.17061880230903625, 0.01811819151043892]}
Decision: Deciding weight of TuningHint(doc_id=31, param=<re.Match object; span=(205, 220), match='max_binlog_size'>, value=<re.Match object; span=(0, 4), match='100M'>, recommendation='100M', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=100.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01811819151043892, 0.4141623079776764, 0.20936425030231476, 0.18773645162582397, 0.17061880230903625]
Choice: 4
Trying update set global max_binlog_size=209715200
Trying update set global max_binlog_size=1073741824
Trying assigning max_binlog_size to 200M
Adding assignment ('max_binlog_size', '200M') with weight 16
Assignment ('max_binlog_size', '200M') extracted from "#log-bin=mysql-bin
#binlog_format=mixed
Or, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:
log-bin=mysql-bin
expire_logs_days = 10
max_binlog_size
= 100M
Alternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:
# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO 'mysql-bin.000023;"
Warning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).
OpenRC fails to start MariaDB max_relay_log_size "
Hint counter: 32
Episode hint counter before: 11
Episode hint counter: 12
Hints per episode: 20
Done flag: False
No warmup - hint counter: 32
{'sequence': '100M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation'], 'scores': [0.2783204913139343, 0.2013481855392456, 0.1745326966047287, 0.17402055859565735, 0.17177808284759521]}
Decision: Deciding adaption of TuningHint(doc_id=31, param=<re.Match object; span=(757, 775), match='max_relay_log_size'>, value=<re.Match object; span=(0, 4), match='100M'>, recommendation='100M', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=100.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17402055859565735, 0.1745326966047287, 0.2783204913139343, 0.17177808284759521, 0.2013481855392456]
Choice: 2
Done flag: False
No warmup - hint counter: 32
{'sequence': '100M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4141623079776764, 0.20936425030231476, 0.18773645162582397, 0.17061880230903625, 0.01811819151043892]}
Decision: Deciding weight of TuningHint(doc_id=31, param=<re.Match object; span=(757, 775), match='max_relay_log_size'>, value=<re.Match object; span=(0, 4), match='100M'>, recommendation='100M', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=100.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01811819151043892, 0.4141623079776764, 0.20936425030231476, 0.18773645162582397, 0.17061880230903625]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=31, param=<re.Match object; span=(757, 775), match='max_relay_log_size'>, value=<re.Match object; span=(0, 4), match='100M'>, recommendation='100M', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=100.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17402055859565735, 0.1745326966047287, 0.2783204913139343, 0.17177808284759521, 0.2013481855392456]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=31, param=<re.Match object; span=(757, 775), match='max_relay_log_size'>, value=<re.Match object; span=(0, 4), match='100M'>, recommendation='100M', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=100.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01811819151043892, 0.4141623079776764, 0.20936425030231476, 0.18773645162582397, 0.17061880230903625]
Choice: 1
Trying update set global max_relay_log_size=52428800
Trying update set global max_relay_log_size=1073741824
Trying assigning max_relay_log_size to 50M
Adding assignment ('max_relay_log_size', '50M') with weight 2
Assignment ('max_relay_log_size', '50M') extracted from "#log-bin=mysql-bin
#binlog_format=mixed
Or, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:
log-bin=mysql-bin
expire_logs_days = 10
max_binlog_size
= 100M
Alternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:
# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO 'mysql-bin.000023;"
Warning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).
OpenRC fails to start MariaDB max_relay_log_size "
Hint counter: 33
Episode hint counter before: 12
Episode hint counter: 13
Hints per episode: 20
Done flag: False
No warmup - hint counter: 33
{'sequence': '10', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.2921229302883148, 0.21818508207798004, 0.1725960075855255, 0.17223773896694183, 0.14485827088356018]}
Decision: Deciding adaption of TuningHint(doc_id=31, param=<re.Match object; span=(183, 199), match='expire_logs_days'>, value=<re.Match object; span=(0, 2), match='10'>, recommendation='10', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=10.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1725960075855255, 0.14485827088356018, 0.2921229302883148, 0.17223773896694183, 0.21818508207798004]
Choice: 0
Done flag: False
No warmup - hint counter: 33
{'sequence': '10', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4700598120689392, 0.19640369713306427, 0.16490790247917175, 0.1450124830007553, 0.023616135120391846]}
Decision: Deciding weight of TuningHint(doc_id=31, param=<re.Match object; span=(183, 199), match='expire_logs_days'>, value=<re.Match object; span=(0, 2), match='10'>, recommendation='10', passage='#log-bin=mysql-bin\n#binlog_format=mixed\nOr, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:\nlog-bin=mysql-bin\nexpire_logs_days = 10\nmax_binlog_size\n= 100M\nAlternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:\n# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO \'mysql-bin.000023;"\nWarning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).\nOpenRC fails to start MariaDB max_relay_log_size ', float_val=10.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.023616135120391846, 0.4700598120689392, 0.19640369713306427, 0.16490790247917175, 0.1450124830007553]
Choice: 2
Trying update set global expire_logs_days=2
Trying update set global expire_logs_days=0.0
Trying assigning expire_logs_days to 2
Adding assignment ('expire_logs_days', '2') with weight 4
Assignment ('expire_logs_days', '2') extracted from "#log-bin=mysql-bin
#binlog_format=mixed
Or, if you want to keep these logs but keep their size in check and old logs deleted, you can set these limits then restart:
log-bin=mysql-bin
expire_logs_days = 10
max_binlog_size
= 100M
Alternatively, there exists a MariaDB command to manually purge logs older than a specific one. For example, you may see a file named mysql-bin.000023 and want to delete every log older than it. As long as the log-bin=mysql-bin setting is in effect, you would run:
# mariadb -u root -p"PASSWORD" -e "PURGE BINARY LOGS TO 'mysql-bin.000023;"
Warning: Using any of these methods may decrease the chances of successful data recovery when trying to repair database tables (i.e. on database corruption).
OpenRC fails to start MariaDB max_relay_log_size "
Hint counter: 34
Episode hint counter before: 13
Episode hint counter: 14
Hints per episode: 20
Done flag: False
No warmup - hint counter: 34
{'sequence': '4000', 'labels': ['Use recommendation', 'Increase recommendation', 'Decrease recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly'], 'scores': [0.2586197257041931, 0.1903301477432251, 0.1893036663532257, 0.18380886316299438, 0.1779375821352005]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(273, 291), match='innodb_io_capacity'>, value=<re.Match object; span=(0, 4), match='4000'>, recommendation='4000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=4000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1779375821352005, 0.1893036663532257, 0.2586197257041931, 0.1903301477432251, 0.18380886316299438]
Choice: 0
Done flag: False
No warmup - hint counter: 34
{'sequence': '4000', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4483853578567505, 0.2076708972454071, 0.17431151866912842, 0.14844806492328644, 0.021184172481298447]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(273, 291), match='innodb_io_capacity'>, value=<re.Match object; span=(0, 4), match='4000'>, recommendation='4000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=4000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.021184172481298447, 0.4483853578567505, 0.2076708972454071, 0.17431151866912842, 0.14844806492328644]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(273, 291), match='innodb_io_capacity'>, value=<re.Match object; span=(0, 4), match='4000'>, recommendation='4000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=4000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1779375821352005, 0.1893036663532257, 0.2586197257041931, 0.1903301477432251, 0.18380886316299438]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(273, 291), match='innodb_io_capacity'>, value=<re.Match object; span=(0, 4), match='4000'>, recommendation='4000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=4000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.021184172481298447, 0.4483853578567505, 0.2076708972454071, 0.17431151866912842, 0.14844806492328644]
Choice: 2
Trying update set global innodb_io_capacity=2000
Trying update set global innodb_io_capacity=200
Trying assigning innodb_io_capacity to 2000
Adding assignment ('innodb_io_capacity', '2000') with weight 4
Assignment ('innodb_io_capacity', '2000') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 35
Episode hint counter before: 14
Episode hint counter: 15
Hints per episode: 20
Done flag: False
No warmup - hint counter: 35
{'sequence': '30000', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.27192777395248413, 0.19408154487609863, 0.18324296176433563, 0.18074218928813934, 0.17000548541545868]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(362, 374), match='wait_timeout'>, value=<re.Match object; span=(0, 5), match='30000'>, recommendation='30000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=30000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18324296176433563, 0.19408154487609863, 0.27192777395248413, 0.17000548541545868, 0.18074218928813934]
Choice: 4
Done flag: False
No warmup - hint counter: 35
{'sequence': '30000', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.444963276386261, 0.2073020190000534, 0.1703442484140396, 0.15172511339187622, 0.02566535398364067]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(362, 374), match='wait_timeout'>, value=<re.Match object; span=(0, 5), match='30000'>, recommendation='30000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=30000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02566535398364067, 0.444963276386261, 0.2073020190000534, 0.1703442484140396, 0.15172511339187622]
Choice: 4
Trying update set global wait_timeout=120000
Trying update set global wait_timeout=60
Trying assigning wait_timeout to 120000
Adding assignment ('wait_timeout', '120000') with weight 16
Assignment ('wait_timeout', '120000') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 36
Episode hint counter before: 15
Episode hint counter: 16
Hints per episode: 20
Done flag: False
No warmup - hint counter: 36
{'sequence': '32', 'labels': ['Use recommendation', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.26641327142715454, 0.19402799010276794, 0.19214743375778198, 0.1895178258419037, 0.15789352357387543]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(216, 238), match='innodb_read_io_threads'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19402799010276794, 0.19214743375778198, 0.26641327142715454, 0.15789352357387543, 0.1895178258419037]
Choice: 3
Done flag: False
No warmup - hint counter: 36
{'sequence': '32', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.46463149785995483, 0.20161142945289612, 0.1676764339208603, 0.13865259289741516, 0.027428098022937775]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(216, 238), match='innodb_read_io_threads'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.027428098022937775, 0.46463149785995483, 0.20161142945289612, 0.1676764339208603, 0.13865259289741516]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(216, 238), match='innodb_read_io_threads'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19402799010276794, 0.19214743375778198, 0.26641327142715454, 0.15789352357387543, 0.1895178258419037]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(216, 238), match='innodb_read_io_threads'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.027428098022937775, 0.46463149785995483, 0.20161142945289612, 0.1676764339208603, 0.13865259289741516]
Choice: 4
Trying update set global innodb_read_io_threads=16
Trying update set global innodb_read_io_threads=4
Trying assigning innodb_read_io_threads to 16
Adding assignment ('innodb_read_io_threads', '16') with weight 16
Assignment ('innodb_read_io_threads', '16') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 37
Episode hint counter before: 16
Episode hint counter: 17
Hints per episode: 20
Done flag: False
No warmup - hint counter: 37
{'sequence': '300', 'labels': ['Use recommendation', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation', 'Increase recommendation strongly'], 'scores': [0.24746622145175934, 0.2047126293182373, 0.19365791976451874, 0.18261092901229858, 0.17155222594738007]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(340, 355), match='connect_timeout'>, value=<re.Match object; span=(0, 3), match='300'>, recommendation='300', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=300.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.2047126293182373, 0.18261092901229858, 0.24746622145175934, 0.19365791976451874, 0.17155222594738007]
Choice: 4
Done flag: False
No warmup - hint counter: 37
{'sequence': '300', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.45760852098464966, 0.20202812552452087, 0.16958750784397125, 0.14617766439914703, 0.024598082527518272]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(340, 355), match='connect_timeout'>, value=<re.Match object; span=(0, 3), match='300'>, recommendation='300', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=300.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.024598082527518272, 0.45760852098464966, 0.20202812552452087, 0.16958750784397125, 0.14617766439914703]
Choice: 4
Trying update set global connect_timeout=1200
Trying update set global connect_timeout=10
Trying assigning connect_timeout to 1200
Adding assignment ('connect_timeout', '1200') with weight 16
Assignment ('connect_timeout', '1200') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 38
Episode hint counter before: 17
Episode hint counter: 18
Hints per episode: 20
Done flag: False
No warmup - hint counter: 38
{'sequence': '6000', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation'], 'scores': [0.26613572239875793, 0.20174598693847656, 0.198944091796875, 0.167149156332016, 0.1660250425338745]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(299, 321), match='innodb_io_capacity_max'>, value=<re.Match object; span=(0, 4), match='6000'>, recommendation='6000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=6000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.198944091796875, 0.167149156332016, 0.26613572239875793, 0.1660250425338745, 0.20174598693847656]
Choice: 0
Done flag: False
No warmup - hint counter: 38
{'sequence': '6000', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.44496822357177734, 0.202551931142807, 0.17452304065227509, 0.15683667361736298, 0.021120181307196617]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(299, 321), match='innodb_io_capacity_max'>, value=<re.Match object; span=(0, 4), match='6000'>, recommendation='6000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=6000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.021120181307196617, 0.44496822357177734, 0.202551931142807, 0.17452304065227509, 0.15683667361736298]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(299, 321), match='innodb_io_capacity_max'>, value=<re.Match object; span=(0, 4), match='6000'>, recommendation='6000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=6000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.198944091796875, 0.167149156332016, 0.26613572239875793, 0.1660250425338745, 0.20174598693847656]
Choice: 2
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(299, 321), match='innodb_io_capacity_max'>, value=<re.Match object; span=(0, 4), match='6000'>, recommendation='6000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=6000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.021120181307196617, 0.44496822357177734, 0.202551931142807, 0.17452304065227509, 0.15683667361736298]
Choice: 0
Trying update set global innodb_io_capacity_max=6000
Trying update set global innodb_io_capacity_max=2000
Trying assigning innodb_io_capacity_max to 6000
Adding assignment ('innodb_io_capacity_max', '6000') with weight 1
Assignment ('innodb_io_capacity_max', '6000') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 39
Episode hint counter before: 18
Episode hint counter: 19
Hints per episode: 20
Done flag: False
No warmup - hint counter: 39
{'sequence': '1250', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.2442580908536911, 0.23470382392406464, 0.20277561247348785, 0.15915419161319733, 0.15910832583904266]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(436, 451), match='max_connections'>, value=<re.Match object; span=(0, 4), match='1250'>, recommendation='1250', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=1250.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20277561247348785, 0.23470382392406464, 0.2442580908536911, 0.15910832583904266, 0.15915419161319733]
Choice: 0
Done flag: False
No warmup - hint counter: 39
{'sequence': '1250', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4868924915790558, 0.19467118382453918, 0.1581139713525772, 0.13819433748722076, 0.022127989679574966]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(436, 451), match='max_connections'>, value=<re.Match object; span=(0, 4), match='1250'>, recommendation='1250', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=1250.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)[Restart] MariaDB server shut down!
[Restart] MariaDB server restarted!
[Restart] MariaDB server shut down!
[Restart] MariaDB server restarted!

Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022127989679574966, 0.4868924915790558, 0.19467118382453918, 0.1581139713525772, 0.13819433748722076]
Choice: 2
Trying update set global max_connections=312
Trying update set global max_connections=100
Trying assigning max_connections to 312
Adding assignment ('max_connections', '312') with weight 4
Assignment ('max_connections', '312') extracted from "# MySQL Server Configuration
# Directories and File Paths
datadir=/data/mysql
socket=/data/mysql/mysql.sock
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
# Logging and Replication
skip-log-bin=true
# Performance and Optimization
skip_name_resolve
skip-performance-schema
optimizer_switch = 'index_condition_pushdown=off'
tmp-table-size = 96M
max-heap-table-size = 96M
key_buffer_size = 64M
# Connections and Threads
max_connections = 1250
thread_cache_size = 8
max_allowed_packet = 64M
# InnoDB Configuration
innodb-log-file-size = 128M
innodb-log-buffer-size = 128M wsrep_mysql_replication_bundle "
Hint counter: 40
Episode hint counter before: 19
Episode hint counter: 20
Hints per episode: 20
Episode finished!
Done flag: True
Finalizing episode!
Weighted hints: defaultdict(<function NlpTuningEnv._finalize_episode.<locals>.<lambda> at 0x7f4561d22430>, {('query_cache_size', '100'): 4, ('query_cache_size', '0'): 8, ('query_cache_size', '150M'): 8, ('join_cache_level', '6'): 8, ('innodb_flush_log_at_trx_commit', '0'): 16, ('max_heap_table_size', '128MB'): 16, ('log_slow_query_time', '0'): 1, ('max_binlog_size', '200M'): 16, ('max_relay_log_size', '50M'): 2, ('expire_logs_days', '2'): 4, ('innodb_io_capacity', '2000'): 4, ('wait_timeout', '120000'): 16, ('innodb_read_io_threads', '16'): 16, ('connect_timeout', '1200'): 16, ('innodb_io_capacity_max', '6000'): 1, ('max_connections', '312'): 4})
Selected configurations: [{'query_cache_size': '100', 'join_cache_level': '6', 'innodb_flush_log_at_trx_commit': '0', 'max_heap_table_size': '128MB', 'log_slow_query_time': '0', 'max_binlog_size': '200M', 'max_relay_log_size': '50M', 'expire_logs_days': '2', 'innodb_io_capacity': '2000', 'wait_timeout': '120000', 'innodb_read_io_threads': '16', 'connect_timeout': '1200', 'innodb_io_capacity_max': '6000', 'max_connections': '312'}, {'query_cache_size': '150M', 'join_cache_level': '6', 'innodb_flush_log_at_trx_commit': '0', 'max_heap_table_size': '128MB', 'log_slow_query_time': '0', 'max_binlog_size': '200M', 'max_relay_log_size': '50M', 'expire_logs_days': '2', 'innodb_io_capacity': '2000', 'wait_timeout': '120000', 'innodb_read_io_threads': '16', 'connect_timeout': '1200', 'innodb_io_capacity_max': '6000', 'max_connections': '312'}]
Disconnecting ...
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Trying update update mariadb.server_cost set cost_value = NULL
Exception during update: Table 'mariadb.server_cost' doesn't exist
Trying update update mariadb.engine_cost set cost_value = NULL
Exception during update: Table 'mariadb.engine_cost' doesn't exist
Trying configuration: {'query_cache_size': '100', 'join_cache_level': '6', 'innodb_flush_log_at_trx_commit': '0', 'max_heap_table_size': '128MB', 'log_slow_query_time': '0', 'max_binlog_size': '200M', 'max_relay_log_size': '50M', 'expire_logs_days': '2', 'innodb_io_capacity': '2000', 'wait_timeout': '120000', 'innodb_read_io_threads': '16', 'connect_timeout': '1200', 'innodb_io_capacity_max': '6000', 'max_connections': '312'}
Trying update set global query_cache_size=100
Trying update set global join_cache_level=6
Trying update set global innodb_flush_log_at_trx_commit=0
Trying update set global max_heap_table_size=134217728
Trying update set global log_slow_query_time=0
Trying update set global max_binlog_size=209715200
Trying update set global max_relay_log_size=52428800
Trying update set global expire_logs_days=2
Trying update set global innodb_io_capacity=2000
Trying update set global wait_timeout=120000
Trying update set global innodb_read_io_threads=16
Trying update set global connect_timeout=1200
Trying update set global innodb_io_capacity_max=6000
Trying update set global max_connections=312
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Reward 1946.2314453125 with {'query_cache_size': '100', 'join_cache_level': '6', 'innodb_flush_log_at_trx_commit': '0', 'max_heap_table_size': '128MB', 'log_slow_query_time': '0', 'max_binlog_size': '200M', 'max_relay_log_size': '50M', 'expire_logs_days': '2', 'innodb_io_capacity': '2000', 'wait_timeout': '120000', 'innodb_read_io_threads': '16', 'connect_timeout': '1200', 'innodb_io_capacity_max': '6000', 'max_connections': '312'}
Disconnecting ...
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Trying update update mariadb.server_cost set cost_value = NULL
Exception during update: Table 'mariadb.server_cost' doesn't exist
Trying update update mariadb.engine_cost set cost_value = NULL
Exception during update: Table 'mariadb.engine_cost' doesn't exist
Trying configuration: {'query_cache_size': '150M', 'join_cache_level': '6', 'innodb_flush_log_at_trx_commit': '0', 'max_heap_table_size': '128MB', 'log_slow_query_time': '0', 'max_binlog_size': '200M', 'max_relay_log_size': '50M', 'expire_logs_days': '2', 'innodb_io_capacity': '2000', 'wait_timeout': '120000', 'innodb_read_io_threads': '16', 'connect_timeout': '1200', 'innodb_io_capacity_max': '6000', 'max_connections': '312'}
Trying update set global query_cache_size=157286400
Trying update set global join_cache_level=6
Trying update set global innodb_flush_log_at_trx_commit=0
Trying update set global max_heap_table_size=134217728
Trying update set global log_slow_query_time=0
Trying update set global max_binlog_size=209715200
Trying update set global max_relay_log_size=52428800
Trying update set global expire_logs_days=2
Trying update set global innodb_io_capacity=2000
Trying update set global wait_timeout=120000
Trying update set global innodb_read_io_threads=16
Trying update set global connect_timeout=1200
Trying update set global innodb_io_capacity_max=6000
Trying update set global max_connections=312
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Reward 77.54052734375 with {'query_cache_size': '150M', 'join_cache_level': '6', 'innodb_flush_log_at_trx_commit': '0', 'max_heap_table_size': '128MB', 'log_slow_query_time': '0', 'max_binlog_size': '200M', 'max_relay_log_size': '50M', 'expire_logs_days': '2', 'innodb_io_capacity': '2000', 'wait_timeout': '120000', 'innodb_read_io_threads': '16', 'connect_timeout': '1200', 'innodb_io_capacity_max': '6000', 'max_connections': '312'}
Obtained 1946.2314453125 by configuration {'query_cache_size': '100', 'join_cache_level': '6', 'innodb_flush_log_at_trx_commit': '0', 'max_heap_table_size': '128MB', 'log_slow_query_time': '0', 'max_binlog_size': '200M', 'max_relay_log_size': '50M', 'expire_logs_days': '2', 'innodb_io_capacity': '2000', 'wait_timeout': '120000', 'innodb_read_io_threads': '16', 'connect_timeout': '1200', 'innodb_io_capacity_max': '6000', 'max_connections': '312'}
Achieved unscaled reward of 1946.2314453125 using {'query_cache_size': '100', 'join_cache_level': '6', 'innodb_flush_log_at_trx_commit': '0', 'max_heap_table_size': '128MB', 'log_slow_query_time': '0', 'max_binlog_size': '200M', 'max_relay_log_size': '50M', 'expire_logs_days': '2', 'innodb_io_capacity': '2000', 'wait_timeout': '120000', 'innodb_read_io_threads': '16', 'connect_timeout': '1200', 'innodb_io_capacity_max': '6000', 'max_connections': '312'}.
No warmup - hint counter: 40
{'sequence': 'larger than the total number of all Zabbix server processes plus 150', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Increase recommendation', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.3626527190208435, 0.27075114846229553, 0.16154444217681885, 0.1274421215057373, 0.07760956138372421]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(179, 194), match='max_connections'>, value=<re.Match object; span=(65, 68), match='150'>, recommendation='larger than the total number of all Zabbix server processes plus 150', passage='socket=/data/mysql/mysql.sock\nLater, we will go through every configuration parameter with our ChatGPT friend, but first, there are two things to remember!Configuration parameter\xa0max_connections\xa0must be larger than the total number of all Zabbix server processes plus 150. You can use the command below to automatically check the number of Zabbix processes and add 150 to that number:egrep "^Start.+=[0-9]" /etc/zabbix/zabbix_server.conf | awk -F "=" \'{s+=$2} END {print s+150}\' max_password_errors ', float_val=150.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1274421215057373, 0.07760956138372421, 0.3626527190208435, 0.16154444217681885, 0.27075114846229553]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(179, 194), match='max_connections'>, value=<re.Match object; span=(65, 68), match='150'>, recommendation='larger than the total number of all Zabbix server processes plus 150', passage='socket=/data/mysql/mysql.sock\nLater, we will go through every configuration parameter with our ChatGPT friend, but first, there are two things to remember!Configuration parameter\xa0max_connections\xa0must be larger than the total number of all Zabbix server processes plus 150. You can use the command below to automatically check the number of Zabbix processes and add 150 to that number:egrep "^Start.+=[0-9]" /etc/zabbix/zabbix_server.conf | awk -F "=" \'{s+=$2} END {print s+150}\' max_password_errors ', float_val=150.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1274421215057373, 0.07760956138372421, 0.3626527190208435, 0.16154444217681885, 0.27075114846229553]
Choice: 2
Done flag: False
No warmup - hint counter: 40
{'sequence': 'larger than the total number of all Zabbix server processes plus 150', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.5690935850143433, 0.1851271241903305, 0.12315736711025238, 0.11001989245414734, 0.012601979076862335]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(179, 194), match='max_connections'>, value=<re.Match object; span=(65, 68), match='150'>, recommendation='larger than the total number of all Zabbix server processes plus 150', passage='socket=/data/mysql/mysql.sock\nLater, we will go through every configuration parameter with our ChatGPT friend, but first, there are two things to remember!Configuration parameter\xa0max_connections\xa0must be larger than the total number of all Zabbix server processes plus 150. You can use the command below to automatically check the number of Zabbix processes and add 150 to that number:egrep "^Start.+=[0-9]" /etc/zabbix/zabbix_server.conf | awk -F "=" \'{s+=$2} END {print s+150}\' max_password_errors ', float_val=150.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.012601979076862335, 0.5690935850143433, 0.1851271241903305, 0.12315736711025238, 0.11001989245414734]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(179, 194), match='max_connections'>, value=<re.Match object; span=(65, 68), match='150'>, recommendation='larger than the total number of all Zabbix server processes plus 150', passage='socket=/data/mysql/mysql.sock\nLater, we will go through every configuration parameter with our ChatGPT friend, but first, there are two things to remember!Configuration parameter\xa0max_connections\xa0must be larger than the total number of all Zabbix server processes plus 150. You can use the command below to automatically check the number of Zabbix processes and add 150 to that number:egrep "^Start.+=[0-9]" /etc/zabbix/zabbix_server.conf | awk -F "=" \'{s+=$2} END {print s+150}\' max_password_errors ', float_val=150.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1274421215057373, 0.07760956138372421, 0.3626527190208435, 0.16154444217681885, 0.27075114846229553]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(179, 194), match='max_connections'>, value=<re.Match object; span=(65, 68), match='150'>, recommendation='larger than the total number of all Zabbix server processes plus 150', passage='socket=/data/mysql/mysql.sock\nLater, we will go through every configuration parameter with our ChatGPT friend, but first, there are two things to remember!Configuration parameter\xa0max_connections\xa0must be larger than the total number of all Zabbix server processes plus 150. You can use the command below to automatically check the number of Zabbix processes and add 150 to that number:egrep "^Start.+=[0-9]" /etc/zabbix/zabbix_server.conf | awk -F "=" \'{s+=$2} END {print s+150}\' max_password_errors ', float_val=150.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.012601979076862335, 0.5690935850143433, 0.1851271241903305, 0.12315736711025238, 0.11001989245414734]
Choice: 4
Trying update set global max_connections=75
Trying update set global max_connections=312
Trying assigning max_connections to 75
Adding assignment ('max_connections', '75') with weight 16
Assignment ('max_connections', '75') extracted from "socket=/data/mysql/mysql.sock
Later, we will go through every configuration parameter with our ChatGPT friend, but first, there are two things to remember!Configuration parameter max_connections must be larger than the total number of all Zabbix server processes plus 150. You can use the command below to automatically check the number of Zabbix processes and add 150 to that number:egrep "^Start.+=[0-9]" /etc/zabbix/zabbix_server.conf | awk -F "=" '{s+=$2} END {print s+150}' max_password_errors "
Hint counter: 41
Episode hint counter before: 0
Episode hint counter: 1
Hints per episode: 20
Done flag: False
No warmup - hint counter: 41
{'sequence': '1000000', 'labels': ['Use recommendation', 'Increase recommendation', 'Increase recommendation strongly', 'Decrease recommendation', 'Decrease recommendation strongly'], 'scores': [0.2528064250946045, 0.19543568789958954, 0.19329147040843964, 0.18156594038009644, 0.17690053582191467]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(485, 503), match='max_connect_errors'>, value=<re.Match object; span=(0, 7), match='1000000'>, recommendation='1000000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=1000000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17690053582191467, 0.18156594038009644, 0.2528064250946045, 0.19543568789958954, 0.19329147040843964]
Choice: 4
Done flag: False
No warmup - hint counter: 41
{'sequence': '1000000', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.43378427624702454, 0.20846743881702423, 0.16758155822753906, 0.1633659303188324, 0.02680082619190216]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(485, 503), match='max_connect_errors'>, value=<re.Match object; span=(0, 7), match='1000000'>, recommendation='1000000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=1000000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02680082619190216, 0.43378427624702454, 0.20846743881702423, 0.16758155822753906, 0.1633659303188324]
Choice: 3
Trying update set global max_connect_errors=4000000
Trying update set global max_connect_errors=100
Trying assigning max_connect_errors to 4000000
Adding assignment ('max_connect_errors', '4000000') with weight 8
Assignment ('max_connect_errors', '4000000') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 42
Episode hint counter before: 1
Episode hint counter: 2
Hints per episode: 20
Done flag: False
No warmup - hint counter: 42
{'sequence': '16', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.2578245997428894, 0.21941344439983368, 0.18871235847473145, 0.17040672898292542, 0.16364289820194244]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(403, 429), match='table_open_cache_instances'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18871235847473145, 0.16364289820194244, 0.2578245997428894, 0.17040672898292542, 0.21941344439983368]
Choice: 2
Done flag: False
No warmup - hint counter: 42
{'sequence': '16', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4661506414413452, 0.19984710216522217, 0.16229088604450226, 0.1465105265378952, 0.025200868025422096]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(403, 429), match='table_open_cache_instances'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025200868025422096, 0.4661506414413452, 0.19984710216522217, 0.16229088604450226, 0.1465105265378952]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(403, 429), match='table_open_cache_instances'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18871235847473145, 0.16364289820194244, 0.2578245997428894, 0.17040672898292542, 0.21941344439983368]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(403, 429), match='table_open_cache_instances'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025200868025422096, 0.4661506414413452, 0.19984710216522217, 0.16229088604450226, 0.1465105265378952]
Choice: 2
Trying update set global table_open_cache_instances=32
Exception during update: Variable 'table_open_cache_instances' is a read only variable
Trying update set global table_open_cache_instances=8
Exception during update: Variable 'table_open_cache_instances' is a read only variable
Trying assigning table_open_cache_instances to 32
Assignment ('table_open_cache_instances', '32') was rejected
Hint counter: 43
Episode hint counter before: 2
Episode hint counter: 3
Hints per episode: 20
Done flag: False
No warmup - hint counter: 43
{'sequence': '1000', 'labels': ['Use recommendation', 'Increase recommendation', 'Decrease recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly'], 'scores': [0.28242507576942444, 0.19090786576271057, 0.18482346832752228, 0.17559082806110382, 0.1662527620792389]}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(59, 81), match='innodb_old_blocks_time'>, value=<re.Match object; span=(0, 4), match='1000'>, recommendation='1000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=1000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1662527620792389, 0.18482346832752228, 0.28242507576942444, 0.19090786576271057, 0.17559082806110382]
Choice: 0
Done flag: False
No warmup - hint counter: 43
{'sequence': '1000', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.43016543984413147, 0.20931342244148254, 0.1748356819152832, 0.16804377734661102, 0.017641622573137283]}
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(59, 81), match='innodb_old_blocks_time'>, value=<re.Match object; span=(0, 4), match='1000'>, recommendation='1000', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=1000.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.017641622573137283, 0.43016543984413147, 0.20931342244148254, 0.1748356819152832, 0.16804377734661102]
Choice: 3
Trying update set global innodb_old_blocks_time=250
Trying update set global innodb_old_blocks_time=1000
Trying assigning innodb_old_blocks_time to 250
Adding assignment ('innodb_old_blocks_time', '250') with weight 8
Assignment ('innodb_old_blocks_time', '250') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 44
Episode hint counter before: 3
Episode hint counter: 4
Hints per episode: 20
Done flag: False
No warmup - hint counter: 44
{'sequence': '256', 'labels': ['Use recommendation', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.26477310061454773, 0.21567395329475403, 0.18666331470012665, 0.18013955652713776, 0.15275011956691742]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(212, 228), match='read_buffer_size'>, value=<re.Match object; span=(0, 3), match='256'>, recommendation='256', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=256.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.21567395329475403, 0.18666331470012665, 0.26477310061454773, 0.15275011956691742, 0.18013955652713776]
Choice: 1
Done flag: False
No warmup - hint counter: 44
{'sequence': '256', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4565011262893677, 0.20721030235290527, 0.16764211654663086, 0.1437726467847824, 0.024873826652765274]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(212, 228), match='read_buffer_size'>, value=<re.Match object; span=(0, 3), match='256'>, recommendation='256', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=256.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.024873826652765274, 0.4565011262893677, 0.20721030235290527, 0.16764211654663086, 0.1437726467847824]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(212, 228), match='read_buffer_size'>, value=<re.Match object; span=(0, 3), match='256'>, recommendation='256', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=256.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.21567395329475403, 0.18666331470012665, 0.26477310061454773, 0.15275011956691742, 0.18013955652713776]
Choice: 2
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(212, 228), match='read_buffer_size'>, value=<re.Match object; span=(0, 3), match='256'>, recommendation='256', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=256.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.024873826652765274, 0.4565011262893677, 0.20721030235290527, 0.16764211654663086, 0.1437726467847824]
Choice: 4
Trying update set global read_buffer_size=256
Trying update set global read_buffer_size=131072
Trying assigning read_buffer_size to 256
Adding assignment ('read_buffer_size', '256') with weight 16
Assignment ('read_buffer_size', '256') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 45
Episode hint counter before: 4
Episode hint counter: 5
Hints per episode: 20
Done flag: False
No warmup - hint counter: 45
{'sequence': '1024', 'labels': ['Use recommendation', 'Increase recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.28181496262550354, 0.2019103467464447, 0.19123758375644684, 0.16487236320972443, 0.1601647138595581]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(101, 117), match='read_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.16487236320972443, 0.1601647138595581, 0.28181496262550354, 0.2019103467464447, 0.19123758375644684]
Choice: 4
Done flag: False
No warmup - hint counter: 45
{'sequence': '1024', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.41018953919410706, 0.21158428490161896, 0.18349096179008484, 0.17497636377811432, 0.019758854061365128]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(101, 117), match='read_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.019758854061365128, 0.41018953919410706, 0.21158428490161896, 0.18349096179008484, 0.17497636377811432]
Choice: 0
Trying update set global read_buffer_size=4096
Trying update set global read_buffer_size=131072
Trying assigning read_buffer_size to 4096
Adding assignment ('read_buffer_size', '4096') with weight 1
Assignment ('read_buffer_size', '4096') extracted from "tmp_table_size = 32
innodb_buffer_pool_size = 512
innodb_log_buffer_size = 8
sort_buffer_size = 1024
read_buffer_size = 1024
read_rnd_buffer_size = 4096
join_buffer_size = 1024
thread_stack = 192
binlog_cache_size = 32
thread_cache_size = 8
table_open_cache = 64
max_connections = 20
PHP:
max_children = 10
start_servers = 2
min_spare_servers = 1
max_spare_servers = 3
Apache:
Timeout = 30
KeepAlive = On
KeepAliveTimeout = 5
MaxKeepAliveRequests = 100
StartServers = 2
MaxSpareThreads = 25
MinSpareThreads = 10
ThreadsPerChild = 25
MaxRequestWorkers = 50 binlog_stmt_cache_size "
Hint counter: 46
Episode hint counter before: 5
Episode hint counter: 6
Hints per episode: 20
Done flag: False
No warmup - hint counter: 46
{'sequence': '8192 minimum value', 'labels': ['Use recommendation', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.3612131178379059, 0.22560782730579376, 0.20574815571308136, 0.12235478311777115, 0.08507612347602844]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(487, 503), match='read_buffer_size'>, value=<re.Match object; span=(0, 4), match='8192'>, recommendation='8192 minimum value', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=8192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.22560782730579376, 0.20574815571308136, 0.3612131178379059, 0.08507612347602844, 0.12235478311777115]
Choice: 3
Done flag: False
No warmup - hint counter: 46
{'sequence': '8192 minimum value', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4772242307662964, 0.21026545763015747, 0.1587396264076233, 0.12528249621391296, 0.028488151729106903]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(487, 503), match='read_buffer_size'>, value=<re.Match object; span=(0, 4), match='8192'>, recommendation='8192 minimum value', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=8192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.028488151729106903, 0.4772242307662964, 0.21026545763015747, 0.1587396264076233, 0.12528249621391296]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(487, 503), match='read_buffer_size'>, value=<re.Match object; span=(0, 4), match='8192'>, recommendation='8192 minimum value', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=8192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.22560782730579376, 0.20574815571308136, 0.3612131178379059, 0.08507612347602844, 0.12235478311777115]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(487, 503), match='read_buffer_size'>, value=<re.Match object; span=(0, 4), match='8192'>, recommendation='8192 minimum value', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=8192.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.028488151729106903, 0.4772242307662964, 0.21026545763015747, 0.1587396264076233, 0.12528249621391296]
Choice: 1
Trying update set global read_buffer_size=16384
Trying update set global read_buffer_size=131072
Trying assigning read_buffer_size to 16384
Adding assignment ('read_buffer_size', '16384') with weight 2
Assignment ('read_buffer_size', '16384') extracted from "You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.
Mysql need's by default 512MB of RAM.
innodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless
Mysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.
sort_buffer_size = 10M
read_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)
The best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size "
Hint counter: 47
Episode hint counter before: 6
Episode hint counter: 7
Hints per episode: 20
Done flag: False
No warmup - hint counter: 47
{'sequence': '128', 'labels': ['Use recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Decrease recommendation', 'Increase recommendation'], 'scores': [0.2555597424507141, 0.19846782088279724, 0.19749031960964203, 0.18246710300445557, 0.16601499915122986]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(108, 122), match='tmp_table_size'>, value=<re.Match object; span=(0, 3), match='128'>, recommendation='128', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=128.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19846782088279724, 0.18246710300445557, 0.2555597424507141, 0.16601499915122986, 0.19749031960964203]
Choice: 3
Done flag: False
No warmup - hint counter: 47
{'sequence': '128', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4462120532989502, 0.20742511749267578, 0.17375534772872925, 0.14886371791362762, 0.023743821308016777]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(108, 122), match='tmp_table_size'>, value=<re.Match object; span=(0, 3), match='128'>, recommendation='128', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=128.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.023743821308016777, 0.4462120532989502, 0.20742511749267578, 0.17375534772872925, 0.14886371791362762]
Choice: 2
Trying update set global tmp_table_size=256
Trying update set global tmp_table_size=16777216
Trying assigning tmp_table_size to 256
Adding assignment ('tmp_table_size', '256') with weight 4
Assignment ('tmp_table_size', '256') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 48
Episode hint counter before: 7
Episode hint counter: 8
Hints per episode: 20
Done flag: False
No warmup - hint counter: 48
{'sequence': '2048', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation', 'Increase recommendation strongly'], 'scores': [0.2764931619167328, 0.20450188219547272, 0.17999409139156342, 0.1695912778377533, 0.1694195717573166]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(262, 278), match='join_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17999409139156342, 0.20450188219547272, 0.2764931619167328, 0.1695912778377533, 0.1694195717573166]
Choice: 3
Done flag: False
No warmup - hint counter: 48
{'sequence': '2048', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465, 0.025632193312048912]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(262, 278), match='join_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025632193312048912, 0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(262, 278), match='join_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17999409139156342, 0.20450188219547272, 0.2764931619167328, 0.1695912778377533, 0.1694195717573166]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(262, 278), match='join_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025632193312048912, 0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465]
Choice: 3
Trying update set global join_buffer_size=8192
Trying update set global join_buffer_size=262144
Trying assigning join_buffer_size to 8192
Adding assignment ('join_buffer_size', '8192') with weight 8
Assignment ('join_buffer_size', '8192') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 49
Episode hint counter before: 8
Episode hint counter: 9
Hints per episode: 20
Done flag: False
No warmup - hint counter: 49
{'sequence': '1024', 'labels': ['Use recommendation', 'Increase recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.28181496262550354, 0.2019103467464447, 0.19123758375644684, 0.16487236320972443, 0.1601647138595581]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(153, 169), match='join_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.16487236320972443, 0.1601647138595581, 0.28181496262550354, 0.2019103467464447, 0.19123758375644684]
Choice: 3
Done flag: False
No warmup - hint counter: 49
{'sequence': '1024', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.41018953919410706, 0.21158428490161896, 0.18349096179008484, 0.17497636377811432, 0.019758854061365128]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(153, 169), match='join_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.019758854061365128, 0.41018953919410706, 0.21158428490161896, 0.18349096179008484, 0.17497636377811432]
Choice: 0
Trying update set global join_buffer_size=2048
Trying update set global join_buffer_size=262144
Trying assigning join_buffer_size to 2048
Adding assignment ('join_buffer_size', '2048') with weight 1
Assignment ('join_buffer_size', '2048') extracted from "tmp_table_size = 32
innodb_buffer_pool_size = 512
innodb_log_buffer_size = 8
sort_buffer_size = 1024
read_buffer_size = 1024
read_rnd_buffer_size = 4096
join_buffer_size = 1024
thread_stack = 192
binlog_cache_size = 32
thread_cache_size = 8
table_open_cache = 64
max_connections = 20
PHP:
max_children = 10
start_servers = 2
min_spare_servers = 1
max_spare_servers = 3
Apache:
Timeout = 30
KeepAlive = On
KeepAliveTimeout = 5
MaxKeepAliveRequests = 100
StartServers = 2
MaxSpareThreads = 25
MinSpareThreads = 10
ThreadsPerChild = 25
MaxRequestWorkers = 50 binlog_stmt_cache_size "
Hint counter: 50
Episode hint counter before: 9
Episode hint counter: 10
Hints per episode: 20
Done flag: False
No warmup - hint counter: 50
{'sequence': '512', 'labels': ['Use recommendation', 'Increase recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Decrease recommendation'], 'scores': [0.2637619078159332, 0.19082817435264587, 0.18853892385959625, 0.18315310776233673, 0.17371782660484314]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(235, 255), match='read_rnd_buffer_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 1
Done flag: False
No warmup - hint counter: 50
{'sequence': '512', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316, 0.022273913025856018]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(235, 255), match='read_rnd_buffer_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(235, 255), match='read_rnd_buffer_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(235, 255), match='read_rnd_buffer_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
Choice: 1
Trying update set global read_rnd_buffer_size=128
Trying update set global read_rnd_buffer_size=262144
Trying assigning read_rnd_buffer_size to 128
Adding assignment ('read_rnd_buffer_size', '128') with weight 2
Assignment ('read_rnd_buffer_size', '128') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 51
Episode hint counter before: 10
Episode hint counter: 11
Hints per episode: 20
Done flag: False
No warmup - hint counter: 51
{'sequence': '4096', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.27467942237854004, 0.20756587386131287, 0.1929043084383011, 0.16955099999904633, 0.1552993506193161]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(125, 145), match='read_rnd_buffer_size'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1929043084383011, 0.20756587386131287, 0.27467942237854004, 0.1552993506193161, 0.16955099999904633]
Choice: 2
Done flag: False
No warmup - hint counter: 51
{'sequence': '4096', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4537006616592407, 0.2012118697166443, 0.17119792103767395, 0.14479291439056396, 0.029096694663167]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(125, 145), match='read_rnd_buffer_size'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.029096694663167, 0.4537006616592407, 0.2012118697166443, 0.17119792103767395, 0.14479291439056396]
Choice: 0
Trying update set global read_rnd_buffer_size=4096
Trying update set global read_rnd_buffer_size=262144
Trying assigning read_rnd_buffer_size to 4096
Adding assignment ('read_rnd_buffer_size', '4096') with weight 1
Assignment ('read_rnd_buffer_size', '4096') extracted from "tmp_table_size = 32
innodb_buffer_pool_size = 512
innodb_log_buffer_size = 8
sort_buffer_size = 1024
read_buffer_size = 1024
read_rnd_buffer_size = 4096
join_buffer_size = 1024
thread_stack = 192
binlog_cache_size = 32
thread_cache_size = 8
table_open_cache = 64
max_connections = 20
PHP:
max_children = 10
start_servers = 2
min_spare_servers = 1
max_spare_servers = 3
Apache:
Timeout = 30
KeepAlive = On
KeepAliveTimeout = 5
MaxKeepAliveRequests = 100
StartServers = 2
MaxSpareThreads = 25
MinSpareThreads = 10
ThreadsPerChild = 25
MaxRequestWorkers = 50 binlog_stmt_cache_size "
Hint counter: 52
Episode hint counter before: 11
Episode hint counter: 12
Hints per episode: 20
Done flag: False
No warmup - hint counter: 52
{'sequence': '2048', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation', 'Increase recommendation strongly'], 'scores': [0.2764931619167328, 0.20450188219547272, 0.17999409139156342, 0.1695912778377533, 0.1694195717573166]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(188, 204), match='sort_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17999409139156342, 0.20450188219547272, 0.2764931619167328, 0.1695912778377533, 0.1694195717573166]
Choice: 0
Done flag: False
No warmup - hint counter: 52
{'sequence': '2048', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465, 0.025632193312048912]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(188, 204), match='sort_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025632193312048912, 0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(188, 204), match='sort_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17999409139156342, 0.20450188219547272, 0.2764931619167328, 0.1695912778377533, 0.1694195717573166]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(188, 204), match='sort_buffer_size'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025632193312048912, 0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465]
Choice: 3
Trying update set global sort_buffer_size=1024
Trying update set global sort_buffer_size=2097152
Trying assigning sort_buffer_size to 1024
Adding assignment ('sort_buffer_size', '1024') with weight 8
Assignment ('sort_buffer_size', '1024') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 53
Episode hint counter before: 12
Episode hint counter: 13
Hints per episode: 20
Done flag: False
No warmup - hint counter: 53
{'sequence': '1024', 'labels': ['Use recommendation', 'Increase recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation'], 'scores': [0.28181496262550354, 0.2019103467464447, 0.19123758375644684, 0.16487236320972443, 0.1601647138595581]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(77, 93), match='sort_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.16487236320972443, 0.1601647138595581, 0.28181496262550354, 0.2019103467464447, 0.19123758375644684]
Choice: 1
Done flag: False
No warmup - hint counter: 53
{'sequence': '1024', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.41018953919410706, 0.21158428490161896, 0.18349096179008484, 0.17497636377811432, 0.019758854061365128]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(77, 93), match='sort_buffer_size'>, value=<re.Match object; span=(0, 4), match='1024'>, recommendation='1024', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=1024.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.019758854061365128, 0.41018953919410706, 0.21158428490161896, 0.18349096179008484, 0.17497636377811432]
Choice: 4
Trying update set global sort_buffer_size=512
Trying update set global sort_buffer_size=2097152
Trying assigning sort_buffer_size to 512
Adding assignment ('sort_buffer_size', '512') with weight 16
Assignment ('sort_buffer_size', '512') extracted from "tmp_table_size = 32
innodb_buffer_pool_size = 512
innodb_log_buffer_size = 8
sort_buffer_size = 1024
read_buffer_size = 1024
read_rnd_buffer_size = 4096
join_buffer_size = 1024
thread_stack = 192
binlog_cache_size = 32
thread_cache_size = 8
table_open_cache = 64
max_connections = 20
PHP:
max_children = 10
start_servers = 2
min_spare_servers = 1
max_spare_servers = 3
Apache:
Timeout = 30
KeepAlive = On
KeepAliveTimeout = 5
MaxKeepAliveRequests = 100
StartServers = 2
MaxSpareThreads = 25
MinSpareThreads = 10
ThreadsPerChild = 25
MaxRequestWorkers = 50 binlog_stmt_cache_size "
Hint counter: 54
Episode hint counter before: 13
Episode hint counter: 14
Hints per episode: 20
Done flag: False
No warmup - hint counter: 54
{'sequence': '10M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.2938447892665863, 0.20927472412586212, 0.174553781747818, 0.16246436536312103, 0.15986230969429016]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(464, 480), match='sort_buffer_size'>, value=<re.Match object; span=(0, 3), match='10M'>, recommendation='10M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=10.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.174553781747818, 0.15986230969429016, 0.2938447892665863, 0.16246436536312103, 0.20927472412586212]
Choice: 2
Done flag: False
No warmup - hint counter: 54
{'sequence': '10M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4279082417488098, 0.2015354484319687, 0.1824634075164795, 0.1726716011762619, 0.015421286225318909]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(464, 480), match='sort_buffer_size'>, value=<re.Match object; span=(0, 3), match='10M'>, recommendation='10M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=10.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.015421286225318909, 0.4279082417488098, 0.2015354484319687, 0.1824634075164795, 0.1726716011762619]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(464, 480), match='sort_buffer_size'>, value=<re.Match object; span=(0, 3), match='10M'>, recommendation='10M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=10.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.174553781747818, 0.15986230969429016, 0.2938447892665863, 0.16246436536312103, 0.20927472412586212]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(464, 480), match='sort_buffer_size'>, value=<re.Match object; span=(0, 3), match='10M'>, recommendation='10M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=10.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.015421286225318909, 0.4279082417488098, 0.2015354484319687, 0.1824634075164795, 0.1726716011762619]
Choice: 1
Trying update set global sort_buffer_size=2097152
Trying update set global sort_buffer_size=2097152
Trying assigning sort_buffer_size to 2M
Adding assignment ('sort_buffer_size', '2M') with weight 2
Assignment ('sort_buffer_size', '2M') extracted from "You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.
Mysql need's by default 512MB of RAM.
innodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless
Mysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.
sort_buffer_size = 10M
read_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)
The best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size "
Hint counter: 55
Episode hint counter before: 14
Episode hint counter: 15
Hints per episode: 20
Done flag: False
No warmup - hint counter: 55
{'sequence': '64', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation'], 'scores': [0.2561816871166229, 0.20899151265621185, 0.20224447548389435, 0.18172581493854523, 0.15085653960704803]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(305, 322), match='binlog_cache_size'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20224447548389435, 0.18172581493854523, 0.2561816871166229, 0.15085653960704803, 0.20899151265621185]
Choice: 0
Done flag: False
No warmup - hint counter: 55
{'sequence': '64', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.460867315530777, 0.20801353454589844, 0.16750642657279968, 0.13584065437316895, 0.027772024273872375]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(305, 322), match='binlog_cache_size'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.027772024273872375, 0.460867315530777, 0.20801353454589844, 0.16750642657279968, 0.13584065437316895]
Choice: 4
Trying update set global binlog_cache_size=16
Trying update set global binlog_cache_size=32768
Trying assigning binlog_cache_size to 16
Adding assignment ('binlog_cache_size', '16') with weight 16
Assignment ('binlog_cache_size', '16') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 56
Episode hint counter before: 15
Episode hint counter: 16
Hints per episode: 20
Done flag: False
No warmup - hint counter: 56
{'sequence': '32', 'labels': ['Use recommendation', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.26641327142715454, 0.19402799010276794, 0.19214743375778198, 0.1895178258419037, 0.15789352357387543]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(160, 182), match='innodb_log_buffer_size'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19402799010276794, 0.19214743375778198, 0.26641327142715454, 0.15789352357387543, 0.1895178258419037]
Choice: 3
Done flag: False
No warmup - hint counter: 56
{'sequence': '32', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.46463149785995483, 0.20161142945289612, 0.1676764339208603, 0.13865259289741516, 0.027428098022937775]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(160, 182), match='innodb_log_buffer_size'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.027428098022937775, 0.46463149785995483, 0.20161142945289612, 0.1676764339208603, 0.13865259289741516]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(160, 182), match='innodb_log_buffer_size'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19402799010276794, 0.19214743375778198, 0.26641327142715454, 0.15789352357387543, 0.1895178258419037]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(160, 182), match='innodb_log_buffer_size'>, value=<re.Match object; span=(0, 2), match='32'>, recommendation='32', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=32.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.027428098022937775, 0.46463149785995483, 0.20161142945289612, 0.1676764339208603, 0.13865259289741516]
Choice: 0
Trying update set global innodb_log_buffer_size=64
Exception during update: Variable 'innodb_log_buffer_size' is a read only variable
Trying update set global innodb_log_buffer_size=16777216
Exception during update: Variable 'innodb_log_buffer_size' is a read only variable
Trying assigning innodb_log_buffer_size to 64
Assignment ('innodb_log_buffer_size', '64') was rejected
Hint counter: 57
Episode hint counter before: 16
Episode hint counter: 17
Hints per episode: 20
Done flag: False
No warmup - hint counter: 57
{'sequence': '8', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Increase recommendation', 'Decrease recommendation'], 'scores': [0.266186386346817, 0.2173980474472046, 0.1844906359910965, 0.17978301644325256, 0.15214183926582336]}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(50, 72), match='innodb_log_buffer_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1844906359910965, 0.15214183926582336, 0.266186386346817, 0.17978301644325256, 0.2173980474472046]
Choice: 2
Done flag: False
No warmup - hint counter: 57
{'sequence': '8', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758, 0.026791756972670555]}
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(50, 72), match='innodb_log_buffer_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026791756972670555, 0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758]
Choice: 4
Trying update set global innodb_log_buffer_size=8
Exception during update: Variable 'innodb_log_buffer_size' is a read only variable
Trying update set global innodb_log_buffer_size=16777216
Exception during update: Variable 'innodb_log_buffer_size' is a read only variable
Trying assigning innodb_log_buffer_size to 8
Assignment ('innodb_log_buffer_size', '8') was rejected
Hint counter: 58
Episode hint counter before: 17
Episode hint counter: 18
Hints per episode: 20
Done flag: False
No warmup - hint counter: 58
{'sequence': '500\n', 'labels': ['Use recommendation', 'Decrease recommendation', 'Increase recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly'], 'scores': [0.2640220820903778, 0.22890612483024597, 0.18302948772907257, 0.18276037275791168, 0.14128202199935913]}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(658, 678), match='max_user_connections'>, value=<re.Match object; span=(0, 3), match='500'>, recommendation='500\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=500.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18276037275791168, 0.22890612483024597, 0.2640220820903778, 0.18302948772907257, 0.14128202199935913]
Choice: 1
Done flag: False
No warmup - hint counter: 58
{'sequence': '500\n', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.454731285572052, 0.19743657112121582, 0.17194347083568573, 0.14901047945022583, 0.026878148317337036]}
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(658, 678), match='max_user_connections'>, value=<re.Match object; span=(0, 3), match='500'>, recommendation='500\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=500.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026878148317337036, 0.454731285572052, 0.19743657112121582, 0.17194347083568573, 0.14901047945022583]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(658, 678), match='max_user_connections'>, value=<re.Match object; span=(0, 3), match='500'>, recommendation='500\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=500.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18276037275791168, 0.22890612483024597, 0.2640220820903778, 0.18302948772907257, 0.14128202199935913]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(658, 678), match='max_user_connections'>, value=<re.Match object; span=(0, 3), match='500'>, recommendation='500\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=500.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)[Restart] MariaDB server shut down!
[Restart] MariaDB server restarted!

Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026878148317337036, 0.454731285572052, 0.19743657112121582, 0.17194347083568573, 0.14901047945022583]
Choice: 3
Trying update set global max_user_connections=250
Exception during update: The MariaDB server is running with the --max-user-connections=0 option so it cannot execute this statement
Trying update set global max_user_connections=0
Exception during update: The MariaDB server is running with the --max-user-connections=0 option so it cannot execute this statement
Trying assigning max_user_connections to 250
Assignment ('max_user_connections', '250') was rejected
Hint counter: 59
Episode hint counter before: 18
Episode hint counter: 19
Hints per episode: 20
Done flag: False
No warmup - hint counter: 59
{'sequence': '50M', 'labels': ['Use recommendation', 'Decrease recommendation', 'Decrease recommendation strongly', 'Increase recommendation strongly', 'Increase recommendation'], 'scores': [0.2992051839828491, 0.18822643160820007, 0.18395723402500153, 0.1785123348236084, 0.15009883046150208]}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(56, 73), match='query_cache_limit'>, value=<re.Match object; span=(0, 3), match='50M'>, recommendation='50M', passage='#innodb_force_recovery =6\n# * Query Cache Configuration\nquery_cache_limit\n= 50M\nquery_cache_size\n= 300M\n# * Logging and Replication\n# * InnoDB\n# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\n# Read the manual for more InnoDB related options. There are many!\n# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.\n#skip-innodb\ninnodb_buffer_pool_size=16777216\ninnodb_file_per_table\nApache configuration\nAdd that to your configuration file.\n<IfModule mod_gzip.c>\nmod_gzip_on yes\nmod_gzip_dechunk yes\nmod_gzip_keep_workfiles No\nmod_gzip_can_negotiate yes\nmod_gzip_update_static No innodb_ft_result_cache_limit ', float_val=50.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18395723402500153, 0.18822643160820007, 0.2992051839828491, 0.15009883046150208, 0.1785123348236084]
Choice: 3
Done flag: False
No warmup - hint counter: 59
{'sequence': '50M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4569627642631531, 0.20047272741794586, 0.17280185222625732, 0.14727100729942322, 0.022491659969091415]}
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(56, 73), match='query_cache_limit'>, value=<re.Match object; span=(0, 3), match='50M'>, recommendation='50M', passage='#innodb_force_recovery =6\n# * Query Cache Configuration\nquery_cache_limit\n= 50M\nquery_cache_size\n= 300M\n# * Logging and Replication\n# * InnoDB\n# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.\n# Read the manual for more InnoDB related options. There are many!\n# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.\n#skip-innodb\ninnodb_buffer_pool_size=16777216\ninnodb_file_per_table\nApache configuration\nAdd that to your configuration file.\n<IfModule mod_gzip.c>\nmod_gzip_on yes\nmod_gzip_dechunk yes\nmod_gzip_keep_workfiles No\nmod_gzip_can_negotiate yes\nmod_gzip_update_static No innodb_ft_result_cache_limit ', float_val=50.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022491659969091415, 0.4569627642631531, 0.20047272741794586, 0.17280185222625732, 0.14727100729942322]
Choice: 1
Trying update set global query_cache_limit=104857600
Trying update set global query_cache_limit=1048576
Trying assigning query_cache_limit to 100M
Adding assignment ('query_cache_limit', '100M') with weight 2
Assignment ('query_cache_limit', '100M') extracted from "#innodb_force_recovery =6
# * Query Cache Configuration
query_cache_limit
= 50M
query_cache_size
= 300M
# * Logging and Replication
# * InnoDB
# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.
# Read the manual for more InnoDB related options. There are many!
# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.
#skip-innodb
innodb_buffer_pool_size=16777216
innodb_file_per_table
Apache configuration
Add that to your configuration file.
<IfModule mod_gzip.c>
mod_gzip_on yes
mod_gzip_dechunk yes
mod_gzip_keep_workfiles No
mod_gzip_can_negotiate yes
mod_gzip_update_static No innodb_ft_result_cache_limit "
Hint counter: 60
Episode hint counter before: 19
Episode hint counter: 20
Hints per episode: 20
Episode finished!
Done flag: True
Finalizing episode!
Weighted hints: defaultdict(<function NlpTuningEnv._finalize_episode.<locals>.<lambda> at 0x7f4561ebe280>, {('max_connections', '75'): 16, ('max_connect_errors', '4000000'): 8, ('innodb_old_blocks_time', '250'): 8, ('read_buffer_size', '256'): 16, ('read_buffer_size', '4096'): 1, ('read_buffer_size', '16384'): 2, ('tmp_table_size', '256'): 4, ('join_buffer_size', '8192'): 8, ('join_buffer_size', '2048'): 1, ('read_rnd_buffer_size', '128'): 2, ('read_rnd_buffer_size', '4096'): 1, ('sort_buffer_size', '1024'): 8, ('sort_buffer_size', '512'): 16, ('sort_buffer_size', '2M'): 2, ('binlog_cache_size', '16'): 16, ('query_cache_limit', '100M'): 2})
Selected configurations: [{'max_connections': '75', 'max_connect_errors': '4000000', 'innodb_old_blocks_time': '250', 'read_buffer_size': '256', 'tmp_table_size': '256', 'join_buffer_size': '8192', 'read_rnd_buffer_size': '128', 'sort_buffer_size': '1024', 'binlog_cache_size': '16', 'query_cache_limit': '100M'}, {'max_connections': '75', 'max_connect_errors': '4000000', 'innodb_old_blocks_time': '250', 'read_buffer_size': '16384', 'tmp_table_size': '256', 'join_buffer_size': '2048', 'read_rnd_buffer_size': '4096', 'sort_buffer_size': '2M', 'binlog_cache_size': '16', 'query_cache_limit': '100M'}]
Disconnecting ...
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Trying update update mariadb.server_cost set cost_value = NULL
Exception during update: Table 'mariadb.server_cost' doesn't exist
Trying update update mariadb.engine_cost set cost_value = NULL
Exception during update: Table 'mariadb.engine_cost' doesn't exist
Trying configuration: {'max_connections': '75', 'max_connect_errors': '4000000', 'innodb_old_blocks_time': '250', 'read_buffer_size': '256', 'tmp_table_size': '256', 'join_buffer_size': '8192', 'read_rnd_buffer_size': '128', 'sort_buffer_size': '1024', 'binlog_cache_size': '16', 'query_cache_limit': '100M'}
Trying update set global max_connections=75
Trying update set global max_connect_errors=4000000
Trying update set global innodb_old_blocks_time=250
Trying update set global read_buffer_size=256
Trying update set global tmp_table_size=256
Trying update set global join_buffer_size=8192
Trying update set global read_rnd_buffer_size=128
Trying update set global sort_buffer_size=1024
Trying update set global binlog_cache_size=16
Trying update set global query_cache_limit=104857600
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57451.920654296875
Achieved with configuration: {}
Reward -222.429443359375 with {'max_connections': '75', 'max_connect_errors': '4000000', 'innodb_old_blocks_time': '250', 'read_buffer_size': '256', 'tmp_table_size': '256', 'join_buffer_size': '8192', 'read_rnd_buffer_size': '128', 'sort_buffer_size': '1024', 'binlog_cache_size': '16', 'query_cache_limit': '100M'}[Restart] MariaDB server shut down!
[Restart] MariaDB server restarted!

Disconnecting ...
Trying to connect to tpch with user kaltenec
Trying update set session max_execution_time = 1500000
Exception during update: Unknown system variable 'max_execution_time'
Trying update update mariadb.server_cost set cost_value = NULL
Exception during update: Table 'mariadb.server_cost' doesn't exist
Trying update update mariadb.engine_cost set cost_value = NULL
Exception during update: Table 'mariadb.engine_cost' doesn't exist
Trying configuration: {'max_connections': '75', 'max_connect_errors': '4000000', 'innodb_old_blocks_time': '250', 'read_buffer_size': '16384', 'tmp_table_size': '256', 'join_buffer_size': '2048', 'read_rnd_buffer_size': '4096', 'sort_buffer_size': '2M', 'binlog_cache_size': '16', 'query_cache_limit': '100M'}
Trying update set global max_connections=75
Trying update set global max_connect_errors=4000000
Trying update set global innodb_old_blocks_time=250
Trying update set global read_buffer_size=16384
Trying update set global tmp_table_size=256
Trying update set global join_buffer_size=2048
Trying update set global read_rnd_buffer_size=4096
Trying update set global sort_buffer_size=2097152
Trying update set global binlog_cache_size=16
Trying update set global query_cache_limit=104857600
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57674.35009765625
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 256, 'tmp_table_size': 256, 'join_buffer_size': 8192, 'read_rnd_buffer_size': 128, 'sort_buffer_size': 1024, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Reward -474.86328125 with {'max_connections': '75', 'max_connect_errors': '4000000', 'innodb_old_blocks_time': '250', 'read_buffer_size': '16384', 'tmp_table_size': '256', 'join_buffer_size': '2048', 'read_rnd_buffer_size': '4096', 'sort_buffer_size': '2M', 'binlog_cache_size': '16', 'query_cache_limit': '100M'}
Obtained 0 by configuration {}
Achieved unscaled reward of 0 using {}.
No warmup - hint counter: 60
{'sequence': '16M', 'labels': ['Use recommendation', 'Increase recommendation strongly', 'Decrease recommendation strongly', 'Decrease recommendation', 'Increase recommendation'], 'scores': [0.2692857086658478, 0.20589323341846466, 0.1848161667585373, 0.17571277916431427, 0.1642920821905136]}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(439, 457), match='max_allowed_packet'>, value=<re.Match object; span=(0, 3), match='16M'>, recommendation='16M', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=16.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1848161667585373, 0.17571277916431427, 0.2692857086658478, 0.1642920821905136, 0.20589323341846466]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(439, 457), match='max_allowed_packet'>, value=<re.Match object; span=(0, 3), match='16M'>, recommendation='16M', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=16.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1848161667585373, 0.17571277916431427, 0.2692857086658478, 0.1642920821905136, 0.20589323341846466]
Choice: 4
Done flag: False
No warmup - hint counter: 60
{'sequence': '16M', 'labels': ['This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.', 'This hint is not important.'], 'scores': [0.4479617476463318, 0.20477642118930817, 0.16790476441383362, 0.15918168425559998, 0.020175406709313393]}
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(439, 457), match='max_allowed_packet'>, value=<re.Match object; span=(0, 3), match='16M'>, recommendation='16M', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=16.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.020175406709313393, 0.4479617476463318, 0.20477642118930817, 0.16790476441383362, 0.15918168425559998]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(439, 457), match='max_allowed_packet'>, value=<re.Match object; span=(0, 3), match='16M'>, recommendation='16M', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=16.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1848161667585373, 0.17571277916431427, 0.2692857086658478, 0.1642920821905136, 0.20589323341846466]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(439, 457), match='max_allowed_packet'>, value=<re.Match object; span=(0, 3), match='16M'>, recommendation='16M', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=16.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.020175406709313393, 0.4479617476463318, 0.20477642118930817, 0.16790476441383362, 0.15918168425559998]
Choice: 0
Trying update set global max_allowed_packet=8388608
Trying update set global max_allowed_packet=16777216
Trying assigning max_allowed_packet to 8M
Adding assignment ('max_allowed_packet', '8M') with weight 1
Assignment ('max_allowed_packet', '8M') extracted from "# It has been reported that passwords should be enclosed with ticks/quotes
# escpecially if they contain "#" chars...
# Remember to edit /etc/mysql/debian.cnf when changing the socket location.
# Here is entries for some specific programs
# The following values assume you have at least 32M ram
# This was formally known as [safe_mysqld]. Both versions are currently parsed.
[mysqld]
# * Basic Settings
# * Fine Tuning
key_buffer		= 2000M
max_allowed_packet	= 16M
thread_stack		= 128K
thread_cache_size	= 8
# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam-recover		= BACKUP
max_connections
= 500
max_user_connections
= 500
#table_cache
= 64
thread_concurrency
= 300
table_cache
= 30000
open_files_limit
= 65000 max_password_errors "
Hint counter: 61
Episode hint counter before: 0
Episode hint counter: 1
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(1172, 1189), match='thread_cache_size'>, value=<re.Match object; span=(18, 21), match='32M'>, recommendation='key_buffer_size = 32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.13674546778202057, 0.10554523020982742, 0.32319846749305725, 0.2051987200975418, 0.22931212186813354]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=11, param=<re.Match object; span=(1172, 1189), match='thread_cache_size'>, value=<re.Match object; span=(18, 21), match='32M'>, recommendation='key_buffer_size = 32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.015714144334197044, 0.5137114524841309, 0.20350034534931183, 0.15223704278469086, 0.11483711004257202]
Choice: 0
Trying update set global thread_cache_size=16777216
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 16M
Adding assignment ('thread_cache_size', '16M') with weight 1
Assignment ('thread_cache_size', '16M') extracted from "mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema='yourmoodledbname';
Set the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:
thread cache utilization (%) = (threads_created / connections) * 100
The key buffer can improve the access speed to Moodle's SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:
key_read / key_read_requests < 0.01
key_write / key_write_requests <= 1.0
Set the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size "
Hint counter: 1
Episode hint counter before: 1
Episode hint counter: 2
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(568, 585), match='thread_cache_size'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16 or so', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18521332740783691, 0.1852453649044037, 0.28911828994750977, 0.15424436330795288, 0.18617865443229675]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(568, 585), match='thread_cache_size'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16 or so', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.028563059866428375, 0.50733482837677, 0.1963784247636795, 0.14746752381324768, 0.12025613337755203]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(568, 585), match='thread_cache_size'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16 or so', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18521332740783691, 0.1852453649044037, 0.28911828994750977, 0.15424436330795288, 0.18617865443229675]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(568, 585), match='thread_cache_size'>, value=<re.Match object; span=(0, 2), match='16'>, recommendation='16 or so', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=16.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.028563059866428375, 0.50733482837677, 0.1963784247636795, 0.14746752381324768, 0.12025613337755203]
Choice: 4
Trying update set global thread_cache_size=32
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 32
Adding assignment ('thread_cache_size', '32') with weight 16
Assignment ('thread_cache_size', '32') extracted from "Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).
Adjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.
Adjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.
Other Adjustments from the Inter-webs:
I adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size "
Hint counter: 2
Episode hint counter before: 2
Episode hint counter: 3
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(459, 476), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1844906359910965, 0.15214183926582336, 0.266186386346817, 0.17978301644325256, 0.2173980474472046]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(459, 476), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026791756972670555, 0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758]
Choice: 0
Trying update set global thread_cache_size=2
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 2
Adding assignment ('thread_cache_size', '2') with weight 1
Assignment ('thread_cache_size', '2') extracted from "# MySQL Server Configuration
# Directories and File Paths
datadir=/data/mysql
socket=/data/mysql/mysql.sock
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
# Logging and Replication
skip-log-bin=true
# Performance and Optimization
skip_name_resolve
skip-performance-schema
optimizer_switch = 'index_condition_pushdown=off'
tmp-table-size = 96M
max-heap-table-size = 96M
key_buffer_size = 64M
# Connections and Threads
max_connections = 1250
thread_cache_size = 8
max_allowed_packet = 64M
# InnoDB Configuration
innodb-log-file-size = 128M
innodb-log-buffer-size = 128M wsrep_mysql_replication_bundle "
Hint counter: 3
Episode hint counter before: 3
Episode hint counter: 4
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(219, 236), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1844906359910965, 0.15214183926582336, 0.266186386346817, 0.17978301644325256, 0.2173980474472046]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(219, 236), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026791756972670555, 0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(219, 236), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1844906359910965, 0.15214183926582336, 0.266186386346817, 0.17978301644325256, 0.2173980474472046]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(219, 236), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.026791756972670555, 0.46210938692092896, 0.20298469066619873, 0.1625889241695404, 0.145525261759758]
Choice: 1
Trying update set global thread_cache_size=16
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 16
Adding assignment ('thread_cache_size', '16') with weight 2
Assignment ('thread_cache_size', '16') extracted from "tmp_table_size = 32
innodb_buffer_pool_size = 512
innodb_log_buffer_size = 8
sort_buffer_size = 1024
read_buffer_size = 1024
read_rnd_buffer_size = 4096
join_buffer_size = 1024
thread_stack = 192
binlog_cache_size = 32
thread_cache_size = 8
table_open_cache = 64
max_connections = 20
PHP:
max_children = 10
start_servers = 2
min_spare_servers = 1
max_spare_servers = 3
Apache:
Timeout = 30
KeepAlive = On
KeepAliveTimeout = 5
MaxKeepAliveRequests = 100
StartServers = 2
MaxSpareThreads = 25
MinSpareThreads = 10
ThreadsPerChild = 25
MaxRequestWorkers = 50 binlog_stmt_cache_size "
Hint counter: 4
Episode hint counter before: 4
Episode hint counter: 5
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=63, param=<re.Match object; span=(485, 502), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18013985455036163, 0.22041219472885132, 0.28335413336753845, 0.17767491936683655, 0.13841883838176727]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=63, param=<re.Match object; span=(485, 502), match='thread_cache_size'>, value=<re.Match object; span=(0, 1), match='8'>, recommendation='8\n', passage='# It has been reported that passwords should be enclosed with ticks/quotes\n# escpecially if they contain "#" chars...\n# Remember to edit /etc/mysql/debian.cnf when changing the socket location.\n# Here is entries for some specific programs\n# The following values assume you have at least 32M ram\n# This was formally known as [safe_mysqld]. Both versions are currently parsed.\n[mysqld]\n# * Basic Settings\n# * Fine Tuning\nkey_buffer\t\t= 2000M\nmax_allowed_packet\t= 16M\nthread_stack\t\t= 128K\nthread_cache_size\t= 8\n# This replaces the startup script and checks MyISAM tables if needed\n# the first time they are touched\nmyisam-recover\t\t= BACKUP\nmax_connections\n= 500\nmax_user_connections\n= 500\n#table_cache\n= 64\nthread_concurrency\n= 300\ntable_cache\n= 30000\nopen_files_limit\n= 65000 max_password_errors ', float_val=8.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02484126389026642, 0.46155181527137756, 0.19460640847682953, 0.1654755026102066, 0.15352493524551392]
Choice: 3
Trying update set global thread_cache_size=16
Trying update set global thread_cache_size=100
Trying assigning thread_cache_size to 16
Adding assignment ('thread_cache_size', '16') with weight 8
Assignment ('thread_cache_size', '16') extracted from "# It has been reported that passwords should be enclosed with ticks/quotes
# escpecially if they contain "#" chars...
# Remember to edit /etc/mysql/debian.cnf when changing the socket location.
# Here is entries for some specific programs
# The following values assume you have at least 32M ram
# This was formally known as [safe_mysqld]. Both versions are currently parsed.
[mysqld]
# * Basic Settings
# * Fine Tuning
key_buffer		= 2000M
max_allowed_packet	= 16M
thread_stack		= 128K
thread_cache_size	= 8
# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam-recover		= BACKUP
max_connections
= 500
max_user_connections
= 500
#table_cache
= 64
thread_concurrency
= 300
table_cache
= 30000
open_files_limit
= 65000 max_password_errors "
Hint counter: 5
Episode hint counter before: 5
Episode hint counter: 6
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(9, 11), match='70'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=70.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.08853290230035782, 0.09777051955461502, 0.3303515911102295, 0.27067556977272034, 0.21266934275627136]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(9, 11), match='70'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=70.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.018283352255821228, 0.511786937713623, 0.18739773333072662, 0.157210573554039, 0.1253214031457901]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(9, 11), match='70'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=70.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.08853290230035782, 0.09777051955461502, 0.3303515911102295, 0.27067556977272034, 0.21266934275627136]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(9, 11), match='70'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=70.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.018283352255821228, 0.511786937713623, 0.18739773333072662, 0.157210573554039, 0.1253214031457901]
Choice: 4
Trying update set global innodb_buffer_pool_size=17
Exception during update: Variable 'innodb_buffer_pool_size' can't be set to the value of '17'
Trying update set global innodb_buffer_pool_size=134217728
Trying assigning innodb_buffer_pool_size to 17
Assignment ('innodb_buffer_pool_size', '17') was rejected
Hint counter: 6
Episode hint counter before: 6
Episode hint counter: 7
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(12, 15), match='80%'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=0.8, val_unit='', hint_type=<HintType.RAM_RATIO: 1>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.08853290230035782, 0.09777051955461502, 0.3303515911102295, 0.27067556977272034, 0.21266934275627136]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=1, param=<re.Match object; span=(572, 595), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(12, 15), match='80%'>, recommendation='at least 70-80% of the available memory', passage='Update MariaDB to the latest version\nMariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.\nServer-specific Performance Tips\nConfiguring InnoDB Variables\nInnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:\ninnodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.\ninnodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.\nTweak Query Cache Variables\nMariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth ', float_val=0.8, val_unit='', hint_type=<HintType.RAM_RATIO: 1>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.018283352255821228, 0.511786937713623, 0.18739773333072662, 0.157210573554039, 0.1253214031457901]
Choice: 3
Trying update set global innodb_buffer_pool_size=34359738368
Trying update set global innodb_buffer_pool_size=134217728
Exception during update: Another buffer pool resize is already in progress.
Trying assigning innodb_buffer_pool_size to 34359738368
Adding assignment ('innodb_buffer_pool_size', '34359738368') with weight 8
Assignment ('innodb_buffer_pool_size', '34359738368') extracted from "Update MariaDB to the latest version
MariaDB receives regular updates and improvements, so keeping your installation up-to-date is an essential step in getting the best performance possible. New releases might include feature enhancements, bug fixes, and security patches, all of which contribute to better overall performance.
Server-specific Performance Tips
Configuring InnoDB Variables
InnoDB is the default storage engine for MariaDB, and adjusting its settings can significantly improve the performance of your server. Some critical InnoDB settings to consider are:
innodb_buffer_pool_size: Allocate more memory to the InnoDB buffer pool to reduce disk I/O. Typically, this value should be set to at least 70-80% of the available memory.
innodb_log_file_size: A larger log file size reduces the need for frequent log rotations, thus improving write performance. However, a log size that is too large might slow down the recovery process after a crash.
Tweak Query Cache Variables
MariaDB’s query cache is a feature that stores the results of executed queries in memory, allowing the server to serve identical queries without re-executing them. optimizer_extra_pruning_depth "
Hint counter: 7
Episode hint counter before: 7
Episode hint counter: 8
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(186, 209), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='23G'>, recommendation='23G', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=23.0, val_unit='G', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18098114430904388, 0.19943229854106903, 0.23072713613510132, 0.20386049151420593, 0.18499886989593506]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(186, 209), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='23G'>, recommendation='23G', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=23.0, val_unit='G', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01924968883395195, 0.4707958996295929, 0.1976868361234665, 0.166013702750206, 0.1462538093328476]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(186, 209), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='23G'>, recommendation='23G', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=23.0, val_unit='G', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18098114430904388, 0.19943229854106903, 0.23072713613510132, 0.20386049151420593, 0.18499886989593506]
Choice: 2
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(186, 209), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='23G'>, recommendation='23G', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=23.0, val_unit='G', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01924968883395195, 0.4707958996295929, 0.1976868361234665, 0.166013702750206, 0.1462538093328476]
Choice: 2
Trying update set global innodb_buffer_pool_size=24696061952
Exception during update: Another buffer pool resize is already in progress.
Trying update set global innodb_buffer_pool_size=34359738368
Exception during update: Another buffer pool resize is already in progress.
Trying assigning innodb_buffer_pool_size to 23G
Assignment ('innodb_buffer_pool_size', '23G') was rejected
Hint counter: 8
Episode hint counter before: 8
Episode hint counter: 9
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(20, 43), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(20, 43), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
Choice: 3
Trying update set global innodb_buffer_pool_size=256
Exception during update: Variable 'innodb_buffer_pool_size' can't be set to the value of '256'
Trying update set global innodb_buffer_pool_size=34359738368
Exception during update: Another buffer pool resize is already in progress.
Trying assigning innodb_buffer_pool_size to 256
Assignment ('innodb_buffer_pool_size', '256') was rejected
Hint counter: 9
Episode hint counter before: 9
Episode hint counter: 10
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(224, 247), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 4), match='180M'>, recommendation='180M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=180.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20210203528404236, 0.19127501547336578, 0.2364121675491333, 0.1605609506368637, 0.20964983105659485]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(224, 247), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 4), match='180M'>, recommendation='180M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=180.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.020154068246483803, 0.43662428855895996, 0.20483645796775818, 0.17478047311306, 0.1636047512292862]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(224, 247), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 4), match='180M'>, recommendation='180M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=180.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20210203528404236, 0.19127501547336578, 0.2364121675491333, 0.1605609506368637, 0.20964983105659485]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(224, 247), match='innodb_buffer_pool_size'>, value=<re.Match object; span=(0, 4), match='180M'>, recommendation='180M', passage="You should gradually move toward nginx the problem with apache is the memory you need atleast 2GB of RAM to use it, after all the minimum requirements are 4GB and thats only for apache.\nMysql need's by default 512MB of RAM.\ninnodb_buffer_pool_size = 180M with this settings you can limit the RAM ussage, a high value is pointless\nMysql is runing on a local server so if you have a ssd on it the access is pretty fast there is no point to use your ram for nothing.\nsort_buffer_size = 10M\nread_buffer_size = 10M ( always on mysql configuration use M (MB) because if you use 1024 is translated to bytes and the sort_buffer_size have a minimum value of 32768 bytes so that's being said, 1024 is a useless number used two times in the above configuration, read_buffer_size have a 8192 minimum value)\nThe best configuration is your own, just modify the things to suit your server, allways ping your website when is not under a CDN ( like Cloudflare) that is useless because you don't ping your server so you don't know the real numbers, using cache to serve static files that again improve the load on server and you can see above the performance is not great for dynamic content so you should modify the settings and improve the performance of the most used service on the VPS that would be apache. max_binlog_stmt_cache_size ", float_val=180.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.020154068246483803, 0.43662428855895996, 0.20483645796775818, 0.17478047311306, 0.1636047512292862]
Choice: 4
Trying update set global innodb_buffer_pool_size=94371840
Exception during update: Another buffer pool resize is already in progress.
Trying update set global innodb_buffer_pool_size=34359738368
Exception during update: Another buffer pool resize is already in progress.
Trying assigning innodb_buffer_pool_size to 90M
Assignment ('innodb_buffer_pool_size', '90M') was rejected
Hint counter: 10
Episode hint counter before: 10
Episode hint counter: 11
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(551, 566), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='32M'>, recommendation='32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18291717767715454, 0.17137980461120605, 0.30023810267448425, 0.15002238750457764, 0.19544251263141632]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=11, param=<re.Match object; span=(551, 566), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='32M'>, recommendation='32M', passage='mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema=\'yourmoodledbname\';\nSet the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:\nthread cache utilization (%) = (threads_created / connections) * 100\nThe key buffer can improve the access speed to Moodle\'s SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:\nkey_read / key_read_requests < 0.01\nkey_write / key_write_requests <= 1.0\nSet the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size ', float_val=32.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.02246321365237236, 0.4591565728187561, 0.2058204859495163, 0.16968268156051636, 0.14287708699703217]
Choice: 0
Trying update set global key_buffer_size=67108864
Trying update set global key_buffer_size=134217728
Trying assigning key_buffer_size to 64M
Adding assignment ('key_buffer_size', '64M') with weight 1
Assignment ('key_buffer_size', '64M') extracted from "mysql>SELECT COUNT(table_name) FROM information_schema.tables WHERE table_schema='yourmoodledbname';
Set the thread cache correctly. Adjust the value so that your thread cache utilization is as close to 100% as possible by this formula:
thread cache utilization (%) = (threads_created / connections) * 100
The key buffer can improve the access speed to Moodle's SELECT queries. The correct size depends on the size of the index files (.myi) and in Moodle 1.6 or later (without any additional modules and plugins), the recommendation for this value is key_buffer_size = 32M. Ideally you want the database to be reading once from the disk for every 100 requests so monitor that the value is suitable for your install by adjusting the value of key_buffer_size so that the following formulas are true:
key_read / key_read_requests < 0.01
key_write / key_write_requests <= 1.0
Set the maximum number of connections so that your users will not see a "Too many connections" message. Be careful that this may have an impact on the total memory used. MySQL connections usually last for milliseconds, so it is unusual even for a heavily loaded server for this value to be over 200. thread_cache_size "
Hint counter: 11
Episode hint counter before: 11
Episode hint counter: 12
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(388, 403), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='64M'>, recommendation='64M', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=64.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19450999796390533, 0.15914979577064514, 0.2871057093143463, 0.14859525859355927, 0.21063925325870514]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(388, 403), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='64M'>, recommendation='64M', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=64.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.023741085082292557, 0.44100087881088257, 0.21198078989982605, 0.1755017787218094, 0.14777542650699615]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(388, 403), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='64M'>, recommendation='64M', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=64.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.19450999796390533, 0.15914979577064514, 0.2871057093143463, 0.14859525859355927, 0.21063925325870514]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(388, 403), match='key_buffer_size'>, value=<re.Match object; span=(0, 3), match='64M'>, recommendation='64M', passage="# MySQL Server Configuration\n# Directories and File Paths\ndatadir=/data/mysql\nsocket=/data/mysql/mysql.sock\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n# Logging and Replication\nskip-log-bin=true\n# Performance and Optimization\nskip_name_resolve\nskip-performance-schema\noptimizer_switch = 'index_condition_pushdown=off'\ntmp-table-size = 96M\nmax-heap-table-size = 96M\nkey_buffer_size = 64M\n# Connections and Threads\nmax_connections = 1250\nthread_cache_size = 8\nmax_allowed_packet = 64M\n# InnoDB Configuration\ninnodb-log-file-size = 128M\ninnodb-log-buffer-size = 128M wsrep_mysql_replication_bundle ", float_val=64.0, val_unit='M', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.023741085082292557, 0.44100087881088257, 0.21198078989982605, 0.1755017787218094, 0.14777542650699615]
Choice: 0
Trying update set global key_buffer_size=134217728
Trying update set global key_buffer_size=134217728
Trying assigning key_buffer_size to 128M
Adding assignment ('key_buffer_size', '128M') with weight 1
Assignment ('key_buffer_size', '128M') extracted from "# MySQL Server Configuration
# Directories and File Paths
datadir=/data/mysql
socket=/data/mysql/mysql.sock
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
# Logging and Replication
skip-log-bin=true
# Performance and Optimization
skip_name_resolve
skip-performance-schema
optimizer_switch = 'index_condition_pushdown=off'
tmp-table-size = 96M
max-heap-table-size = 96M
key_buffer_size = 64M
# Connections and Threads
max_connections = 1250
thread_cache_size = 8
max_allowed_packet = 64M
# InnoDB Configuration
innodb-log-file-size = 128M
innodb-log-buffer-size = 128M wsrep_mysql_replication_bundle "
Hint counter: 12
Episode hint counter before: 12
Episode hint counter: 13
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(63, 78), match='key_buffer_size'>, value=<re.Match object; span=(0, 4), match='1200'>, recommendation='1200', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=1200.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18510159850120544, 0.19854989647865295, 0.25001347064971924, 0.1852368712425232, 0.18109816312789917]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(63, 78), match='key_buffer_size'>, value=<re.Match object; span=(0, 4), match='1200'>, recommendation='1200', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=1200.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.01587599329650402, 0.4516242742538452, 0.19539159536361694, 0.16862988471984863, 0.168478325009346]
Choice: 4
Trying update set global key_buffer_size=600
Exception during update: Cannot drop default keycache
Trying update set global key_buffer_size=134217728
Trying assigning key_buffer_size to 600
Assignment ('key_buffer_size', '600') was rejected
Hint counter: 13
Episode hint counter before: 13
Episode hint counter: 14
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(2034, 2050), match='table_open_cache'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage="There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.\nContinuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:\nAdjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).\nAdjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).\nAdjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size ", float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 2
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(2034, 2050), match='table_open_cache'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage="There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.\nContinuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:\nAdjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).\nAdjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).\nAdjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size ", float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(2034, 2050), match='table_open_cache'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage="There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.\nContinuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:\nAdjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).\nAdjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).\nAdjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size ", float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.18853892385959625, 0.17371782660484314, 0.2637619078159332, 0.19082817435264587, 0.18315310776233673]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(2034, 2050), match='table_open_cache'>, value=<re.Match object; span=(0, 3), match='512'>, recommendation='512', passage="There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.\nContinuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:\nAdjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).\nAdjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).\nAdjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size ", float_val=512.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022273913025856018, 0.45673248171806335, 0.20234665274620056, 0.1712857037782669, 0.14736124873161316]
Choice: 4
Trying update set global table_open_cache=2048
Trying update set global table_open_cache=2000
Trying assigning table_open_cache to 2048
Adding assignment ('table_open_cache', '2048') with weight 16
Assignment ('table_open_cache', '2048') extracted from "There's a dedicated page in the MariaDB Docs to Memory Allocation, and I'd say this is potentially the most useful page I found within those docs. The short of it is similar to MySQL, the majority of the Performance Gains to be had come from correctly configuring the innoDB_buffer_pool_size, depending on the memory you have available. Unfortunately due to how wide-ranging this can be, I can't really offer any sort of guidance for the most part here - it all depends on your setup, and how much RAM you have, and what else is running on the server. As a minimum though, if you're building something lightweight, I wouldn't really allocate any less than 1GB to MariaDB total, considering how cheap RAM can be with hosting these days, so it's a piece of mind thing more than anything else. This is however based off a relatively small Moodle Server, so naturally this will change as you scale. This GitHub page (dronezzzko/mysql-mariadb-tuning-and-optimization-for-best-performance.md) does offer some suggestions about optimizing MariaDB depending on your memory, though I'd again recommend having a look at what the options actually do (definitely don't just blindly set them) before making a decision as to whether they're right for you - the MariaDB Docs are pretty good in this respect. Here's the page you'll be looking for if that's the case: Server System Variables.
Continuing back along our original Memory Allocation page, I would read this page and have a look at what it says - it's actually nowhere near as long as it looks, but does offer some other useful suggestions:
Adjusting parameters depending on your configuration: 64-bit OS and MariaDB¶ (Generally you should be 64-bit these days).
Adjusting key_buffer_size, and reducing this if you're not using MyISAM Tables, (It's only relevant to have a large key_buffer_size if you're using MyISAM Tables, which by default MariaDB uses InnoDB. General consensus is InnoDB offers better performance as well, so really only use MyISAM if you have a reason to).
Adjusting table_open_cache (previously called table_cache) - in Performance recommendations under MySQL, it recommends having this as 512 for most Moodle Installations, but I left it at the default MariaDB setting of 2000. tmp_memory_table_size "
Hint counter: 14
Episode hint counter before: 14
Episode hint counter: 15
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=42, param=<re.Match object; span=(403, 419), match='table_open_cache'>, value=<re.Match object; span=(0, 5), match='32012'>, recommendation='32012', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32012.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17296606302261353, 0.1574774533510208, 0.29070794582366943, 0.16750556230545044, 0.2113429605960846]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=42, param=<re.Match object; span=(403, 419), match='table_open_cache'>, value=<re.Match object; span=(0, 5), match='32012'>, recommendation='32012', passage='innodb-file-per-table = 1\ninnodb_buffer_pool_instances = 8\ninnodb_old_blocks_time = 1000\ninnodb_stats_on_metadata = off\ninnodb-flush-method = O_DIRECT\ninnodb-flush-log-at-trx-commit = 2\ninnodb_buffer_pool_size = 23G\ninnodb_read_io_threads = 32\ninnodb_write_io_threads = 32\ninnodb_io_capacity = 4000\ninnodb_io_capacity_max = 6000\n# Timeouts\nconnect_timeout = 300\nwait_timeout = 30000\n# Caches and Limits\ntable_open_cache_instances = 16\ntable_open_cache\n= 32012\nopen_files_limit = 65535\nmax_connect_errors = 1000000\n[client]\n# MySQL Client Configuration\n# Client Socket innodb_buffer_pool_size ', float_val=32012.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.03018392063677311, 0.4338657259941101, 0.20712286233901978, 0.18083569407463074, 0.14799179136753082]
Choice: 1
Trying update set global table_open_cache=128048
Trying update set global table_open_cache=2000
Trying assigning table_open_cache to 128048
Adding assignment ('table_open_cache', '128048') with weight 2
Assignment ('table_open_cache', '128048') extracted from "innodb-file-per-table = 1
innodb_buffer_pool_instances = 8
innodb_old_blocks_time = 1000
innodb_stats_on_metadata = off
innodb-flush-method = O_DIRECT
innodb-flush-log-at-trx-commit = 2
innodb_buffer_pool_size = 23G
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_io_capacity = 4000
innodb_io_capacity_max = 6000
# Timeouts
connect_timeout = 300
wait_timeout = 30000
# Caches and Limits
table_open_cache_instances = 16
table_open_cache
= 32012
open_files_limit = 65535
max_connect_errors = 1000000
[client]
# MySQL Client Configuration
# Client Socket innodb_buffer_pool_size "
Hint counter: 15
Episode hint counter before: 15
Episode hint counter: 16
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(351, 367), match='table_open_cache'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17999409139156342, 0.20450188219547272, 0.2764931619167328, 0.1695912778377533, 0.1694195717573166]
Choice: 3
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(351, 367), match='table_open_cache'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025632193312048912, 0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(351, 367), match='table_open_cache'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.17999409139156342, 0.20450188219547272, 0.2764931619167328, 0.1695912778377533, 0.1694195717573166]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(351, 367), match='table_open_cache'>, value=<re.Match object; span=(0, 4), match='2048'>, recommendation='2048', passage='And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).\nMariaDB:\nkey_buffer_size = 1200\nquery_cache_size = 50\ntmp_table_size = 128\ninnodb_buffer_pool_size = 4096\ninnodb_log_buffer_size = 32\nsort_buffer_size = 2048\nread_buffer_size = 256\nread_rnd_buffer_size = 512\njoin_buffer_size = 2048\nthread_stack = 512\nbinlog_cache_size = 64\nthread_cache_size = 16\ntable_open_cache = 2048\nmax_connections = 200\nPHP:\nmax_children = 4\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 2\nApache:\nTimeout 30\nKeepAliveTimeout 5\nMaxKeepAliveRequests 200\nStartServers 4\nMaxSpareThreads 50\nMinSpareThreads 20\nThreadsPerChild 50 thread_cache_size ', float_val=2048.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.025632193312048912, 0.44854864478111267, 0.20763951539993286, 0.17194095253944397, 0.14623866975307465]
Choice: 1
Trying update set global table_open_cache=8192
Trying update set global table_open_cache=2000
Trying assigning table_open_cache to 8192
Adding assignment ('table_open_cache', '8192') with weight 2
Assignment ('table_open_cache', '8192') extracted from "And so, config for VPS 4 CPU, 8GB RAM, SSD (not HDD).
MariaDB:
key_buffer_size = 1200
query_cache_size = 50
tmp_table_size = 128
innodb_buffer_pool_size = 4096
innodb_log_buffer_size = 32
sort_buffer_size = 2048
read_buffer_size = 256
read_rnd_buffer_size = 512
join_buffer_size = 2048
thread_stack = 512
binlog_cache_size = 64
thread_cache_size = 16
table_open_cache = 2048
max_connections = 200
PHP:
max_children = 4
start_servers = 2
min_spare_servers = 1
max_spare_servers = 2
Apache:
Timeout 30
KeepAliveTimeout 5
MaxKeepAliveRequests 200
StartServers 4
MaxSpareThreads 50
MinSpareThreads 20
ThreadsPerChild 50 thread_cache_size "
Hint counter: 16
Episode hint counter before: 16
Episode hint counter: 17
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=52, param=<re.Match object; span=(241, 257), match='table_open_cache'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.20224447548389435, 0.18172581493854523, 0.2561816871166229, 0.15085653960704803, 0.20899151265621185]
Choice: 1
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=52, param=<re.Match object; span=(241, 257), match='table_open_cache'>, value=<re.Match object; span=(0, 2), match='64'>, recommendation='64', passage='tmp_table_size = 32\ninnodb_buffer_pool_size = 512\ninnodb_log_buffer_size = 8\nsort_buffer_size = 1024\nread_buffer_size = 1024\nread_rnd_buffer_size = 4096\njoin_buffer_size = 1024\nthread_stack = 192\nbinlog_cache_size = 32\nthread_cache_size = 8\ntable_open_cache = 64\nmax_connections = 20\nPHP:\nmax_children = 10\nstart_servers = 2\nmin_spare_servers = 1\nmax_spare_servers = 3\nApache:\nTimeout = 30\nKeepAlive = On\nKeepAliveTimeout = 5\nMaxKeepAliveRequests = 100\nStartServers = 2\nMaxSpareThreads = 25\nMinSpareThreads = 10\nThreadsPerChild = 25\nMaxRequestWorkers = 50 binlog_stmt_cache_size ', float_val=64.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.027772024273872375, 0.460867315530777, 0.20801353454589844, 0.16750642657279968, 0.13584065437316895]
Choice: 4
Trying update set global table_open_cache=32
Trying update set global table_open_cache=2000
Trying assigning table_open_cache to 32
Adding assignment ('table_open_cache', '32') with weight 16
Assignment ('table_open_cache', '32') extracted from "tmp_table_size = 32
innodb_buffer_pool_size = 512
innodb_log_buffer_size = 8
sort_buffer_size = 1024
read_buffer_size = 1024
read_rnd_buffer_size = 4096
join_buffer_size = 1024
thread_stack = 192
binlog_cache_size = 32
thread_cache_size = 8
table_open_cache = 64
max_connections = 20
PHP:
max_children = 10
start_servers = 2
min_spare_servers = 1
max_spare_servers = 3
Apache:
Timeout = 30
KeepAlive = On
KeepAliveTimeout = 5
MaxKeepAliveRequests = 100
StartServers = 2
MaxSpareThreads = 25
MinSpareThreads = 10
ThreadsPerChild = 25
MaxRequestWorkers = 50 binlog_stmt_cache_size "
Hint counter: 17
Episode hint counter before: 17
Episode hint counter: 18
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(343, 367), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 2), match='2K'>, recommendation='2K', passage='If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.\nEnable the query cache with\nquery_cache_type = 1.\nFor most Moodle installs, set the following:\nquery_cache_size = 36M\nquery_cache_min_res_unit = 2K.\nThe query cache will improve performance if you are doing few updates on the database.\nSet the table cache correctly. For Moodle 1.6 set\ntable_cache = 256 #(table_open_cache in MySQL > 5.1.2)\n(min), and for Moodle 1.7 set\ntable_cache = 512 #(table_open_cache in MySQL > 5.1.2)\n(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size ', float_val=2.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1822049915790558, 0.14193075895309448, 0.2752767503261566, 0.19001543521881104, 0.2105720192193985]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=11, param=<re.Match object; span=(343, 367), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 2), match='2K'>, recommendation='2K', passage='If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.\nEnable the query cache with\nquery_cache_type = 1.\nFor most Moodle installs, set the following:\nquery_cache_size = 36M\nquery_cache_min_res_unit = 2K.\nThe query cache will improve performance if you are doing few updates on the database.\nSet the table cache correctly. For Moodle 1.6 set\ntable_cache = 256 #(table_open_cache in MySQL > 5.1.2)\n(min), and for Moodle 1.7 set\ntable_cache = 512 #(table_open_cache in MySQL > 5.1.2)\n(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size ', float_val=2.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022500183433294296, 0.4523022472858429, 0.20967313647270203, 0.17037560045719147, 0.14514879882335663]
--- Tuning Updates ---
Minimal time (ms): 13883.55078125
Achieved with configuration: {'thread_cache_size': 16777216, 'innodb_buffer_pool_size': 17179869184, 'key_buffer_size': 33554432, 'table_open_cache': 512, 'query_cache_min_res_unit': 2048}
Maximal time (ms): 57926.783935546875
Achieved with configuration: {'max_connections': 75, 'max_connect_errors': 4000000, 'innodb_old_blocks_time': 250, 'read_buffer_size': 16384, 'tmp_table_size': 256, 'join_buffer_size': 2048, 'read_rnd_buffer_size': 4096, 'sort_buffer_size': 2097152, 'binlog_cache_size': 16, 'query_cache_limit': 104857600}
Decision: Deciding adaption of TuningHint(doc_id=11, param=<re.Match object; span=(343, 367), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 2), match='2K'>, recommendation='2K', passage='If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.\nEnable the query cache with\nquery_cache_type = 1.\nFor most Moodle installs, set the following:\nquery_cache_size = 36M\nquery_cache_min_res_unit = 2K.\nThe query cache will improve performance if you are doing few updates on the database.\nSet the table cache correctly. For Moodle 1.6 set\ntable_cache = 256 #(table_open_cache in MySQL > 5.1.2)\n(min), and for Moodle 1.7 set\ntable_cache = 512 #(table_open_cache in MySQL > 5.1.2)\n(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size ', float_val=2.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1822049915790558, 0.14193075895309448, 0.2752767503261566, 0.19001543521881104, 0.2105720192193985]
Choice: 4
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=11, param=<re.Match object; span=(343, 367), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 2), match='2K'>, recommendation='2K', passage='If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.\nEnable the query cache with\nquery_cache_type = 1.\nFor most Moodle installs, set the following:\nquery_cache_size = 36M\nquery_cache_min_res_unit = 2K.\nThe query cache will improve performance if you are doing few updates on the database.\nSet the table cache correctly. For Moodle 1.6 set\ntable_cache = 256 #(table_open_cache in MySQL > 5.1.2)\n(min), and for Moodle 1.7 set\ntable_cache = 512 #(table_open_cache in MySQL > 5.1.2)\n(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size ', float_val=2.0, val_unit='K', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.022500183433294296, 0.4523022472858429, 0.20967313647270203, 0.17037560045719147, 0.14514879882335663]
Choice: 4
Trying update set global query_cache_min_res_unit=8192
Trying update set global query_cache_min_res_unit=4096
Trying assigning query_cache_min_res_unit to 8K
Adding assignment ('query_cache_min_res_unit', '8K') with weight 16
Assignment ('query_cache_min_res_unit', '8K') extracted from "If you are able, the MySQLTuner tool can be run against your MySQL server and will calculate appropriate configuration values for most of the following settings based on your current load, status and variables automatically.
Enable the query cache with
query_cache_type = 1.
For most Moodle installs, set the following:
query_cache_size = 36M
query_cache_min_res_unit = 2K.
The query cache will improve performance if you are doing few updates on the database.
Set the table cache correctly. For Moodle 1.6 set
table_cache = 256 #(table_open_cache in MySQL > 5.1.2)
(min), and for Moodle 1.7 set
table_cache = 512 #(table_open_cache in MySQL > 5.1.2)
(min). The table cache is used by all threads (connections), so monitor the value of opened_tables to further adjust - if opened_tables > 3 * table_cache(table_open_cache in MySQL > 5.1.2) then increase table_cache up to your OS limit. Note also that the figure for table_cache will also change depending on the number of modules and plugins you have installed. Find the number for your server by executing the mysql statement below. Look at the number returned and set table_cache to this value. query_cache_size "
Hint counter: 18
Episode hint counter before: 18
Episode hint counter: 19
Hints per episode: 20
Done flag: False
Decision: Deciding adaption of TuningHint(doc_id=15, param=<re.Match object; span=(497, 521), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['Decrease recommendation strongly', 'Decrease recommendation', 'Use recommendation', 'Increase recommendation', 'Increase recommendation strongly']
Scores: [0.1929043084383011, 0.20756587386131287, 0.27467942237854004, 0.1552993506193161, 0.16955099999904633]
Choice: 0
Done flag: False
Decision: Deciding weight of TuningHint(doc_id=15, param=<re.Match object; span=(497, 521), match='query_cache_min_res_unit'>, value=<re.Match object; span=(0, 4), match='4096'>, recommendation='4096', passage="Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).\nAdjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.\nAdjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.\nOther Adjustments from the Inter-webs:\nI adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size ", float_val=4096.0, val_unit='', hint_type=<HintType.ABSOLUTE: 3>)
Choices: ['This hint is not important.', 'This hint is somewhat important.', 'This hint is quite important.', 'This hint is very important.', 'This hint is super important.']
Scores: [0.029096694663167, 0.4537006616592407, 0.2012118697166443, 0.17119792103767395, 0.14479291439056396]
Choice: 3
Trying update set global query_cache_min_res_unit=1024
Trying update set global query_cache_min_res_unit=4096
Trying assigning query_cache_min_res_unit to 1024
Adding assignment ('query_cache_min_res_unit', '1024') with weight 8
Assignment ('query_cache_min_res_unit', '1024') extracted from "Adjusting the query_cache - this differs from MySQL where by default it is disabled in MariaDB. Enabling it may even reduce performance if it isn't needed, as per the docs. I unfortunately don't know enough about how Moodle uses the database as to whether it is better to have this on or off these days, so went with the MySQL recommendation of On, but with a query_cache_size of 64M (seems to be the recommendation of many other sites, as memory is plentiful these days). I did however leave the query_cache_min_res_unit with the default of 4096 (4KB).
Adjusting the thread_cache_size - as mentioned on the page, normally this doesn't have a huge effect on things, so leaving it as default (256) doesn't seem to do too much damage. Other sites however recommend setting this at a value of 16 or so - the best thing would be to test it in your setup as recommended, and see what works best. I also tried a setting of 16 to no real noticeable difference on a small Moodle site.
Adjusting Swappiness - Swappiness is how aggressively the OS will swap to and from RAM to disk - useful for applications you're using and then quickly switching, not so much for databasing where the buffer_pool could then be swapped out to disk, defeating the purpose of the buffer_pool. I set this to the recommended value of 5.
Other Adjustments from the Inter-webs:
I adjusted tmp_table_size to 64MB, seems to be recommended a lot over the internet, and I figured it couldn't hurt due to the amount of RAM we have available (default is 16MB for this). query_cache_size "[Restart] MariaDB server shut down!
[Restart] MariaDB server restarted!
/scratch/s8todick/dbbert-slurm/run.sh: line 27: 66053 Killed                  PYTHONPATH=src python3 src/run/run_dbbert.py demo_docs/mariadb100 $memory_size 50000000000 $core_count md tpch $mysql_user $mysql_password "bash $parent_path/restart_server.sh" ../client/TPC/TPC-H/dbgen/sql-queries/joined.sql --max_length=512
slurmstepd-eku01: error: Detected 1 oom-kill event(s) in StepId=2157350.0 cgroup. Some of your processes may have been killed by the cgroup out-of-memory handler.
srun: error: eku01: task 0: Out Of Memory
slurmstepd-eku01: error: Detected 1 oom-kill event(s) in StepId=2157350.batch cgroup. Some of your processes may have been killed by the cgroup out-of-memory handler.
